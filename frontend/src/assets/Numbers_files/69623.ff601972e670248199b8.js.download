"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[69623],{33782:(e,n,t)=>{t.d(n,{P7:()=>s,Zl:()=>o,u0:()=>a});var r=t(4950),a={name:"",description:"",icon:"",access:r.Ze.PUBLIC,is_members_allowed_to_post:!0,is_members_allowed_to_poll:!0,is_members_allowed_to_comment:!0,is_members_allowed_to_upvote:!0,is_members_allowed_to_like:!0,is_members_allowed_to_share:!0,is_members_allowed_to_upload_images:!0,is_members_allowed_to_upload_videos:!0,is_members_allowed_to_upload_files:!0,is_members_allowed_to_view_members:!0,is_members_allowed_to_mention_members:!0,is_members_allowed_to_sort_posts:!0,is_standalone:!1,default_post_sorting:r.Xb.CREATED_DESC,hidden_from_community:!1,moderators:[],is_invitation_required:!1},o={name:"",description:"",display_order:0,channel_ids:[]},s={GENERAL:"general",CHANNEL_ACCESS:"channelAccess",CHANNEL_MEMBERS:"channelMembers"}},87045:(e,n,t)=>{t.d(n,{z:()=>C});t(47941),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(93433),a=t(4942),o=t(15861),s=(t(68309),t(21249),t(57327),t(41539),t(26699),t(32023),t(5212),t(82526),t(41817),t(92222),t(69826),t(64687)),i=t.n(s),u=t(63420),l=t(70538),c=t(33782),d=t(56249),p=t(68485),f=t(68805),v=t(69623),h=t(29491);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error";window.showMessage(p.zG.ERROR,n,e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Success";window.showMessage(p.zG.SUCCESS,n,e)},C=(0,u.Q_)("useAggregatedCollectionsStore",(function(){var e=(0,v.Q)(),n=(0,f.s)([]),t=(0,l.computed)((function(){return n.list.value})),a=function(){var e=(0,o.Z)(i().mark((function e(){var n,t,r,a,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.fetchAuthoringAggregatedCollections();case 3:if(t=e.sent,r=t.data,a=r.data,o=r.errors,s=r.success,(null==o||!o.length)&&s){e.next=8;break}return w("An error occurred while fetching collections."),e.abrupt("return");case 8:return e.abrupt("return",null!==(n=a.collections)&&void 0!==n?n:[]);case 11:e.prev=11,e.t0=e.catch(0),w("An error occurred while fetching collections.");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,o.Z)(i().mark((function e(n){var t,r,a,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.createCollection(n);case 2:if(t=e.sent,r=t.data,a=r.data,o=r.errors,s=r.success,(null==o||!o.length)&&s){e.next=7;break}return w("An error occurred while creating collection."),e.abrupt("return");case 7:return g('Collection <span class="weglot-exclude">'.concat(n.name,'"</span> created.')),e.abrupt("return",a.collection);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,o.Z)(i().mark((function e(n,t){var r,a,o,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateCollection(n,t);case 2:if(r=e.sent,a=r.data,o=a.data,s=a.errors,u=a.success,(null==s||!s.length)&&u){e.next=7;break}return w('An error occurred while saving <span class="weglot-exclude">"'.concat(t.name,'".</span>')),e.abrupt("return");case 7:return g('Collection <span class="weglot-exclude">"'.concat(t.name,'"</span> saved.')),e.abrupt("return",o.collection);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.Z)(i().mark((function e(n){var t,r,a,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.deleteCollection(n);case 2:if(t=e.sent,r=t.data,a=r.data,o=r.errors,s=r.success,(null==o||!o.length)&&s){e.next=7;break}return w("Collection was not deleted due to an error."),e.abrupt("return");case 7:return e.abrupt("return",a.collection_id);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=(0,o.Z)(i().mark((function e(n){var t,r,a,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.saveCollectionsManagement(n);case 2:if(t=e.sent,r=t.data,a=r.data,o=r.errors,s=r.success,(null==o||!o.length)&&s){e.next=7;break}return w("Saving failed."),e.abrupt("return");case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e,n){return{id:e.id,display_order:n,channel_ids:e.channel_ids}})),e.next=3,C(t);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var r=(0,o.Z)(i().mark((function r(a){var o,u,l,c,d;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s(a);case 2:if(o=r.sent){r.next=5;break}return r.abrupt("return");case 5:return o.channels||(o.channels=[]),u=o.display_order,l=o.id,c=o.name,d=o.description,n.addItemAtIndex({id:l,name:c,description:d},u),e.previewCollectionsWithChannels.addItemAtIndex(o,u),r.next=12,b(t.value);case 12:return r.abrupt("return",o);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),O=function(){var t=(0,o.Z)(i().mark((function t(r){var a,o,s,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(r.id,r);case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return");case 5:return o=a.id,s=a.name,l=a.description,n.updateItem({id:o,name:s,description:l}),e.previewCollectionsWithChannels.updateItem(a),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var r=(0,o.Z)(i().mark((function r(a){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!a.channel_ids||0===a.channel_ids.length){r.next=2;break}return r.abrupt("return",window.showMessage(p.zG.ALERT,'Unable to remove <span class="weglot-exclude">"'.concat(a.name,'"</span>'),"You need to remove all channels from the collection first.",[{name:"Ok",class:"solid"}]));case 2:return r.next=4,m(a.id,a);case 4:if(r.sent){r.next=7;break}return r.abrupt("return");case 7:return n.removeItemById(a.id),e.previewCollectionsWithChannels.removeItemById(a.id),r.next=11,b(t.value);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),I=function(){var r=(0,o.Z)(i().mark((function r(a){var o,s,u;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!((o=n.findItemIndexById(a.id))<=0)){r.next=3;break}return r.abrupt("return",console.error("The collection cannot be moved up further."));case 3:return s=n.list.value[o].id,u=n.list.value[o-1].id,n.swapItems(o,o-1),e.previewCollectionsWithChannels.updateItem({id:s,display_order:o-1}),e.previewCollectionsWithChannels.updateItem({id:u,display_order:o}),r.next=10,b(t.value);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),x=function(){var r=(0,o.Z)(i().mark((function r(a){var o,s,u;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(-1===(o=n.findItemIndexById(a.id))||o>=n.length.value-1)){r.next=3;break}return r.abrupt("return",console.error("The collection cannot be moved down further."));case 3:return s=n.list.value[o].id,u=n.list.value[o+1].id,n.swapItems(o,o+1),e.previewCollectionsWithChannels.updateItem({id:s,display_order:o+1}),e.previewCollectionsWithChannels.updateItem({id:u,display_order:o}),r.next=10,b(t.value);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),P=function(e,r){var a=t.value.map((function(n){var t,a;return n.id===r?_(_({},n),{},{channel_ids:null===(t=n.channel_ids)||void 0===t?void 0:t.filter((function(n){return n!==e})),channels:null===(a=n.channels)||void 0===a?void 0:a.filter((function(n){return n.id!==e}))}):n}));n.setList(a)},E=function(){var r=(0,o.Z)(i().mark((function r(a,o,s,u){var l,c,d,p,v,h;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d=n.findItemById(a),(p=(0,f.s)(null!==(l=null==d?void 0:d.channel_ids)&&void 0!==l?l:[])).moveItemToIndex(u,s),(v=(0,f.s)(null!==(c=null==d?void 0:d.channels)&&void 0!==c?c:[])).moveItemToIndex(u,s),h=_(_({},d),{},{channel_ids:p.getValue(),channels:v.getValue()}),n.updateItem(h),e.previewCollectionsWithChannels.updateItem({id:h.id,channel_ids:h.channel_ids}),r.next=10,b(t.value);case 10:case"end":return r.stop()}}),r)})));return function(e,n,t,a){return r.apply(this,arguments)}}(),Z=function(){var r=(0,o.Z)(i().mark((function r(a,o,s){var u,l,c,d,p,v,h;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=t.value.find((function(e){return null==e?void 0:e.channel_ids.includes(o.id)})),d=n.findItemById(a),(p=(0,f.s)(null!==(u=null==d?void 0:d.channel_ids)&&void 0!==u?u:[])).addItemAtIndex(o.id,s),(v=(0,f.s)(null!==(l=null==d?void 0:d.channels)&&void 0!==l?l:[])).addItemAtIndex(o,s),h=_(_({},d),{},{channel_ids:p.getValue(),channels:v.getValue()}),n.updateItem(h),e.previewCollectionsWithChannels.updateItem({id:h.id,channel_ids:h.channel_ids,channels:h.channels}),P(o.id,c.id),e.handleRemoveChannelFromPreviewCollection(o.id,c.id),r.next=13,b(t.value);case 13:case"end":return r.stop()}}),r)})));return function(e,n,t){return r.apply(this,arguments)}}(),A=function(){var e=(0,o.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:t=e.sent,n.setList(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleChannelAdded:Z,handleChannelMoved:E,getAggregatedCollections:t,handleSearchCollections:function(e){var t,r;return null!==(t=null===(r=n.list.value)||void 0===r?void 0:r.filter((function(n){var t,r,a=e.text.toLowerCase(),o=n.name.toLowerCase().includes(a),s=null!==(t=null===(r=n.channels)||void 0===r?void 0:r.some((function(e){return e.name.toLowerCase().includes(a)})))&&void 0!==t&&t;return!(e.text&&!o&&!s)&&(!e.collectionId||n.id===e.collectionId)})))&&void 0!==t?t:[]},handleAddNewCollection:y,handleUpdateCollection:O,handleDeleteCollection:S,handleMoveCollectionUp:I,handleMoveCollectionDown:x,handleSaveCollectionsOrder:b,buildNewCollectionProperties:function(){return _(_({},c.Zl),{},{display_order:n.length.value})},buildNewCollectionBelowProperties:function(e){var t=n.findItemIndexById(e.id);return _(_({},c.Zl),{},{display_order:t+1})},handleAddChannelToAggregatedCollection:function(e,a){var o,s={access:a.access,description:a.description,icon:a.icon,id:a.id,members_count:(0,h.W)(a.members).valid,members:null!==(o=a.members)&&void 0!==o?o:0,name:a.name,posts_count:0},i=t.value.map((function(n){var t,a;return e===n.id?_(_({},n),{},{channel_ids:[].concat((0,r.Z)(null!==(t=n.channel_ids)&&void 0!==t?t:[]),[s.id]),channels:[].concat((0,r.Z)(null!==(a=n.channels)&&void 0!==a?a:[]),[s])}):n}));n.setList(i)},handleUpdateChannelInAggregatedCollection:function(e){var r,a={access:e.access,id:e.id,members_count:(0,h.W)(e.members).valid,members:null!==(r=e.members)&&void 0!==r?r:0,name:e.name},o=t.value.map((function(e){if(e.channel_ids.includes(a.id)){var n=e.channels.map((function(e){return e.id===a.id?_(_({},e),a):e}));return _(_({},e),{},{channels:n})}return e}));n.setList(o)},handleRemoveChannelFromAggregatedCollection:P,loadAuthoringAggregatedCollectionsState:A}}))},27108:(e,n,t)=>{t.d(n,{q:()=>g});t(47941),t(82526),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(4942),a=t(15861),o=t(64687),s=t.n(o),i=(t(69826),t(41539),t(68309),t(57327),t(63420)),u=t(70538),l=t(56249),c=t(29225),d=t(68485),p=t(33782),f=t(69623),v=t(87045),h=t(93949),m=t(96486);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=(0,i.Q_)("socialAuthoring",(function(){var e=(0,f.Q)(),n=(0,v.z)(),t=(0,u.ref)("Community"),r=(0,u.ref)(""),o=(0,u.ref)({}),i=(0,u.ref)({flag:!1,tab:p.P7.GENERAL}),_=(0,u.ref)(!1),g=(0,u.ref)({}),C=(0,u.ref)([]),b=(0,u.ref)([]),y=(0,u.ref)({display:!1,exportType:null}),O=(0,u.computed)((function(){var n;if(!r.value)return null;var t=null===(n=b.value)||void 0===n?void 0:n.find((function(e){return r.value===e.id}));return t||e.flatMapOfChannels.find((function(e){return r.value===e.id}))})),S=function(e){r.value=e},I=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.P7.GENERAL,r=arguments.length>2?arguments[2]:void 0;S(null!==(e=null==n?void 0:n.id)&&void 0!==e?e:""),i.value={flag:!0,tab:t,membersFilter:r}},x=(0,u.computed)((function(){return""===r.value})),P=(0,u.computed)((function(){return!o.value.id})),E={site_social:!1,site_social_groups:[],site_disable_perunit_social:!1,site_disable_inbox:!1,site_disable_courses_social:!1,site_social_discussions_global_settings:{is_members_allowed_to_post:!1,is_members_allowed_to_poll:!1,is_members_allowed_to_comment:!1,is_members_allowed_to_upvote:!1,is_members_allowed_to_like:!1,is_members_allowed_to_share:!1,is_members_allowed_to_upload_images:!1,is_members_allowed_to_upload_videos:!1,is_members_allowed_to_upload_files:!1,is_members_allowed_to_mention_members:!0}},Z=function(e){g.value=e},A=function(e){C.value=e},k=function(){var e=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.FK)((0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.DS)(l.Z.saveSettings(g.value));case 2:case"end":return e.stop()}}),e)}))),null,!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function M(){return(M=(0,a.Z)(s().mark((function e(){var n,t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.getSettings();case 2:r=e.sent,Z((0,m.merge)({},E,null!==(n=null===(t=r.data)||void 0===t?void 0:t.settings)&&void 0!==n?n:{}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=(0,a.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.getPagesOptionsListForCommunitySettings();case 2:n=e.sent,A(n.data.pages);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return D=(0,a.Z)(s().mark((function t(r){var a,o,i,u=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},t.next=3,(0,c.B)(l.Z.createCommunityChannel(w(w({},r),{},{userSelection:a})));case 3:(o=t.sent).isBad&&window.showMessage(d.zG.ERROR,"Error","Space was not created due to an error."),o.isOK&&(i=o.data.group,e.handleAddChannelToPreviewCollection(r.collection_id,i),n.handleAddChannelToAggregatedCollection(r.collection_id,i),window.WI.track("Create space",{access:o.data.group.access,sort:o.data.group.is_members_allowed_to_sort_posts?"on":"off","show space members":o.data.group.is_members_allowed_to_view_members?"on":"off","hide space":o.data.group.hidden_from_community?"on":"off",origin:"Community"}),window.showMessage(d.zG.SUCCESS,"Space created successfully",'Space <span class="weglot-exclude">"'.concat(r.name,'"</span> created.')));case 6:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function U(){return U=(0,a.Z)(s().mark((function t(r,a){var o,i,u,p=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:{},t.next=3,(0,c.B)(l.Z.updateCommunityChannel(r,w(w({},a),{},{userSelection:o})));case 3:(i=t.sent).isBad&&window.showMessage(d.zG.ERROR,"Error","Space was not saved due to an error."),i.isOK&&(u=i.data.group,e.handleUpdateChannelInPreviewCollection(u),n.handleUpdateChannelInAggregatedCollection(u),window.showMessage(d.zG.SUCCESS,"Space saved successfully",'Space <span class="weglot-exclude">"'.concat(i.data.group.name,'"</span> updated.')));case 6:case"end":return t.stop()}}),t)}))),U.apply(this,arguments)}function L(){return(L=(0,a.Z)(s().mark((function t(r,a){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.B)(l.Z.deleteCommunityChannel(r.id,{collection_id:a}));case 2:t.sent.isOK?(e.handleRemoveChannelFromPreviewCollection(r.id,a),n.handleRemoveChannelFromAggregatedCollection(r.id,a),window.showMessage(d.zG.SUCCESS,"Space removed successfully",'Space <span class="weglot-exclude">"'.concat(r.name,'"</span> was removed.'))):window.showMessage(d.zG.ERROR,"Error",'Space <span class="weglot-exclude">"'.concat(r.name,'"</span> was not removed due to an error.'));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){return(j=(0,a.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.B)(l.Z.deleteCommunityChannel(n.id));case 2:e.sent.isOK?(b.value=b.value.filter((function(e){return e.id!==n.id})),window.showMessage(d.zG.SUCCESS,"Space removed successfully",'Space <span class="weglot-exclude">"'.concat(n.name,'"</span> was removed.'))):window.showMessage(d.zG.ERROR,"Error",'Space <span class="weglot-exclude">"'.concat(n.name,'"</span> was not removed due to an error.'));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){o.value=e},N=function(){var e=(0,a.Z)(s().mark((function e(){var n,t,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.getCommunityChannels({courseActivitiesOnly:!0});case 3:if(n=e.sent,t=n.data,r=t.groups,a=t.errors,o=t.success,(null==a||!a.length)&&o){e.next=8;break}return window.showMessage(d.zG.ERROR,"Error","An error occurred while fetching standalone channels."),e.abrupt("return");case 8:b.value=r,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),window.showMessage(d.zG.ERROR,"Error","An error occurred while fetching standalone channels.");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return{selectedCollection:o,activeTab:t,isInChannelCreateMode:x,channelSideFormStatus:i,pages:C,selectedSpaceId:r,settings:g,courseActivityChannels:b,exportModalDisplay:y,closeChannelSideForm:function(){T({}),S(""),i.value={flag:!1,tab:p.P7.GENERAL}},loadCommunitySettings:function(){return M.apply(this,arguments)},loadPagesOptionsListForCommunitySettings:function(){return R.apply(this,arguments)},openChannelSideForm:I,saveSettings:k,setActiveTab:function(e){t.value=e},setSelectedSpaceId:S,setSettings:Z,isCollectionSideFormOpened:_,setSelectedCollection:T,openCollectionSideForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(e),_.value=!0},closeCollectionSideForm:function(){_.value=!1,T({})},createChannel:function(e){return D.apply(this,arguments)},removeChannel:function(e,n){return L.apply(this,arguments)},removeCourseActivityChannel:function(e){return j.apply(this,arguments)},updateChannel:function(e,n){return U.apply(this,arguments)},setChannel:function(t){e.handleUpdateChannelInPreviewCollection(t),n.handleUpdateChannelInAggregatedCollection(t)},setExportModalDisplay:function(e){y.value=e},isInCollectionCreateMode:P,addChannelToCollection:function(e){T(e),I()},selectedSpace:O,loadCourseActivityChannels:N}}))},68805:(e,n,t)=>{t.d(n,{s:()=>l});t(47941),t(82526),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(4942),a=t(29439),o=t(93433),s=(t(57658),t(40561),t(57327),t(41539),t(34553),t(69826),t(70538));function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,s.ref)(e),t=function(){return n.value},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.value=e},i=function(e){n.value.push(e)},l=function(e,t){n.value.splice(t,0,e)},c=function(e,t){if(!(e<0||t<0||e>=n.value.length||t>=n.value.length)){var r=[n.value[t],n.value[e]];n.value[e]=r[0],n.value[t]=r[1],n.value=(0,o.Z)(n.value)}},d=function(e,t){if(!(e<0||t<0||e>=n.value.length||t>=n.value.length)){var r=n.value.splice(e,1),o=(0,a.Z)(r,1)[0];n.value.splice(t,0,o)}},p=function(e){n.value=n.value.filter((function(n){return n.id!==e}))},f=function(e){var t=n.value.findIndex((function(n){return n.id===e.id}));-1!==t&&(n.value[t]=u(u({},n.value[t]),e),n.value=(0,o.Z)(n.value))},v=function(e){return n.value.find((function(n){return n.id===e}))},h=function(e){return n.value.findIndex((function(n){return n.id===e}))},m=(0,s.computed)((function(){return n.value.length}));return{list:n,length:m,setList:r,addItem:i,addItemAtIndex:l,swapItems:c,moveItemToIndex:d,updateItem:f,removeItemById:p,findItemById:v,findItemIndexById:h,getValue:t}}},29491:(e,n,t)=>{t.d(n,{W:()=>r});t(57327),t(41539);var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e||0===e.length)return{valid:0,joined:0,invited:0};var n=e.filter((function(e){return"549d7ee2e4b4c8b511000000"!==e.id})),t=n.length,r=n.filter((function(e){return"normal"===e.status})).length,a=n.filter((function(e){return"invited"===e.status})).length;return{valid:t,joined:r,invited:a}}},4950:(e,n,t)=>{t.d(n,{AI:()=>b,I_:()=>u,Lf:()=>S,Rz:()=>O,UA:()=>d,VZ:()=>C,Xb:()=>m,Xe:()=>p,Ze:()=>i,a:()=>y,aR:()=>v,ar:()=>_,d:()=>c,fd:()=>w,i_:()=>l,jM:()=>o,p7:()=>s,qC:()=>h,sy:()=>f,tG:()=>g});var r,a=t(4942),o={attachments:[],best_of:null,comments:[],context:null,likes:null,social_object:{type:null,data:null},social_items:[],text:"",text_mentions:[]},s={best_of:null,likes:null,text:"",text_mentions:[],attachments:[],social_items:[]},i={PRIVATE:"private",PUBLIC:"public"},u={GENERAL:"general",MENTIONS:"mentions",REPLIES:"replies",COURSE_DISCUSSIONS:"course_discussions"},l={COURSE_DISCUSSION:"course",USER_GROUP:"group",VIDEO:"video"},c={IMAGE:"image",POLL:"poll",LIVE_CODE:"livecode",LINK:"link",TIP:"tip"},d={IMAGE:"image",VIDEO:"video",FILE:"file",AUDIO:"audio"},p={IMAGE:"image",FILE:"file"},f={AWAITING_SCAN:"awaiting_scan",SCAN_FAILED:"scan_failed",UNSAFE:"unsafe",SAFE:"safe"},v={FEED:"feed",MEMBERS:"members"},h={PUBLIC:"social",PRIVATE:"socialAttachments"},m={CREATED_DESC:"created_desc",CREATED_ASC:"created_asc",MODIFIED_DESC:"modified_desc"},_=5,w=1,g={PRIVATE:"default_channel_private_lock",PUBLIC:"default_channel_public_hashtag"},C=(r={},(0,a.Z)(r,g.PUBLIC,"fa-hashtag"),(0,a.Z)(r,g.PRIVATE,"fa-lock"),r),b={POST:"post",COMMENT:"comment"},y={POST:1e4,COMMENT:5e3},O=20,S="everyone"},95135:(e,n,t)=>{t.d(n,{X:()=>i,k:()=>s});var r=t(4942),a=(t(43371),t(63420)),o=t(70538),s=Object.freeze({COMMENT:"canMemberComment",LIKE:"canMemberLike",POST:"canMemberPost",POLL:"canMemberPoll",SHARE:"canMemberShare",UPLOAD_FILES:"canMemberUploadFiles",UPLOAD_IMAGES:"canMemberUploadImages",UPLOAD_VIDEOS:"canMemberUploadVideos",UPVOTE:"canMemberUpvote",VIEW_MEMBERS:"canMemberViewMembers",SORT_POSTS:"canMemberSortPosts",MENTION_MEMBERS:"canMemberMention"}),i=(0,a.Q_)("feedPermissionsStore",(function(){var e,n=(e={},(0,r.Z)(e,s.COMMENT,!0),(0,r.Z)(e,s.LIKE,!0),(0,r.Z)(e,s.POST,!0),(0,r.Z)(e,s.POLL,!0),(0,r.Z)(e,s.SHARE,!0),(0,r.Z)(e,s.UPLOAD_FILES,!0),(0,r.Z)(e,s.UPLOAD_IMAGES,!0),(0,r.Z)(e,s.UPLOAD_VIDEOS,!0),(0,r.Z)(e,s.UPVOTE,!0),(0,r.Z)(e,s.VIEW_MEMBERS,!0),(0,r.Z)(e,s.SORT_POSTS,!0),(0,r.Z)(e,s.MENTION_MEMBERS,!0),e),t=(0,o.ref)(n),a=function(e){t.value=e};(0,o.computed)((function(){return"admin"===window.me.userRole}));return{permissions:t,setPermissions:a,buildPermissions:function(e){var t,i,u=e.source;if(u){if(o.default.prototype.$lwGates.canUserManagePostsInChannel(u))return a(n);a((i={},(0,r.Z)(i,s.COMMENT,u.is_members_allowed_to_comment),(0,r.Z)(i,s.LIKE,u.is_members_allowed_to_like),(0,r.Z)(i,s.POST,u.is_members_allowed_to_post),(0,r.Z)(i,s.POLL,u.is_members_allowed_to_poll),(0,r.Z)(i,s.SHARE,u.is_members_allowed_to_share),(0,r.Z)(i,s.UPLOAD_FILES,u.is_members_allowed_to_upload_files),(0,r.Z)(i,s.UPLOAD_IMAGES,u.is_members_allowed_to_upload_images),(0,r.Z)(i,s.UPLOAD_VIDEOS,u.is_members_allowed_to_upload_videos),(0,r.Z)(i,s.UPVOTE,u.is_members_allowed_to_upvote),(0,r.Z)(i,s.VIEW_MEMBERS,u.is_members_allowed_to_view_members),(0,r.Z)(i,s.SORT_POSTS,u.is_members_allowed_to_sort_posts),(0,r.Z)(i,s.MENTION_MEMBERS,null===(t=u.is_members_allowed_to_mention_members)||void 0===t||t),i))}}}}))},69623:(e,n,t)=>{t.d(n,{Q:()=>w});t(47941),t(82526),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(93433),a=t(15861),o=t(4942),s=(t(86535),t(99244),t(41539),t(69826),t(92222),t(21249),t(26699),t(32023),t(57327),t(64687)),i=t.n(s),u=t(56249),l=t(70538),c=t(63420),d=t(68805),p=t(93949),f=t(29225),v=t(28575),h=t(4950);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=(0,c.Q_)("usePreviewCollectionsStore",(function(){var e,n=(0,v.$)(),t=(0,d.s)([]),s=(0,l.ref)((e={},(0,o.Z)(e,h.I_.COURSE_DISCUSSIONS,0),(0,o.Z)(e,h.I_.MENTIONS,0),(0,o.Z)(e,h.I_.REPLIES,0),e)),c=(0,l.computed)((function(){var e;return null!==(e=t.list)&&void 0!==e?e:[]})),m=function(){var e=(0,a.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.isAuthoring){e.next=7;break}return e.next=4,(0,p.Eh)(u.Z.fetchAuthoringCollectionsWithChannels());case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,p.Eh)(u.Z.fetchCollectionsWithChannels());case 9:e.t0=e.sent;case 10:return t=e.t0,e.abrupt("return",t.data.data.collections);case 14:return e.prev=14,e.t1=e.catch(0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,a.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:t.setList(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=(0,l.computed)((function(){return t.list.flatMap((function(e){return e.channels}))}));function C(){return(C=(0,a.Z)(i().mark((function e(){var t,r,a,o,l,c,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Eh)(u.Z.getNewPostsCounters({context:"community"}));case 2:o=e.sent,l=o.data.groups,c=o.data.courses,s.value[h.I_.COURSE_DISCUSSIONS]=null!==(t=o.data.courseDiscussions)&&void 0!==t?t:0,s.value[h.I_.MENTIONS]=null!==(r=o.data.mentions)&&void 0!==r?r:0,s.value[h.I_.REPLIES]=null!==(a=o.data.replies)&&void 0!==a?a:0,l&&g.value.map((function(e){return l[e.id]&&(e.new_posts=l[e.id].new_posts),e})),c&&(d=(0,p.ut)(n.courses).map((function(e){return c[e.titleId]&&(e.new_posts=c[e.titleId].new_posts),e})),n.setCourses(d));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=(0,a.Z)(i().mark((function e(n){var r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.Eh)(u.Z.getCommunityChannel(n),!1);case 3:r=e.sent,a=r.data.group,o=[{channels:[a]}],t.setList(o),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var y=function(e,n){var r=c.value.map((function(t){var r,a;return t.id===n?_(_({},t),{},{channel_ids:null===(r=t.channel_ids)||void 0===r?void 0:r.filter((function(n){return n!==e})),channels:null===(a=t.channels)||void 0===a?void 0:a.filter((function(n){return n.id!==e}))}):t}));t.setList(r)},O=function(){var e=(0,a.Z)(i().mark((function e(n,t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f.B,e.next=3,u.Z.leaveChannel(t);case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:e.sent.isOK&&y(t,r);case 8:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}();return{flatMapOfChannels:g,getPreviewCollectionsWithChannels:c,previewCollectionsWithChannels:t,aggregatedFeedNewPostCount:s,handleLeaveChannel:O,handleAddChannelToPreviewCollection:function(e,n){var a,o,s=c.value.find((function(n){return e===n.id}));s?t.updateItem(_(_({},s),{},{channel_ids:[].concat((0,r.Z)(null!==(a=s.channel_ids)&&void 0!==a?a:[]),[n.id]),channels:[].concat((0,r.Z)(null!==(o=s.channels)&&void 0!==o?o:[]),[n])})):w()},handleUpdateChannelInPreviewCollection:function(e){var n=c.value.map((function(n){if(n.channel_ids.includes(e.id)){var t=n.channels.map((function(n){return n.id===e.id?e:n}));return _(_({},n),{},{channels:t})}return n}));t.setList(n)},handleRemoveChannelFromPreviewCollection:y,loadPreviewCollectionsWithChannelsState:w,loadChannelForStandaloneFeed:function(e){return b.apply(this,arguments)},loadNewPostsCounters:function(){return C.apply(this,arguments)},resetAggregatedFeedNewPostCount:function(e){e&&(s.value[e]=0)}}}))},28575:(e,n,t)=>{t.d(n,{$:()=>y});t(82526),t(57327),t(38880),t(49337),t(33321),t(69070);var r=t(29439),a=t(15861),o=t(4942),s=t(64687),i=t.n(s),u=(t(69826),t(41539),t(89554),t(54747),t(47941),t(79753),t(34553),t(40561),t(26699),t(32023),t(2707),t(57658),t(66992),t(88674),t(78783),t(33948),t(63420)),l=t(70538),c=t(93949),d=t(56249),p=t(29225),f=t(4950),v=t(41162),h=t(69623),m=t(95135),_=t(27108),w=(0,u.Q_)("socialAPI",(function(){return{fetchPosts:d.Z.fetchPosts}}));function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=f.Xb.MODIFIED_DESC,y=(0,u.Q_)("socialContent",(function(){var e=(0,h.Q)(),n=(0,m.X)(),t=(0,_.q)(),s=w(),u=(0,l.ref)({}),g=(0,l.ref)([]),y=(0,l.ref)(null),O=(0,l.ref)([]),S=(0,l.ref)(null),I=(0,l.ref)([]),x=(0,l.ref)(f.aR.FEED),P=(0,l.ref)(b),E=(0,l.ref)(null),Z=(0,l.ref)(null),A=(0,l.ref)(null),k=(0,l.ref)(null),M=(0,l.ref)(!1),R=(0,l.ref)(!1),D=(0,l.ref)(!1),U=(0,l.ref)(null),L=(0,l.ref)(null),j=(0,l.ref)({}),T=(0,l.computed)((function(){var n;if(!y.value)return null;if(g.value.find((function(e){var n=e.titleId;return y.value===n})))return f.i_.COURSE_DISCUSSION;var r=e.flatMapOfChannels.find((function(e){var n=e.id;return y.value===n})),a=null==t||null===(n=t.courseActivityChannels)||void 0===n?void 0:n.find((function(e){return y.value===e.id}));return r||a?f.i_.USER_GROUP:null})),N=(0,l.computed)((function(){var n;if(!y.value)return null;if(T.value===f.i_.COURSE_DISCUSSION)return g.value.find((function(e){return y.value===e.titleId}));var r=null==t||null===(n=t.courseActivityChannels)||void 0===n?void 0:n.find((function(e){return y.value===e.id}));return r||e.flatMapOfChannels.find((function(e){return y.value===e.id}))})),B=(0,l.computed)((function(){var e,n=null!==(e=U.value)&&void 0!==e?e:function(){var e={};return S.value===f.I_.MENTIONS&&(e.my="text_mentions"),S.value===f.I_.REPLIES&&(e.my="replies"),S.value===f.I_.COURSE_DISCUSSIONS&&(e.my="course_discussions"),Z.value&&(e.context=Z.value),A.value&&(e.parent_context=A.value),T.value===f.i_.USER_GROUP&&(e.group_id=y.value),e}();return E.value&&(n.query=E.value),n})),F=(0,l.computed)((function(){var e,n,r,a;return"alert"===(null===(e=t.settings)||void 0===e||null===(n=e.site_social)||void 0===n?void 0:n.action)||"redirect"===(null===(r=t.settings)||void 0===r||null===(a=r.site_social)||void 0===a?void 0:a.action)})),G=(0,l.computed)((function(){var e,n;return null!==(e=null==N||null===(n=N.value)||void 0===n?void 0:n.is_standalone)&&void 0!==e&&e})),V=(0,l.computed)((function(){return G.value?L.value:null}));function W(e){u.value=null!=e?e:{}}function z(e,n){u.value[e]&&Object.keys(n).forEach((function(t){return(0,c.D5)(u.value[e],t,n[t])}))}function K(e){E.value=e||null}function Q(e,n){Z.value=e,A.value=n}function X(e){k.value=Array.isArray(e)&&e.length>0?e:null}function q(e){var n=(0,c.ut)(u.value);n[e.id]&&delete n[e.id],W(C((0,o.Z)({},e.id,e),n))}function H(e){P.value=e}function $(e){S.value=e}function Y(e){x.value=e}function J(e){y.value=e}function ee(e){g.value=e}function ne(n){if(n&&0!==n.new_posts)if(n.titleId){var t=g.value.find((function(e){var t=e.titleId;return n.titleId===t}));t&&(t.new_posts=0)}else{var r,a=null===(r=e.getPreviewCollectionsWithChannels)||void 0===r?void 0:r.findIndex((function(e){return e.channel_ids.includes(n.id)}));if(a<0)return;var o=e.getPreviewCollectionsWithChannels[a].channels.findIndex((function(e){return e.id===n.id}));if(o<0)return;e.previewCollectionsWithChannels.list[a].channels[o].new_posts=0}}function te(){return re.apply(this,arguments)}function re(){return(re=(0,a.Z)(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T.value===f.i_.COURSE_DISCUSSION?{course:N.value.titleId}:{group:N.value.id},e.next=3,(0,p.B)(d.Z.fetchOnlineUsers(n));case 3:if(!(t=e.sent).isOK){e.next=6;break}return e.abrupt("return",t.data.users);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,n){return oe.apply(this,arguments)}function oe(){return(oe=(0,a.Z)(i().mark((function e(n,t){var r,a,o,u,l,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.value=null===(r=null==t?void 0:t.setLoading)||void 0===r||r,e.next=3,(0,p.B)(s.fetchPosts(C(C({},n),{},{sort:null!==(a=n.sort)&&void 0!==a?a:P.value,getPinnedPosts:null!==(o=null==t?void 0:t.getPinnedPosts)&&void 0!==o&&o})));case 3:if(!(u=e.sent).isOK||!u.data.posts){e.next=9;break}return c=Array.isArray(u.data.posts)?{}:u.data.posts,(null===(l=null==t?void 0:t.saveData)||void 0===l||l)&&W(c),M.value=!1,e.abrupt("return",c);case 9:return u.isBad&&window.userImpersonation&&window.displayError(u.data.errors),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return ie.apply(this,arguments)}function ie(){return(ie=(0,a.Z)(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.Eh)(d.Z.fetchUserCourses(),!1);case 3:t=e.sent,ee(null!==(n=t.data.userCourses)&&void 0!==n?n:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error loading user courses: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ue(){return(ue=(0,a.Z)(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=[]).push(t.loadCommunitySettings()),r.push(e.loadPreviewCollectionsWithChannelsState()),n.t0=r,n.next=6,se();case 6:return n.t1=n.sent,n.t0.push.call(n.t0,n.t1),n.next=10,Promise.all(r);case 10:return n.next=12,e.loadNewPostsCounters();case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function le(){return(le=(0,a.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.B)(d.Z.fetchPostById(n));case 2:(t=e.sent).isOK&&t.data.post&&q(t.data.post);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=(0,a.Z)(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.B)(d.Z.deletePost(n));case 2:return(t=e.sent).isOK&&(delete(r=C({},u.value))[n],W(r)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=(0,a.Z)(i().mark((function e(n,t){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.B)(d.Z.deleteComment(n,t));case 2:if(!e.sent.isOK){e.next=12;break}if(r=u.value[n],!((a=r.comments.findIndex((function(e){return e.comment_id===t})))<0)){e.next=9;break}return console.error("Error on comment delete"),e.abrupt("return");case 9:r.comments.splice(a,1),e.next=13;break;case 12:console.error("Error on comment delete");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return pe=(0,a.Z)(i().mark((function e(n){var t,r,a,o,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(s.length>1&&void 0!==s[1])||s[1],r=!(s.length>2&&void 0!==s[2])||s[2],!t||!j.value[n]){e.next=4;break}return e.abrupt("return",j.value[n]);case 4:return e.next=6,(0,p.B)(v.Z.getUserData(n,{socialUserCard:!0}));case 6:if(!(a=e.sent).isOK){e.next=11;break}return o=a.data.user,r&&(j.value[n]=o),e.abrupt("return",o);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}function fe(){return ve.apply(this,arguments)}function ve(){return(ve=(0,a.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.value&&N.value){e.next=2;break}return e.abrupt("return");case 2:return(n=[]).push(ae(B.value,{saveData:!1,getPinnedPosts:!0})),n.push(te()),e.abrupt("return",Promise.all(n).then((function(e){var n=(0,r.Z)(e,2);u.value=n[0],O.value=n[1]})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=(0,a.Z)(i().mark((function e(r){var a,o,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(r),s=T.value===f.i_.COURSE_DISCUSSION,u=s?{save:[N.value.title,N.value.titleId],load:N.value.titleId}:{save:null,load:null},$(null),H(null!==(a=null===(o=N.value)||void 0===o?void 0:o.default_post_sorting)&&void 0!==a?a:b),Y(f.aR.FEED),K(null),X(u.save),Q(u.load),ne(N.value),e.next=12,fe();case 12:l=s?C(C({},t.settings.site_social_discussions_global_settings),{},{context:N.value.titleId}):N.value,n.buildPermissions({source:l});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return(me=(0,a.Z)(i().mark((function n(t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return $(t),J(null),H(b),Y(f.aR.FEED),K(null),X(null),Q(null),n.next=9,ae(B.value,{getPinnedPosts:!0});case 9:e.resetAggregatedFeedNewPostCount(t);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function _e(){return(_e=(0,a.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(n),e.next=3,this.fetchPosts(B.value,{getPinnedPosts:!0});case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function we(){return(we=(0,a.Z)(i().mark((function e(n,t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(n,r),X(t),e.next=4,ae(B.value,{getPinnedPosts:!0});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=(0,a.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=!u.value[n].is_pinned,z(n,{is_pinned:t}),e.next=5,(0,c.Eh)(d.Z.setPostPinValue(n,{is_pinned:t}),!1);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return{aggregatedPostQuery:U,cachedUserData:j,channelMembers:I,context:S,courses:g,postsSaveContext:k,feedUserPermissions:(0,l.computed)((function(){return n.permissions})),fetchPostsQuery:B,isPostsLoading:M,isAuthoring:R,isStandaloneRenderer:D,isSocialOnlyForPayingUsers:F,mainView:x,members:O,posts:u,postsSortBy:P,searchTerm:E,selectedChannel:N,selectedChannelId:y,selectedChannelType:T,isStandaloneChannel:G,getStandaloneChannelContext:V,loadUserCourses:se,prependPost:q,replacePost:function(e){u.value[e.id]?u.value[e.id]=e:console.error("Post with id ".concat(e.id," not found"))},updateComment:function(e,n){var t=u.value[e];if(t){var r=t.comments.findIndex((function(e){return e.comment_id===n.comment_id}));r<0?console.error("Comment with id ".concat(n.id," not found")):t.comments.splice(r,1,n)}else console.error("Post with id ".concat(e," not found"))},setSearchTerm:K,deleteComment:function(e,n){return de.apply(this,arguments)},deletePostById:function(e){return ce.apply(this,arguments)},fetchPostById:function(e){return le.apply(this,arguments)},fetchPosts:ae,getUserData:function(e){return pe.apply(this,arguments)},loadCommunityData:function(){return ue.apply(this,arguments)},selectChannel:function(e){return he.apply(this,arguments)},selectContext:function(e){return me.apply(this,arguments)},setMainView:Y,setPosts:W,setChannelId:J,setContext:$,setCourses:ee,setIsAuthoring:function(e){R.value=e},setIsStandaloneRenderer:function(e){D.value=e},setSortingAndLoadPosts:function(e){return _e.apply(this,arguments)},setPostsSaveContext:X,setPostsContextAndLoadPosts:function(e,n,t){return we.apply(this,arguments)},setStandaloneChannelContext:function(e){L.value=e},togglePinPost:function(e){return ge.apply(this,arguments)},updatePostProperties:z,setAggregatedPostQuery:function(e){U.value=e}}}))}}]);