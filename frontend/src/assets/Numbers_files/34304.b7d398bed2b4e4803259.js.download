"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[34304],{1812:(t,e,n)=>{n.d(e,{Z:()=>a});var o=n(15861),i=n(64687),s=n.n(i),r=n(70538),a=function(t,e,n){var i=(0,r.ref)(t),a=(0,r.ref)(!1),l=function(){var t=(0,o.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.value){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,n(i.value);case 4:return(e=t.sent).length||(a.value=!0),i.value+=e.length,t.abrupt("return",e);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{offset:i,isFinished:a,loadMore:l,resetPagination:function(){i.value=0,a.value=!1}}}},15332:(t,e,n)=>{n.d(e,{_q:()=>r,a9:()=>a,cc:()=>l,uR:()=>c});var o=n(93433),i=(n(26699),n(32023),n(26833),n(21703),n(96647),n(74916),n(4723),n(92222),n(47042),n(15306),n(79753),n(4950)),s=n(93949);function r(t,e,n,o){if(!t||!Object.values(i.UA).includes(e))throw new Error("Wrong data given.");var s={location:t,type:e,title:n,size:o};return e===i.UA.FILE&&(s.avStatus=i.sy.AWAITING_SCAN),s}var a=function(t){var e=null==t?void 0:t.match(/(youtu.*be.*)\/(watch\?v=|embed\/|v|shorts|)(.*?((?=[&#?])|$))/);return null==e?void 0:e[3]},l=function(t){if(!t||!t.length)return[];var e=t.length;return e<=i.Rz?t:[].concat((0,o.Z)(t.slice(0,i.Rz-1)),[{username:window.LWTranslate.get("social.and_x_more_likes_upvotes").replace("{X}",e-i.Rz),id:(0,s.D1)()}])},c=function(t){if(!t)throw new Error("No data for post provided");var e=window.location.protocol+(window.clientURL||window.top.clientURL);if(t.context&&Array.isArray(t.context)&&5===t.context.length&&"path"===t.context[4]){var n="".concat(e,"/path-player"),o={courseid:t.context[1],unit:"".concat(t.context[3],"Unit"),post_id:t.id};return(0,s.bW)(n,o)}if(t.standalone_context&&t.group_id){var i="".concat(e,"/path-player"),r={courseid:t.standalone_context.courseTitleId,unit:"".concat(t.standalone_context.unitId,"Unit"),standaloneChannelComponentId:t.standalone_context.componentId,postInStandaloneChannel:t.id};return(0,s.bW)(i,r)}return t.id?"".concat(e,"/social/post/").concat(t.id):"".concat(e,"/social")}},70951:(t,e,n)=>{n.d(e,{Z:()=>i});const o={name:"UserNoTranslate"};const i=(0,n(51900).Z)(o,(function(){return(0,this._self._c)("span",{staticClass:"weglot-exclude"},[this._t("default")],2)}),[],!1,null,"338c726e",null).exports},8350:(t,e,n)=>{n.d(e,{Z:()=>i});const o={name:"AudioAttachment",extends:n(81635).Z};const i=(0,n(51900).Z)(o,(function(){var t=this,e=t._self._c;return t.fileUnlocked&&t.unlockedFileSource?e("div",{staticClass:"audio-attachment",class:{loading:t.file.isLoading}},[e("audio",{ref:"player",attrs:{src:t.unlockedFileSource,preload:"metadata",controlsList:"nodownload",controls:""},on:{play:t.handleMediaPlay}}),t._v(" "),t.hasRemoveButton?e("button",{staticClass:"remove-attachment-button p-0",on:{click:t.removeAttachment}},[e("span",{staticClass:"fas fa-times"})]):t._e()]):t._e()}),[],!1,null,null,null).exports},61473:(t,e,n)=>{n.d(e,{Z:()=>l});n(24812);var o=n(34630),i=n(88541),s=n(93949),r=n(4950);const a={name:"FileAttachment",components:{ImageSvg:o.Z},inject:{providedAuthorId:{default:""}},props:{file:{type:Object,required:!0},hasRemoveButton:{type:Boolean,default:!1},hasActions:{type:Boolean,default:!1}},computed:{fileIcon:function(){var t;return null!==(t={doc:"MediaTypeDOCIcon",docx:"MediaTypeDOCXIcon",pdf:"MediaTypePDFIcon",rar:"MediaTypeRARIcon",xsl:"MediaTypeXSLIcon",xslx:"MediaTypeXSLIcon",zip:"MediaTypeZIPIcon"}[this.fileExtension])&&void 0!==t?t:""},fileName:function(){return this.file.title},fileSize:function(){return this.file.size?(0,s.gB)(this.file.size,2):""},fileExtension:function(){return this.fileName.split(".").pop()},fileLocation:function(){var t;return null!==(t=this.file.location)&&void 0!==t?t:""},fileAvStatus:function(){var t;return this.file.uppyId?r.sy.SAFE:null!==(t=this.file.avStatus)&&void 0!==t?t:r.sy.AWAITING_SCAN},viewAsAuthor:function(){var t;return this.providedAuthorId&&(null===(t=window.me)||void 0===t?void 0:t.id)&&this.providedAuthorId===window.me.id},showAttachment:function(){return this.hasRemoveButton||this.viewAsAuthor||this.fileAvStatus===r.sy.SAFE}},methods:{viewFile:function(){this.fileLocation?window.isMobile("app")?i.Z.downloadFileAndNameIt(this.fileLocation,this.fileName):(0,s.$3)(i.Z.unlockFile.bind(null,this.fileLocation)):console.error("Data missing")},removeAttachment:function(){this.$emit("remove-attachment",this.file)}}};const l=(0,n(51900).Z)(a,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showAttachment,expression:"showAttachment"}],staticClass:"file-item flex",class:{loading:t.file.isLoading},attrs:{title:t.fileName}},[e("ImageSvg",{staticClass:"fsh-0",staticStyle:{"border-radius":"6px"},attrs:{name:t.fileIcon}}),t._v(" "),e("div",{staticClass:"file-details ov-hidden"},[e("div",{staticClass:"file-title ellipsis learnworlds-main-text-small bold"},[t._v(t._s(t.fileName))]),t._v(" "),e("div",{staticClass:"flex j-c-sb a-i-c"},[e("div",{staticClass:"file-size learnworlds-main-text-very-small"},[t._v(t._s(t.fileSize))])])]),t._v(" "),t.hasRemoveButton?e("button",{staticClass:"remove-attachment-button p-0",on:{click:t.removeAttachment}},[e("span",{staticClass:"fas fa-times"})]):t._e(),t._v(" "),t.hasActions?e("button",{staticClass:"file-actions-overlay cursor-pointer",on:{click:t.viewFile}}):t._e()],1)}),[],!1,null,null,null).exports},91882:(t,e,n)=>{n.d(e,{Z:()=>l});n(66992),n(41539),n(88674),n(78783),n(33948),n(57327),n(21249),n(92222),n(24812);var o=n(93949),i=n(88541);const s={name:"ImageAttachment",components:{ImageSvg:n(34630).Z},props:{image:{type:Object,required:!0},hasLightbox:{type:Boolean,default:!1},canBeDownloaded:{type:Boolean,default:!1},hasRemoveButton:{type:Boolean,default:!1},isSingleImage:{type:Boolean,default:!1}},data:function(){return{browserLoadedImage:!1}},computed:{filePath:function(){return this.image.location},thumbnailUrl:function(){if(this.image.previewObjectUrl)return this.image.previewObjectUrl;if(this.filePath){var t=(0,o.RX)({client_id:this.$lw.lwClient,folder:"social",width:600,height:600}),e="/"!==this.filePath[0]?"/":"";return"".concat(this.$lw.fileServer,"imagefile").concat(e).concat(this.filePath,"?").concat(t)}},imageStyles:function(){return this.isSingleImage?{width:"auto",height:"auto"}:{width:"auto",height:"140px"}},showActionButtons:function(){return this.browserLoadedImage&&(this.hasLightbox||this.canBeDownloaded)}},methods:{onImageLoad:function(){this.browserLoadedImage=!0},downloadFile:function(){this.filePath&&(0,o.$3)(i.Z.fetchPublicFile.bind(null,this.filePath))},showLightbox:function(){this.$emit("show-lightbox")},removeAttachment:function(){this.$emit("remove-image")}}};var r=n(51900);const a={name:"ImageGallery",components:{ImageAttachment:(0,r.Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"image-gallery-item",class:{loading:t.image.isLoading}},[e("img",{style:t.imageStyles,attrs:{src:t.thumbnailUrl,alt:""},on:{"~load":function(e){return t.onImageLoad.apply(null,arguments)}}}),t._v(" "),t.hasRemoveButton&&t.browserLoadedImage?e("button",{staticClass:"remove-attachment-button p-0",on:{click:t.removeAttachment}},[e("span",{staticClass:"fas fa-times"})]):t._e(),t._v(" "),t.showActionButtons?e("div",{staticClass:"image-actions-overlay flex a-i-c j-c-c"},[t.canBeDownloaded?e("button",{staticClass:"m-5 p-0 cursor-pointer",on:{click:t.downloadFile}},[e("ImageSvg",{staticClass:"block",attrs:{name:"DownloadIcon"}})],1):t._e(),t._v(" "),t.hasLightbox?e("button",{staticClass:"m-5 p-0 cursor-pointer",on:{click:t.showLightbox}},[e("ImageSvg",{staticClass:"block",attrs:{name:"ArrowsExpandIcon"}})],1):t._e()]):t._e()])}),[],!1,null,"76f03038",null).exports,FsLightbox:function(){return n.e(80484).then(n.t.bind(n,28256,23))}},props:{images:{type:Array,default:function(){return[]}},lightboxEnabled:{type:Boolean,default:!1},downloadingAllowed:{type:Boolean,default:!1},hasRemoveButton:{type:Boolean,default:!1}},data:function(){return{lightboxToggler:!1,lightboxIndex:0}},computed:{hasImages:function(){return this.images.length>0},hasSingleImage:function(){return 1===this.images.length},lightboxSources:function(){var t=this;return this.images.map((function(e){if(!e.location)return"";var n=e.location,i="/"!==n[0]?"/":"",s=(0,o.RX)({client_id:t.$lw.lwClient,folder:"social",width:1e3,height:1e3});return"".concat(t.$lw.fileServer,"imagefile").concat(i).concat(n,"?").concat(s)})).filter((function(t){return t}))}},methods:{showLightbox:function(t){this.lightboxToggler=!this.lightboxToggler,this.lightboxIndex=t},removeAttachment:function(t){this.$emit("remove-attachment",this.images[t])}}};const l=(0,r.Z)(a,(function(){var t=this,e=t._self._c;return t.hasImages?e("div",{staticClass:"post-image-gallery"},[e("div",{staticClass:"images-wrapper flex flex-wrap gap-10"},t._l(t.images,(function(n,o){var i;return e("image-attachment",{key:null!==(i=n.location)&&void 0!==i?i:n.uppyId,attrs:{image:n,"has-lightbox":t.lightboxEnabled,"has-remove-button":t.hasRemoveButton,"is-single-image":t.hasSingleImage},on:{"remove-image":function(e){return t.removeAttachment(o)},"show-lightbox":function(e){return t.showLightbox(o)}}})})),1),t._v(" "),e("portal",{attrs:{to:"fs-lightbox-portal"}},[t.lightboxEnabled?e("fs-lightbox",{attrs:{"source-index":t.lightboxIndex,toggler:t.lightboxToggler,sources:t.lightboxSources,exitFullscreenOnClose:!0,type:"image"},nativeOn:{click:function(t){t.stopPropagation(),t.preventDefault()}}}):t._e()],1)],1):t._e()}),[],!1,null,null,null).exports},81635:(t,e,n)=>{n.d(e,{Z:()=>c});var o=n(15861),i=(n(3843),n(83710),n(64687)),s=n.n(i),r=n(88541),a=n(29225);const l={name:"VideoAttachment",props:{file:{type:Object,required:!0},hasRemoveButton:{type:Boolean,default:!1}},data:function(){return{unlockedFileSource:"",fileUnlocked:!1,unlockedTime:null}},created:function(){var t=this;return(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unlockFile();case 2:t.unlockedFileSource=e.sent,t.fileUnlocked=!0;case 4:case"end":return e.stop()}}),e)})))()},methods:{unlockFile:function(){var t=this;return(0,o.Z)(s().mark((function e(){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.file.previewObjectUrl){e.next=2;break}return e.abrupt("return",t.file.previewObjectUrl);case 2:return n="",e.next=5,(0,a.B)(r.Z.unlockFile(t.file.location));case 5:return(o=e.sent).isOK&&o.data.redirectUrl&&(t.unlockedTime=Date.now()/1e3,n=o.data.redirectUrl),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))()},handleMediaPlay:function(){var t=this;return(0,o.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.file.previewObjectUrl){e.next=2;break}return e.abrupt("return");case 2:if(!(Date.now()/1e3-t.unlockedTime<600)){e.next=5;break}return e.abrupt("return");case 5:return n=t.$refs.player.currentTime,t.$refs.player.pause(),e.next=9,t.unlockFile();case 9:t.unlockedFileSource=e.sent,t.$nextTick((function(){t.$refs.player.currentTime=n,t.$refs.player.play()}));case 11:case"end":return e.stop()}}),e)})))()},removeAttachment:function(){this.$emit("remove-attachment",this.file)}}};const c=(0,n(51900).Z)(l,(function(){var t=this,e=t._self._c;return t.fileUnlocked&&t.unlockedFileSource?e("div",{staticClass:"video-attachment",class:{loading:t.file.isLoading}},[e("video",{ref:"player",staticStyle:{"max-width":"100%"},attrs:{src:t.unlockedFileSource,width:"600",preload:"metadata",controlsList:"nodownload",controls:"",playsinline:""},on:{play:t.handleMediaPlay}}),t._v(" "),t.hasRemoveButton?e("button",{staticClass:"remove-attachment-button p-0",on:{click:t.removeAttachment}},[e("span",{staticClass:"fas fa-times"})]):t._e()]):t._e()}),[],!1,null,null,null).exports},45070:(t,e,n)=>{n.d(e,{Z:()=>M});n(47941),n(82526),n(38880),n(49337),n(33321),n(69070);var o=n(4942),i=n(15861),s=n(93433),r=n(64687),a=n.n(r),l=(n(92222),n(57327),n(41539),n(26699),n(91038),n(78783),n(89554),n(54747),n(68309),n(32023),n(66992),n(33948),n(60285),n(41637),n(57658),n(26833),n(34553),n(40561),n(21249),n(88674),n(21703),n(96647),n(82772),n(69826),n(74916),n(15306),n(69600),n(4950)),c=n(91882),u=n(49429),d=n.n(u),m=n(98978),p=n.n(m),h=n(61473),f=n(88541),v=n(93949),g=n(15332),b=n(81635),_=n(8350);const w={name:"ErrorMessage",props:{error:{type:Object,required:!0}},methods:{clearError:function(){this.$emit("remove-error",this.error.id)}}};var y=n(51900);const x=(0,y.Z)(w,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"attachment-error"},[e("button",{staticClass:"remove-error-button p-5 cursor-pointer",on:{click:t.clearError}},[e("span",{staticClass:"fas fa-times lw-error-text"})]),t._v(" "),e("div",{staticClass:"learnworlds-main-text learnworlds-main-text-very-small learnworlds-element lw-error-text"},[e("strong",[t._v(t._s(t.error.title))])]),t._v(" "),e("div",{staticClass:"learnworlds-main-text learnworlds-main-text-very-small learnworlds-element lw-error-text"},[t._v("\n        "+t._s(t.error.message)+"\n    ")])])}),[],!1,null,null,null).exports;function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=["image/bmp","image/gif","image/jpeg","image/png"],O=["video/webm","video/mp4"],S=["audio/webm","audio/mpeg","audio/ogg"],I=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/vnd.rar"],A=20*Math.pow(1024,2);const E={name:"PostAttachmentsEditor",components:{ErrorMessage:x,AudioAttachment:_.Z,VideoAttachment:b.Z,FileAttachment:h.Z,ImageGallery:c.Z},props:{postAttachments:{type:Array,default:function(){return[]}},canUploadImages:{type:Boolean,default:!1},canUploadFiles:{type:Boolean,default:!1},canUploadVideos:{type:Boolean,default:!1}},data:function(){return{localAttachments:[],uppy:null,uploadType:null,addedFileInputEventListener:!1,errors:[],filesPreparing:[]}},computed:{inputMultipleEnabled:function(){return this.uploadType===l.Xe.IMAGE&&this.imageAttachments.length<l.ar-1},validFileTypes:function(){if(this.uploadType===l.Xe.IMAGE)return P;var t=[];return this.canUploadFiles&&(t=[].concat((0,s.Z)(t),I,S)),this.canUploadVideos&&(t=[].concat((0,s.Z)(t),O)),t},mediaUploadFolder:function(){return this.uploadType===l.Xe.IMAGE?l.qC.PUBLIC:l.qC.PRIVATE},imageAttachments:function(){return this.allAttachments.filter((function(t){return t.type===l.UA.IMAGE}))},videoAttachments:function(){return this.allAttachments.filter((function(t){return t.type===l.UA.VIDEO}))},fileAttachments:function(){return this.allAttachments.filter((function(t){return t.type===l.UA.FILE}))},audioAttachments:function(){return this.allAttachments.filter((function(t){return t.type===l.UA.AUDIO}))},uppyRestrictions:function(){return{maxFileSize:A,maxNumberOfFiles:this.uploadType===l.Xe.IMAGE?l.ar-this.postImageAttachmentsCount:l.fd-this.postFileAttachmentsCount,allowedFileTypes:this.validFileTypes}},allAttachments:function(){return[].concat((0,s.Z)(this.postAttachments),(0,s.Z)(this.localAttachments))},postImageAttachmentsCount:function(){return this.postAttachments.filter((function(t){return t.type===l.UA.IMAGE})).length},postFileAttachmentsCount:function(){return this.postAttachments.length-this.postImageAttachmentsCount}},watch:{uploadType:function(){this.clearAttachments()},localAttachments:function(){this.$emit("editor-attachments-updated",this.localAttachments)},filesPreparing:function(){this.$emit("editor-files-preparing",this.filesPreparing.length>0)}},beforeDestroy:function(){this.addedFileInputEventListener&&this.$refs.fileInput.removeEventListener("change",this.onFileInputChange)},methods:{getAttachmentTypeForFileType:function(t){return P.includes(t)?l.UA.IMAGE:I.includes(t)?l.UA.FILE:O.includes(t)?l.UA.VIDEO:S.includes(t)?l.UA.AUDIO:void 0},onFileInputChange:function(){var t,e,n=this,o=Array.from(null!==(t=null===(e=this.$refs.fileInput)||void 0===e?void 0:e.files)&&void 0!==t?t:[]);o.length<1||o.forEach((function(t){try{var e=n.uppy.addFile({name:t.name,type:t.type,data:t}),o=n.getAttachmentTypeForFileType(t.type),i={title:t.name,size:t.size,type:o,uppyId:e,isLoading:!0};[l.UA.IMAGE,l.UA.VIDEO,l.UA.AUDIO].includes(o)&&(i.previewObjectUrl=URL.createObjectURL(t)),n.localAttachments.push(i)}catch(e){var s=n.getTranslatedErrorFromUppyMessage(e.message,t.name);s.title&&s.message&&(s.id=(0,v.D1)("error_"),n.errors.push(s))}}))},clearAttachments:function(){var t;this.localAttachments=[],this.resetInput(),null===(t=this.uppy)||void 0===t||t.reset()},triggerFileInput:function(t){var e=this;this.inputShouldBeTriggeredForType(t)&&(this.addedFileInputEventListener||(this.$refs.fileInput.addEventListener("change",this.onFileInputChange),this.addedFileInputEventListener=!0),this.uploadType=t,this.clearErrors(),this.$nextTick((function(){e.initUppy(),e.resetInput(),e.$refs.fileInput.click()})))},inputShouldBeTriggeredForType:function(t){return!!Object.values(l.Xe).includes(t)&&(t===l.Xe.IMAGE?this.canUploadImages:t===l.Xe.FILE?this.canUploadFiles||this.canUploadVideos:void 0)},resetInput:function(){this.$refs.fileInput.value=null},removeAttachment:function(t){if(t.uppyId){var e=this.localAttachments.findIndex((function(e){return e.uppyId===t.uppyId}));e<0?console.error("file to remove was not found"):(this.uppy.removeFile(this.localAttachments[e].uppyId),this.localAttachments.splice(e,1))}else this.$emit("remove-attachment",t)},startFileUploading:function(){var t=this;return(0,i.Z)(a().mark((function e(){var n,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(n=t.uppy)||void 0===n?void 0:n.getFiles().length)>0)){e.next=7;break}return e.next=3,t.uppy.upload();case 3:return o=e.sent,i=o.successful.map((function(e){return(0,g._q)("".concat(t.mediaUploadFolder,"/").concat(e.name),t.getAttachmentTypeForFileType(e.data.type),e.originalName,e.size)})),s=t.localAttachments.filter((function(t){return!t.uppyId})),e.abrupt("return",{files:s.concat(i)});case 7:return e.abrupt("return",Promise.resolve({files:[]}));case 8:case"end":return e.stop()}}),e)})))()},initUppy:function(){this.uppy?this.uppy.setOptions({restrictions:this.uppyRestrictions}):(this.createUppyInstance(),this.setUppyEvents())},createUppyInstance:function(){this.uppy||(this.uppy=new(d())({autoProceed:!1,restrictions:this.uppyRestrictions,logger:{debug:function(){},warn:function(){},error:function(){}}}).use(p(),{limit:5,timeout:6e5,formData:!1,fieldName:"file",method:"put",headers:{"x-ms-blob-type":"BlockBlob"},validateStatus:function(t,e,n){return[200,201].includes(t)&&"Created"===n.statusText},getResponseError:function(t){try{var e=JSON.parse(t),n="";return e.errors&&e.errors.forEach((function(t){n+="".concat(t.message," \n")})),new Error(n)}catch(t){return new Error("Something went wrong")}}}))},prepareFileForUpload:function(t){var e=this;return(0,i.Z)(a().mark((function n(){var o,i,s,r,l;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.uppy.getFile(t),i={name:o.name,size:o.size,type:o.type},n.prev=2,e.filesPreparing.push(t),n.next=6,(0,v.Eh)(f.Z.getFileUploadPreflightInfo(e.mediaUploadFolder,i));case 6:r=n.sent,e.filesPreparing.splice(e.filesPreparing.indexOf(t),1),e.uppy.setFileState(t,{originalName:o.name,name:r.data.name,xhrUpload:k(k({},o.xhrUpload),{},{endpoint:r.data.url,headers:k(k({},null===(s=o.xhrUpload)||void 0===s?void 0:s.headers),{},{"Content-Type":o.type,"X-File-Name":encodeURIComponent(o.name),"X-File-Type":o.type,"X-File-Size":o.size,"x-ms-blob-type":"BlockBlob"})})}),(l=e.localAttachments.find((function(e){return e.uppyId===t})))&&(l.isLoading=!1),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(2);case 15:case"end":return n.stop()}}),n,null,[[2,13]])})))()},setUppyEvents:function(){var t=this;this.uppy.on("file-added",function(){var e=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.prepareFileForUpload(n.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getTranslatedErrorFromUppyMessage:function(t,e){if(t){var n={title:"",message:""};if(t.includes("You can only upload:"))n.title=this.i18n.get("social.unsupported_format_error_title"),n.message=this.i18n.get("social.unsupported_format_error_description").replace("{X}",e).replace("{Y}",this.validFileTypes.join(", "));else if(t.includes("You can only upload"))n.title=this.i18n.get("social.max_file_number_error_title"),n.message=this.i18n.get("social.max_file_number_error_description").replace("{X}",e);else if(t.includes("exceeds maximum allowed size of")){var o=(0,v.gB)(A,0);n.title=this.i18n.get("social.max_file_size_error_title"),n.message=this.i18n.get("social.max_file_size_error_description").replace("{X}",e).replace("{Y}","".concat(o))}return n}},clearErrors:function(){this.errors=[]},removeError:function(t){var e=this.errors.findIndex((function(e){return e.id===t}));e>=0&&this.errors.splice(e,1)}}};const M=(0,y.Z)(E,(function(){var t=this,e=t._self._c;return e("div",[e("input",{ref:"fileInput",staticClass:"h-0 social-file-upload",attrs:{type:"file",accept:t.validFileTypes,multiple:t.inputMultipleEnabled}}),t._v(" "),t.allAttachments.length>0?e("div",{staticClass:"p-5"},[t.imageAttachments.length>0?e("image-gallery",{attrs:{"lightbox-enabled":!1,"downloading-allowed":!1,"has-remove-button":!0,images:t.imageAttachments},on:{"remove-attachment":t.removeAttachment}}):t._e(),t._v(" "),t.fileAttachments.length>0?e("div",{staticClass:"flex flex-wrap mt-10 mb-10 gap-10"},t._l(t.fileAttachments,(function(n){return e("file-attachment",{key:n.uppyId,attrs:{file:n,"has-remove-button":!0},on:{"remove-attachment":t.removeAttachment}})})),1):t._e(),t._v(" "),t.videoAttachments.length>0?e("div",{staticClass:"flex flex-wrap mt-10 mb-10 gap-10"},t._l(t.videoAttachments,(function(n){return e("video-attachment",{key:n.uppyId,attrs:{file:n,"has-remove-button":!0},on:{"remove-attachment":t.removeAttachment}})})),1):t._e(),t._v(" "),t.audioAttachments.length>0?e("div",{staticClass:"flex flex-wrap mt-10 mb-10 gap-10"},t._l(t.audioAttachments,(function(n){return e("audio-attachment",{key:n.uppyId,attrs:{file:n,"has-remove-button":!0},on:{"remove-attachment":t.removeAttachment}})})),1):t._e()],1):t._e(),t._v(" "),t._l(t.errors,(function(n){return e("error-message",{key:n.id,attrs:{error:n},on:{"remove-error":t.removeError}})}))],2)}),[],!1,null,"c14ec5c0",null).exports},68153:(t,e,n)=>{n.d(e,{Z:()=>r});n(92222);var o=n(70538),i=n(34630);const s=(0,o.defineComponent)({name:"SocialContextMenu",components:{ImageSvg:i.Z},props:{context:{required:!0,type:Object},menuItems:{required:!0,type:Array}},methods:{isHidden:function(t){return"function"==typeof t.isHidden&&t.isHidden(this.context)}}});const r=(0,n(51900).Z)(s,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"lw-author-context-menu lw-body-bg"},[t._l(t.menuItems,(function(n,o){return e("ul",{key:o,staticClass:"lw-author-context-menu-list"},[t._l(n,(function(n,i){return[t.isHidden(n)?t._e():e("li",{key:"".concat(o,"-").concat(i),staticClass:"lw-author-context-menu-list-item"},[e("button",{staticClass:"flex a-i-c cursor-pointer lw-body-bg w-full gap-4 p-0-8",class:n.classModifier,attrs:{disabled:n.isDisabled(t.context)},on:{click:function(e){return e.stopPropagation(),n.callback(t.context)}}},[e("image-svg",{staticClass:"fsh-0 w-16",attrs:{name:n.icon}}),t._v(" "),e("span",{staticClass:"learnworlds-main-text-very-small"},[t._v(t._s(n.title))])],1)])]}))],2)})),t._v(" "),t.hasSlot("footer")?e("div",{staticClass:"bt-1px-lightGray p-10 lw-author-context-menu__footer lbl-very-small lbl-gray"},[t._t("footer")],2):t._e()],2)}),[],!1,null,"65325dc6",null).exports},2216:(t,e,n)=>{n.d(e,{Z:()=>d});var o=n(34630),i=n(82249);const s={name:"SocialEmojiPicker",components:{ImageSvg:o.Z},extends:i.Z,props:{isUsingRtl:{type:Boolean,default:!1}}};var r=n(51900);const a=(0,r.Z)(s,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeEmojiPicker,expression:"closeEmojiPicker"}]},[e("ImageSvg",{attrs:{name:"EmojiPickerIcon"},on:{click:function(e){return e.preventDefault(),t.toggleEmojiPicker.apply(null,arguments)}}}),t._v(" "),t.showPicker?e("div",{staticClass:"emoji-picker-wrapper",class:{rtl:t.isUsingRtl}},[e("v-emoji-picker",{attrs:{"continuous-list":!0},on:{select:function(e){return t.selectEmoji(e.data)}}})],1):t._e()],1)}),[],!1,null,null,null).exports;var l=n(4950),c=n(93949);const u={name:"SocialBasicEditorTools",components:{SocialEmojiPicker:a,ImageSvg:o.Z},props:{contextType:{type:String,default:"post",required:!0},imageUploadDisabled:{type:Boolean,default:!1},fileUploadDisabled:{type:Boolean,default:!1},hasImageUploadButton:{type:Boolean,default:!0},hasFileUploadButton:{type:Boolean,default:!0},hasMentionsButton:{type:Boolean,default:!0},isFormattingToggled:{type:Boolean,default:!1}},data:function(){return{isUsingRtl:(0,c.Pz)(),SOCIAL_EDITOR_CONTEXT_TYPE:l.AI}},methods:{triggerImageUpload:function(){this.$emit("upload-file",l.Xe.IMAGE)},triggerFileUpload:function(){this.$emit("upload-file",l.Xe.FILE)},addEmoji:function(t){this.$emit("emoji-selected",t)},handleMentionClick:function(){this.$emit("add-mention")},handleFormattingClick:function(){this.$emit("toggle-formatting-bar")}}};const d=(0,r.Z)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-tools-container flex a-i-c"},[e("div",{staticClass:"post-editor-formatting post-editor-tools-icon-container hide-sm",on:{click:t.handleFormattingClick}},[e("div",{staticClass:"post-editor-tools-icon social-state-btn",class:{active:t.isFormattingToggled}},[e("ImageSvg",{attrs:{name:"TextFormat"}}),t._v(" "),e("span",{staticClass:"post-editor-icon-tooltip learnworlds-main-text-very-small",class:{"to-right":t.contextType===t.SOCIAL_EDITOR_CONTEXT_TYPE.POST&&!t.isUsingRtl,"to-left":t.isUsingRtl}},[t._v("\n                  "+t._s(t.i18n.get("social.toggle_formatting_bar"))+"\n              ")])],1)]),t._v(" "),e("div",{staticClass:"post-editor-emoji-picker post-editor-tools-icon-container hide-sm"},[e("div",{staticClass:"post-editor-tools-icon"},[e("SocialEmojiPicker",{attrs:{"is-using-rtl":t.isUsingRtl},on:{"emoji-selected":t.addEmoji}}),t._v(" "),e("span",{staticClass:"post-editor-icon-tooltip learnworlds-main-text-very-small",class:{"to-right":t.contextType===t.SOCIAL_EDITOR_CONTEXT_TYPE.POST&&!t.isUsingRtl,"to-left":t.isUsingRtl}},[t._v("\n                  "+t._s(t.i18n.get("social.insert_emoji"))+"\n              ")])],1)]),t._v(" "),t.hasMentionsButton?e("div",{staticClass:"post-editor-member-mention post-editor-tools-icon-container",on:{click:t.handleMentionClick}},[e("div",{staticClass:"post-editor-tools-icon"},[e("ImageSvg",{attrs:{name:"MentionIcon"}}),t._v(" "),e("span",{staticClass:"post-editor-icon-tooltip learnworlds-main-text-very-small",class:{"to-right":t.contextType===t.SOCIAL_EDITOR_CONTEXT_TYPE.POST&&!t.isUsingRtl}},[t._v("\n                  "+t._s(t.i18n.get("social.mention_member"))+"\n              ")])],1)]):t._e(),t._v(" "),t.hasImageUploadButton?e("div",{staticClass:"post-editor-img-upload post-editor-tools-icon-container",class:{disabled:t.imageUploadDisabled},on:{click:t.triggerImageUpload}},[e("div",{staticClass:"post-editor-tools-icon"},[e("ImageSvg",{attrs:{name:"ImageUploadIcon"}}),t._v(" "),e("span",{staticClass:"post-editor-icon-tooltip learnworlds-main-text-very-small"},[t._v(t._s(t.i18n.get("social.attach_photos")))])],1)]):t._e(),t._v(" "),t.hasFileUploadButton?e("div",{staticClass:"post-editor-file-upload post-editor-tools-icon-container",class:{disabled:t.fileUploadDisabled},on:{click:t.triggerFileUpload}},[e("div",{staticClass:"post-editor-tools-icon"},[e("ImageSvg",{attrs:{name:"FileUploadIcon"}}),t._v(" "),e("span",{staticClass:"post-editor-icon-tooltip learnworlds-main-text-very-small"},[t._v(t._s(t.i18n.get("social.attach_file")))])],1)]):t._e(),t._v(" "),t._t("context-actions")],2)}),[],!1,null,null,null).exports},22570:(t,e,n)=>{n.d(e,{Z:()=>q});var o=n(15861),i=n(64687),s=n.n(i),r=(n(68309),n(9653),n(73210),n(74916),n(15306),n(69826),n(41539),n(92222),n(21249),n(57327),n(86535),n(99244),n(26699),n(32023),n(79753),n(89554),n(54747),n(91038),n(78783),n(66992),n(70189),n(33948),n(77601),n(73845)),a=n(45757),l=n(43756),c=n(94198),u=(n(47941),n(82526),n(38880),n(57658),n(49337),n(33321),n(69070),n(29439)),d=n(4942),m=(n(69720),n(21703),n(96647),n(23157),n(30541),n(49899)),p=n(96486),h=n(56249),f=n(70538),v=n(1812),g=function(){},b=n(29225),_=n(28575),w=n(4950),y=n(93949),x=n(63420);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P={name:"SocialMemberOptionList",components:{UserNoTranslate:n(70951).Z,SocialMemberAvatar:m.Z},props:{query:{type:String,required:!0},clientRect:{type:Function,required:!0},command:{type:Function,required:!0},hidden:{type:Boolean},post:{type:Object,default:null}},setup:function(t){var e,n,i,r=(0,f.ref)(0),a=(0,f.ref)(!1),l=(0,f.ref)(null),c=(0,f.toRefs)(t),d=c.query,m=c.clientRect,C=(0,f.ref)([]),P=(0,f.ref)(null),O=(0,f.ref)(null),S=(0,f.computed)((function(){var t,e;return null!==(t=null===(e=l.value)||void 0===e?void 0:e.filter((function(t){return t.id!==window.me.id})))&&void 0!==t?t:[]})),I=(0,x.Jk)((0,_.$)()),A=I.selectedChannelType,E=I.selectedChannel,M=I.isStandaloneChannel,L=I.getStandaloneChannelContext,T=M.value||(null===(e=t.post)||void 0===e?void 0:e.standalone_context),U=A.value===w.i_.USER_GROUP||(null===(n=t.post)||void 0===n?void 0:n.group_id)&&!T,Z=A.value===w.i_.COURSE_DISCUSSION||(null===(i=t.post)||void 0===i?void 0:i.context)||!A.value&&(0,y.RD)(),j=function(){var e=null;if(T){var n,o,i=null===(n=L.value||(null===(o=t.post)||void 0===o?void 0:o.standalone_context))||void 0===n?void 0:n.courseTitleId;e=i?{context:i}:null}else if(Z){var s,r,a;e={context:(null===(s=E.value)||void 0===s?void 0:s.titleId)||(null===(r=t.post)||void 0===r||null===(a=r.context)||void 0===a?void 0:a[1])||(0,y.Rt)()}}else if(U){var l,c;e={id:(null===(l=E.value)||void 0===l?void 0:l.id)||(null===(c=t.post)||void 0===c?void 0:c.group_id)}}return!!e&&f.default.prototype.$lwGates.canUserMentionEveryone(e)},D=function(){var e=null;if(T){var n,o,i=null===(n=L.value||(null===(o=t.post)||void 0===o?void 0:o.standalone_context))||void 0===n?void 0:n.courseTitleId;if(!i)throw new Error("Standalone channel context missing or has no usages.");e={course:i,withInstructors:!0}}else if(Z){var s,r,a;e={course:(null===(s=E.value)||void 0===s?void 0:s.titleId)||(null===(r=t.post)||void 0===r||null===(a=r.context)||void 0===a?void 0:a[1])||(0,y.Rt)(),withInstructors:!0}}else if(U){var l,c;e={group_id:(null===(l=E.value)||void 0===l?void 0:l.id)||(null===(c=t.post)||void 0===c?void 0:c.group_id)}}if(!e)throw new Error("Something went wrong when trying to build user query, current case is not handled properly");return e};function F(t){return B.apply(this,arguments)}function B(){return(B=(0,o.Z)(s().mark((function t(e){var n,o,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.value=!0,t.next=3,(0,b.B)(h.Z.getUsersForMention(k({offset:0,N:10},e)));case 3:if(!(i=t.sent).isBad){t.next=7;break}return a.value=!1,t.abrupt("return",[]);case 7:return a.value=!1,t.abrupt("return",null!==(n=null===(o=i.data)||void 0===o?void 0:o.users)&&void 0!==n?n:[]);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var $=(0,v.Z)(0,10,function(){var t=(0,o.Z)(s().mark((function t(e){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={offset:e,N:10},d.value&&(n.searchU=d.value),t.abrupt("return",F(k(k({},n),D())));case 6:return t.prev=6,t.t0=t.catch(0),console.log("Error on users search: ".concat(t.t0.message)),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()),R=$.isFinished,N=$.loadMore,V=$.resetPagination,H=function(t,e,n){var o=g,i=(0,f.watchEffect)((function(){if(o(),t.value){var i=new IntersectionObserver((function(o){var i=(0,u.Z)(o,1)[0].isIntersecting,s=Math.abs(Math.floor(t.value.getBoundingClientRect().bottom)-Math.floor(n.value.getBoundingClientRect().bottom))<5;i&&s&&e()}),{root:n.value,threshold:1});i.observe(t.value),o=function(){null==i||i.disconnect()}}}));return{cleanup:function(){i(),o()},disconnectObserver:o}}(O,(0,o.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:e=t.sent,l.value=l.value.concat(e);case 4:case"end":return t.stop()}}),t)}))),P),z=H.cleanup,q=H.disconnectObserver,X=(0,f.computed)((function(){var t="v3"===window.getMobileClientVersion()||window.isMobile(),e=m.value(),n=window.innerHeight-e.bottom<150&&e.top>150;return{left:t?"50%":"".concat(e.left,"px"),bottom:n?"".concat(window.innerHeight-e.top+e.height,"px"):"50px",top:n?"auto":"".concat(e.bottom+e.height,"px"),width:t?"90%":"400px",transform:t?"translateX(-50%)":"none"}})),G=(0,p.debounce)((0,o.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.value=0,V(),t.next=4,N();case 4:e=t.sent,j()&&d.value&&window.LWTranslate.get("social.mention_everyone").startsWith(d.value)&&e.unshift({id:w.Lf,username:window.LWTranslate.get("social.mention_everyone"),label:window.LWTranslate.get("social.mention_everyone_label")}),l.value=e;case 7:case"end":return t.stop()}}),t)}))),300);function W(t){var e=r.value+t,n=S.value.length;r.value=(e%n+n)%n}function K(e){var n=S.value[e];n&&t.command({id:n.id,label:n.username})}return(0,f.watch)(d,G),(0,f.watch)(r,(function(t){C.value[t].scrollIntoView({behavior:"smooth",block:"nearest"})})),(0,f.watch)(C,(function(t){var e,n;t&&(O.value=null!==(e=null===(n=P.value)||void 0===n?void 0:n.lastElementChild)&&void 0!==e?e:null)}),{deep:!0}),(0,f.watch)(R,(function(t){t&&q()})),(0,f.onMounted)(G),(0,f.onUnmounted)((function(){z()})),{dialogPosition:X,isLoading:a,items:S,radioList:P,radios:C,selectedIndex:r,closeMentions:function(t){t.target.closest(".post-editor-member-mention")||this.$emit("close-mentions")},getMemberAvatar:function(t){return t===w.Lf?this.$lw.img("/images/svg/mention-all-icon.svg"):this.$lw.getAvatarLink(t)},onKeyDown:function(t){var e=!1;switch(t.event.key){case"ArrowUp":W(-1),e=!0;break;case"ArrowDown":W(1),e=!0;break;case"Enter":K(r.value),e=!0;break;default:e=!1}return e},selectItem:K,getAvatarExtraClasses:function(t){return t===w.Lf?"pt-3 social-internal-avatar-img":""}}}},O=function(){(0,f.useCssVars)((function(t,e){return{"045d02ad":t.dialogPosition.left,b5651c22:t.dialogPosition.top,"50a9eb51":t.dialogPosition.bottom,f03fc040:t.dialogPosition.width,c9f47ef4:t.dialogPosition.transform}}))},S=P.setup;P.setup=S?function(t,e){return O(),S(t,e)}:O;const I=P;var A=n(51900);const E=(0,A.Z)(I,(function(){var t,e=this,n=e._self._c;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeMentions,expression:"closeMentions"},{name:"show",rawName:"v-show",value:!e.hidden&&((null===(t=e.items)||void 0===t?void 0:t.length)||!e.items&&!e.query),expression:"!hidden && (items?.length || (!items && !query))"}],staticClass:"text-dialog"},[n("transition",{attrs:{name:"delayed"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"loader-container"},[n("span",{staticClass:"loader"})])]),e._v(" "),n("div",{ref:"radioList",staticClass:"social-member-option-list"},e._l(e.items,(function(t,o){var i;return n("label",{key:o,ref:"radios",refInFor:!0,staticClass:"social-member-option-item lw-body-bg",class:{selected:o===e.selectedIndex},attrs:{for:t.id}},[n("input",{attrs:{type:"radio",id:t.id,name:"item"},domProps:{value:o},on:{click:function(t){return e.selectItem(o)}}}),e._v(" "),n("div",{staticClass:"member--info"},[n("social-member-avatar",{attrs:{avatar:e.getMemberAvatar(t.id),size:"small","active-indicator":!1,"extra-classes":e.getAvatarExtraClasses(t.id)}}),e._v(" "),n("div",{staticClass:"member-name"},[n("UserNoTranslate",[e._v(e._s(null!==(i=t.label)&&void 0!==i?i:t.username))])],1)],1)])})),0)],1)}),[],!1,null,"7066da8c",null).exports;var M=n(95135);function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U=n(93237),Z=n(76484),j=n(45578),D=n.n(j),F=n(15332);const B={name:"SocialTextFormat",props:{editor:{type:Object,required:!0}},computed:{formattingOptions:function(){var t=this;return[{key:"bold",icon:"".concat(this.$lw.imagePath,"/images/svg/bold.svg"),command:function(){t.editor.chain().toggleBold().focus().run()}},{key:"italic",icon:"".concat(this.$lw.imagePath,"/images/svg/italic.svg"),command:function(){t.editor.chain().toggleItalic().focus().run()}},{key:"strike",icon:"".concat(this.$lw.imagePath,"/images/svg/strikethrough.svg"),command:function(){t.editor.chain().toggleStrike().focus().run()}},{key:"bulletList",icon:"".concat(this.$lw.imagePath,"/images/svg/unordered-list-black.svg"),command:function(){t.editor.chain().toggleBulletList().run()}},{key:"orderedList",icon:"".concat(this.$lw.imagePath,"/images/svg/ordered-list-black.svg"),command:function(){t.editor.chain().toggleOrderedList().run()}}]}},methods:{isFormatActive:function(t){var e;return null===(e=this.editor)||void 0===e?void 0:e.isActive(t)}}};const $=(0,A.Z)(B,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex j-c-fs a-i-c gap-4 mb-10 flex-wrap"},t._l(t.formattingOptions,(function(n){return e("button",{key:n.key,staticClass:"icon-only cursor-pointer social-format-btn",class:{active:t.isFormatActive(n.key)},on:{click:n.command}},[e("img",{staticClass:"social-format-icon",attrs:{src:n.icon}})])})),0)}),[],!1,null,"18d04df4",null).exports;var R=n(2376),N=r.hj.create({name:"characterCount",addOptions:function(){return{limit:null,mode:"textSize",extra:5}},addStorage:function(){return{characters:function(){return 0},words:function(){return 0}}},onBeforeCreate:function(){var t=this;this.storage.characters=function(e){var n=(null==e?void 0:e.node)||t.editor.state.doc;return"textSize"===((null==e?void 0:e.mode)||t.options.mode)?n.textBetween(0,n.content.size,void 0," ").length:n.nodeSize},this.storage.words=function(e){var n=(null==e?void 0:e.node)||t.editor.state.doc;return n.textBetween(0,n.content.size," "," ").split(" ").filter((function(t){return""!==t})).length}},addProseMirrorPlugins:function(){var t=this;return[new R.Sy({key:new R.H$("characterCount"),filterTransaction:function(e,n){if(e.getMeta("preventUpdate"))return!0;var o=t.options,i=o.limit,s=o.extra;if(!e.docChanged||0===i||null==i)return!0;var r=t.storage.characters({node:n.doc}),a=t.storage.characters({node:e.doc});if(a<=i)return!0;if(r>i&&a>i&&a<=r)return!0;if(r>i&&a>i&&a>r)return!1;if(!e.getMeta("paste"))return!1;var l=e.selection.$head.pos,c=l-(a-i),u=l;return e.deleteRange(c,u),!(t.storage.characters({node:e.doc})>i+s)}})]}}),V=c.pf.extend({renderHTML:function(t){var e=t.node,n=t.HTMLAttributes;return["a",(0,r.P1)({"data-type":this.name},{href:"/profile?id=".concat(n["data-id"])},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:e})]}});const H={name:"SocialTextEditor",components:{EditorContent:a.kg,SocialTextFormat:$},props:{value:{type:String,default:""},placeholder:{type:String},withFormattingBar:{type:Boolean,default:!1},maxContentLength:{type:Number},post:{type:Object,default:null}},data:function(){return{editor:null,currentVideoLinks:[],currentRegularLinks:[],contentCharacters:null,showCharactersIndicator:!1,defaultTextEditorDirection:"ltr"}},computed:{editorTrimmedText:function(){return this.editor.getHTML().replace(/<[^>]*>/g,"").trim()},editorHasOneChar:function(){return 1===this.editorTrimmedText.length},editorHasZeroChars:function(){return 0===this.editorTrimmedText.length}},watch:{value:function(t){this.editor.getHTML()===t||(this.editor.commands.setContent(t,!1),this.updateContentCharacters())},"editor.isFocused":{deep:!0,handler:function(t){this.$emit("check-focus",t)}},"editor.isEmpty":{deep:!0,handler:function(t){this.$emit("check-empty",t)}},placeholder:function(t){var e=this.editor.extensionManager.extensions.find((function(t){return"placeholder"===t.name}));e&&(e.options.placeholder=t,this.editor.view.dispatch(this.editor.state.tr))}},mounted:function(){this.defaultTextEditorDirection=(0,y.uH)()||(0,y.Pz)()?"rtl":"ltr",this.setDirection(this.defaultTextEditorDirection),this.initEditor(),this.$nextTick(this.translatePlaceholderIfWeglotActive),this.editor.commands.setContent(this.value,!1)},methods:{initEditor:function(){var t,e,n,o=this;this.editor=new a.ML({extensions:[l.V,V.configure({renderLabel:function(t){var e=t.options,n=t.node;return"".concat(e.suggestion.char).concat(n.attrs.label)},openOnClick:!1,HTMLAttributes:{class:"social-mention"},suggestion:(e=this,n=this.post,{render:function(){var t,o=f.default.extend(E);return{onStart:function(i){(0,M.X)().permissions.canMemberMention&&((t=new o({parent:e,propsData:T(T({},i),{},{post:null!=n?n:null})}).$mount()).$on("close-mentions",(function(){t.$props.hidden=!0})),document.body.prepend(t.$el))},onUpdate:function(e){(0,M.X)().permissions.canMemberMention&&(Object.entries(e).forEach((function(e){var n=(0,u.Z)(e,2),o=n[0],i=n[1];t.$props[o]=i})),t.$props.hidden=!1)},onKeyDown:function(e){if((0,M.X)().permissions.canMemberMention)return"Escape"===e.event.key?(t.$props.hidden=!0,!0):t.onKeyDown(e)},onExit:function(){var e,n;null!==(e=t)&&void 0!==e&&e.$el&&document.body.removeChild(t.$el),null===(n=t)||void 0===n||n.$destroy()}}}})}),U.V.configure({placeholder:this.placeholder,emptyEditorClass:"is-editor-empty"}),Z.r.configure({protocols:["https","http"],autolink:!0,linkOnPaste:!0,openOnClick:!1,HTMLAttributes:{class:"social-link"}}),N.configure({limit:null!==(t=this.maxContentLength)&&void 0!==t?t:null})],onUpdate:function(t){var e=t.editor;o.updateContentCharacters(),o.editorHasOneChar&&o.processTextDirection(e.getHTML()),o.editorHasZeroChars&&o.setDirection(o.defaultTextEditorDirection),o.$emit("input",e.getHTML());var n=e.getJSON().content.flatMap((function(t){return t.content})).filter((function(t){return"mention"===(null==t?void 0:t.type)})).map((function(t){return t.attrs}));o.checkLinks(e),o.$emit("update-mentions",D()(n,"id"))}})},translatePlaceholderIfWeglotActive:function(){var t=this;return(0,o.Z)(s().mark((function e(){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.Weglot||!window.WEGLOT_ACTIVE||t.$lw.isInAuthoringEnvironment){e.next=6;break}return e.next=3,window.Weglot.translate({words:[{t:1,w:t.placeholder}],languageTo:window.Weglot.getCurrentLang()});case 3:n=e.sent,(o=t.editor.extensionManager.extensions.find((function(t){return"placeholder"===t.name})))&&(o.options.placeholder=n,t.editor.view.dispatch(t.editor.state.tr));case 6:case"end":return e.stop()}}),e)})))()},replaceMentionLinksWithNodes:function(){var t=this.editor.getJSON().content,e=function(t){var e,n,o,i,s=null==t||null===(e=t.marks)||void 0===e?void 0:e.find((function(t){return"link"===t.type}));if(s&&null!==(n=s.attrs)&&void 0!==n&&null!==(o=n.class)&&void 0!==o&&o.includes("social-mention"))return{id:(0,y.DP)(s.attrs.href).id,text:null==t||null===(i=t.text)||void 0===i?void 0:i.substring(1)}};!function n(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Array.isArray(o)&&o.forEach((function(o,s){if(o.content){var r=i?"".concat(i,".").concat(s,".content"):"".concat(s,".content");n(o.content,r)}var a=e(o);if(a){var l=i?"".concat(i,".").concat(s):s;(0,y.D5)(t,l,{attrs:{id:a.id,label:a.text},type:"mention"})}}))}(t),this.editor.commands.setContent(t)},insertText:function(t){this.editor.chain().focus().insertContent(t).run()},checkLinks:function(t){var e=t.getJSON().content.flatMap((function(t){return t.content})).filter((function(t){var e;return null==t||null===(e=t.marks)||void 0===e?void 0:e.find((function(t){return"link"===t.type}))})).map((function(t){return t.text})),n=e.filter((function(t){return(0,F.a9)(t)})),o=e.filter((function(t){return!(0,F.a9)(t)})),i=(0,p.difference)(n,this.currentVideoLinks),s=(0,p.difference)(o,this.currentRegularLinks);this.$emit("update-video-links",Array.from(new Set(i))),this.$emit("update-regular-links",Array.from(new Set(s)))},updateContentCharacters:function(){if(this.maxContentLength){var t=this.editor.storage.characterCount.characters();this.contentCharacters=Math.min(t,this.maxContentLength),this.showCharactersIndicator=this.maxContentLength-t<100}else this.showCharactersIndicator=!1},processTextDirection:function(t){var e=t.replace(/<[^>]*>/g,"").trim();if(e){var n=this.isFirstCharRtl(e)?"rtl":"ltr";this.setDirection(n)}},isFirstCharRtl:function(t){return/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF]/.test(t[0])},setDirection:function(t){this.$refs.editorContent.$el.setAttribute("dir",t)}}},z=H;const q=(0,A.Z)(z,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"social-text-editor relative weglot-exclude"},[t.withFormattingBar?e("social-text-format",{staticClass:"lw-bb-1px-fadeout80",attrs:{editor:t.editor}}):t._e(),t._v(" "),e("editor-content",{ref:"editorContent",staticClass:"learnworlds-main-text-small",attrs:{editor:t.editor,"aria-placeholder":t.placeholder}}),t._v(" "),t.showCharactersIndicator?e("div",{staticClass:"learnworlds-main-text-very-small social-text-editor--characters-indicator"},[t._v(" "+t._s(t.contentCharacters)+" / "+t._s(t.maxContentLength)+" ")]):t._e()],1)}),[],!1,null,null,null).exports},23446:(t,e,n)=>{n.d(e,{Z:()=>s});var o=n(93433);n(66992),n(41539),n(33948);const i={name:"SocialLoader",props:{showSorter:{type:Boolean,default:!1}},methods:{range:function(t){return(0,o.Z)(Array(t).keys())}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-d-col"},[t.showSorter?e("div",{staticClass:"sorter-wrapper"},[e("div",{staticClass:"shimmer-effect-social-container sorter-text"}),t._v(" "),e("div",{staticClass:"shimmer-effect-social-container sorter-dropdown"})]):t._e(),t._v(" "),t._l(t.range(3),(function(t){return e("div",{key:t,staticClass:"shimmer-effect-social-container post"})}))],2)}),[],!1,null,"a7d0074a",null).exports},24591:(t,e,n)=>{n.d(e,{Z:()=>r});var o=n(4942),i=n(4950);const s={name:"SocialBackButton",props:{backContext:{type:String,default:i.i_.USER_GROUP}},computed:{backLabelText:function(){var t,e;return null!==(e=(t={},(0,o.Z)(t,i.i_.USER_GROUP,this.i18n.get("social.back_to_space")),(0,o.Z)(t,i.i_.COURSE_DISCUSSION,this.i18n.get("social.back_to_discussion")),(0,o.Z)(t,i.i_.VIDEO,this.i18n.get("social.back_to_video")),t)[this.backContext])&&void 0!==e?e:this.i18n.get("social.back_to_discussion")}}};const r=(0,n(51900).Z)(s,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"social-back-btn cursor-pointer",on:{click:function(e){return t.$emit("click")}}},[e("span",{staticClass:"learnworlds-main-text-small learnworlds-icon fas fa-arrow-left"}),t._v(" "),e("span",{staticClass:"learnworlds-main-text-small"},[t._v(t._s(t.backLabelText))])])}),[],!1,null,null,null).exports},57035:(t,e,n)=>{n.d(e,{Z:()=>i});n(82526),n(41817);const o={name:"SocialLinkEmbed",components:{ImageSvg:n(34630).Z},props:{data:{type:Object,required:!0},editing:{type:Boolean,default:!1}},computed:{url:function(){return this.data.url},title:function(){return this.data.title},description:function(){return this.data.description},image:function(){return this.data.image},hasPreview:function(){return!!this.title||!!this.description||!!this.image},previewImageUrl:function(){var t;return(null===(t=this.image)||void 0===t?void 0:t.url)||"".concat(this.$lw.imagePath,"/author/images/chess-bg.jpg")}},methods:{preventClickWhileEditing:function(t){this.editing&&t.preventDefault()}}};const i=(0,n(51900).Z)(o,(function(){var t=this,e=t._self._c;return t.hasPreview?e("div",{staticClass:"flex a-i-fs b-1px-lightGray br-10px gap-8 p-10 pos-rel social-link-preview m-5-0"},[e("div",{staticClass:"social-link-image-container"},[e("img",{staticClass:"w-full h-full obj-fit-contain light-gray-link social-link-image",attrs:{src:t.previewImageUrl,alt:"link preview"}})]),t._v(" "),e("div",{staticClass:"flex flex-d-col j-c-fs h-full"},[e("a",{staticClass:"learnworlds-main-text-small",attrs:{href:t.url,target:"_blank"},on:{click:t.preventClickWhileEditing}},[t._v(t._s(t.title))]),t._v(" "),e("div",{staticClass:"learnworlds-main-text-small",attrs:{title:t.description}},[t._v(t._s(t.description))])]),t._v(" "),t.editing?e("button",{staticClass:"btn-icon-only social-link-remove-btn",on:{click:function(e){return t.$emit("remove-link")}}},[e("image-svg",{attrs:{name:"CloseIcon",title:"Remove"}})],1):t._e()]):t.data.isLegacy&&t.url?e("div",[e("a",{staticClass:"learnworlds-main-text-small link",attrs:{href:t.url,target:"_blank"},on:{click:t.preventClickWhileEditing}},[t._v(t._s(t.url))])]):t._e()}),[],!1,null,"6fff35f2",null).exports},34304:(t,e,n)=>{n.d(e,{Z:()=>tt});n(47941),n(82526),n(57327),n(41539),n(38880),n(57658),n(89554),n(54747),n(49337),n(33321),n(69070);var o=n(15861),i=n(4942),s=n(64687),r=n.n(s),a=(n(9653),n(74916),n(15306),n(68309),n(90163)),l=n(29439),c=(n(66992),n(38559),n(2707),n(69720),n(64765),n(41817),n(59667)),u=n(63420),d=n(28575),m=n(4950),p=n(78427),h=n(93433);n(32564),n(21249),n(26833),n(92222),n(26699),n(32023),n(85827);const f={name:"SocialFeedNewPostsIndicator",props:{newStagedPosts:{type:Object,default:function(){return{}}}},computed:{hasNewPosts:function(){return Object.keys(this.newStagedPosts).length},newPostsLabel:function(){var t;return 1===Object.keys(this.newStagedPosts).length?this.i18n.get("social.new_post"):"".concat(null!==(t=Object.keys(this.newStagedPosts).length)&&void 0!==t?t:{}," ").concat(this.i18n.get("social.new_posts"))}},methods:{addPostsToFeed:function(){this.$emit("add-staged-posts")}}};var v=n(51900);const g=(0,v.Z)(f,(function(){var t=this,e=t._self._c;return t.hasNewPosts?e("div",{staticClass:"flex j-c-c mb-10 mt-20",staticStyle:{position:"sticky",top:"30px","z-index":"10"}},[e("button",{staticClass:"-new-posts-btn has-icon-front learnworlds-button learnworlds-button-small learnworlds-button-solid-accent2",on:{click:t.addPostsToFeed}},[e("span",[t._v(t._s(t.newPostsLabel))]),t._v(" "),e("span",{staticClass:"learnworlds-icon fas fa-arrow-up"})])]):t._e()}),[],!1,null,null,null).exports;var b=n(52832);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y=window.SOCIAL_FETCH_NEW||6e4;const x={name:"SocialFeedPolling",components:{SocialFeedNewPostsIndicator:g},data:function(){return{pollingInterval:null,currentlyPolling:!1,newStagedPosts:{}}},computed:w(w({},(0,u.rn)(d.$,["posts","postsSortBy","fetchPostsQuery"])),{},{showIndicator:function(){return this.postsSortBy!==m.Xb.CREATED_ASC}}),mounted:function(){this.startPolling()},beforeDestroy:function(){this.stopPolling()},methods:w(w({},(0,u.nv)(d.$,["fetchPosts","setPosts","replacePost"])),{},{startPolling:function(){var t=this;this.pollingInterval=setInterval((0,o.Z)(r().mark((function e(){var n,o,i,s,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.postsSortBy!==m.Xb.CREATED_ASC){e.next=2;break}return e.abrupt("return");case 2:if(t.currentlyPolling=!0,"visible"!==document.visibilityState){e.next=13;break}return n=Object.values(t.posts).map((function(t){return t.comments.map((function(t){return t.created}))})),o=[].concat((0,h.Z)(Object.values(t.posts).map((function(e){return t.postsSortBy===m.Xb.MODIFIED_DESC?e.modified:e.created}))),(0,h.Z)(n)),i=Object.values(o).sort((function(t,e){return e-t}))[0],e.next=9,t.fetchPosts(w(w({},t.fetchPostsQuery),{},{first:i}),{saveData:!1,setLoading:!1});case 9:s=e.sent,a={},Object.keys(s).forEach((function(e){t.posts[e]?t.replacePost(s[e]):a[e]=s[e]})),t.newStagedPosts=w(w({},t.newStagedPosts),a);case 13:t.currentlyPolling=!1;case 14:case"end":return e.stop()}}),e)}))),y)},stopPolling:function(){clearInterval(this.pollingInterval)},addStagedPosts:function(){var t=this;if(!this.currentlyPolling){var e=this.$el.closest(".social-app"),n=(0,b.HQ)(this.$el,e);n&&n.scrollTo({top:0,behavior:"smooth"});var o=Object.keys(this.newStagedPosts),i=Object.keys(this.posts).filter((function(t){return!o.includes(t)})).reduce((function(e,n){return e[n]=t.posts[n],e}),{});this.setPosts(w(w({},this.newStagedPosts),i)),this.newStagedPosts={}}}})};const C=(0,v.Z)(x,(function(){var t=this,e=t._self._c;return t.showIndicator?e("social-feed-new-posts-indicator",{attrs:{"new-staged-posts":t.newStagedPosts},on:{"add-staged-posts":t.addStagedPosts}}):t._e()}),[],!1,null,null,null).exports;var k=n(91296),P=n.n(k);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const I={name:"SocialFeedInfiniteScroll",data:function(){return{isLazyLoading:!1,scroller:null,reachedFeedEnd:!1}},computed:S({},(0,u.rn)(d.$,["posts","postsSortBy","fetchPostsQuery"])),mounted:function(){this.startInfiniteScroll()},beforeDestroy:function(){this.stopInfiniteScroll()},methods:S(S({},(0,u.nv)(d.$,["setPosts","fetchPosts"])),{},{startInfiniteScroll:function(){var t;this.scroller=null===(t=this.$el.parentNode)||void 0===t?void 0:t.closest(".social-content-scroll"),this.scroller&&this.scroller.addEventListener("scroll",this.loadLazely)},stopInfiniteScroll:function(){this.scroller&&this.scroller.removeEventListener("scroll",this.loadLazely)},loadLazely:P()((0,o.Z)(r().mark((function t(){var e,n,o,s,a,l,c,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.scroller){t.next=2;break}return t.abrupt("return");case 2:if(e=this.scroller,n=e.scrollHeight,o=e.scrollTop,s=e.clientHeight,200,!(n-o-s<200)||this.isLazyLoading||this.reachedFeedEnd){t.next=15;break}return this.isLazyLoading=!0,l=this.postsSortBy===m.Xb.CREATED_ASC?"first_id":"last_id",c=S(S({},this.fetchPostsQuery),{},(a={},(0,i.Z)(a,l,Object.values(this.posts)[Object.values(this.posts).length-1].id),(0,i.Z)(a,"count",12),(0,i.Z)(a,"sort",this.postsSortBy),a)),t.next=11,this.fetchPosts(c,{saveData:!1,setLoading:!1});case 11:u=t.sent,0===Object.values(u).length&&(this.reachedFeedEnd=!0),this.setPosts(S(S({},this.posts),u)),this.isLazyLoading=!1;case 15:case"end":return t.stop()}}),t,this)}))),150)}),render:function(){}};var A=n(23446);const E={name:"SocialGoToTopButton",data:function(){return{scroller:null,showGoToTopButton:!1,lastScrollTop:0}},computed:{isMobileApp:function(){return"v3"===window.getMobileClientVersion()}},mounted:function(){this.scroller=this.$el.closest(".social-content-scroll"),this.addScrollListener()},beforeDestroy:function(){this.scroller.removeEventListener("scroll",this.handleScroll)},methods:{addScrollListener:function(){this.scroller.addEventListener("scroll",this.handleScroll)},handleScroll:P()((function(){var t=this.scroller.scrollTop;this.scroller.scrollTop>2700&&t<=this.lastScrollTop?this.showGoToTopButton=!0:(t<700||t>=this.lastScrollTop)&&(this.showGoToTopButton=!1),this.lastScrollTop=t}),100),goToTop:function(){this.scroller.scrollTo({top:0,behavior:"smooth"}),this.showGoToTopButton=!1}}};const M=(0,v.Z)(E,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"social-go-to-top-button has-icon-front learnworlds-button learnworlds-button-small learnworlds-button-solid-accent2",class:{"is-mobile-app":t.isMobileApp},style:{visibility:t.showGoToTopButton?"visible":"hidden"},on:{click:t.goToTop}},[e("span",{staticClass:"learnworlds-icon fas fa-arrow-up"})])}),[],!1,null,null,null).exports;function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const U={name:"SocialFeed",components:{SocialFeedInfiniteScroll:I,SocialFeedPolling:C,SocialPostSort:p.Z,SocialPostItem:c.Z,SocialLoader:A.Z,SocialGoToTopButton:M},props:{posts:{type:Object,required:!0},sorting:{type:String,default:""},feedUserPermissions:{type:Object,required:!0}},data:function(){return{currentEditingPostId:null}},computed:T(T({},(0,u.rn)(d.$,["context","isPostsLoading","searchTerm"])),{},{sortedPosts:function(){var t=this;return Object.fromEntries(Object.entries(this.posts).sort((function(e,n){var o=(0,l.Z)(e,2),i=(o[0],o[1]),s=(0,l.Z)(n,2),r=(s[0],s[1]);return i.is_pinned&&r.is_pinned||!i.is_pinned&&!r.is_pinned?t.sorting===m.Xb.CREATED_ASC?i.created-r.created:t.sorting===m.Xb.CREATED_DESC?r.created-i.created:t.sorting===m.Xb.MODIFIED_DESC?r.modified-i.modified:0:i.is_pinned?-1:r.is_pinned?1:0})))},postsSorting:{get:function(){return this.sorting},set:function(t){this.$emit("update-feed-sorting",t)}},hasPosts:function(){return Object.keys(this.posts).length},emptyContextLabels:function(){var t;return t={},(0,i.Z)(t,m.I_.MENTIONS,{title:this.i18n.get("social.no_mentions_title"),description:this.i18n.get("social.no_mentions_text")}),(0,i.Z)(t,m.I_.REPLIES,{title:this.i18n.get("social.no_replies_title"),description:this.i18n.get("social.no_replies_text")}),(0,i.Z)(t,m.I_.COURSE_DISCUSSIONS,{title:this.i18n.get("social.no_course_title"),description:this.i18n.get("social.no_course_text")}),t},noPostsTitle:function(){var t,e;return null!==(t=this.$route)&&void 0!==t&&t.query.search?this.i18n.get("social.no_posts_with_search_term_title"):this.context?null===(e=this.emptyContextLabels[this.context])||void 0===e?void 0:e.title:this.i18n.get("social.no_posts_title")},noPostsText:function(){var t,e;return null!==(t=this.$route)&&void 0!==t&&t.query.search?this.i18n.get("social.no_posts_with_search_term_text").replace("{X}",'<span class="weglot-exclude">'.concat(this.$route.query.search,"</span>")):this.context?null===(e=this.emptyContextLabels[this.context])||void 0===e?void 0:e.description:this.i18n.get("social.no_posts_text")}})};const Z=(0,v.Z)(U,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"social-feed relative"},[e("social-feed-polling"),t._v(" "),t.isPostsLoading?e("social-loader",{attrs:{"show-sorter":!0}}):t.hasPosts?[t.feedUserPermissions.canMemberSortPosts?e("social-post-sort",{staticClass:"mt-15",model:{value:t.postsSorting,callback:function(e){t.postsSorting=e},expression:"postsSorting"}}):t._e(),t._v(" "),e("div",{ref:"postContainer",staticClass:"posts-container"},t._l(t.sortedPosts,(function(n){return e("social-post-item",{key:n.id,attrs:{post:n,"can-member-comment":t.feedUserPermissions.canMemberComment,"can-member-like":t.feedUserPermissions.canMemberLike,"can-member-upvote":t.feedUserPermissions.canMemberUpvote,"can-member-share":t.feedUserPermissions.canMemberShare,"edit-mode":t.currentEditingPostId===n.id},on:{"edit-post-clicked":function(e){t.currentEditingPostId=n.id},"exit-edit-mode-clicked":function(e){t.currentEditingPostId=null}}})})),1),t._v(" "),e("social-feed-infinite-scroll"),t._v(" "),e("social-go-to-top-button")]:e("div",{staticClass:"flex flex-d-col a-i-c mt-30 ta-center -social-empty"},[e("h3",{staticClass:"learnworlds-heading3 learnworlds-heading3-small mb-1rem"},[t._v(t._s(t.noPostsTitle))]),t._v(" "),e("div",{staticClass:"learnworlds-main-text-normal weglot-exclude",domProps:{innerHTML:t._s(t.noPostsText)}})])],2)}),[],!1,null,null,null).exports;n(47042);const j={name:"SocialHeader",props:{canViewMembers:{type:Boolean,default:!1},iconClass:{type:String,default:""},iconName:{default:""},title:{type:String,default:""},description:{type:String,default:""},membersCount:{type:Number,default:0}},data:function(){return{descriptionExpanded:!1}},computed:{canDescriptionBeExpanded:function(){var t;return(null===(t=this.description)||void 0===t?void 0:t.length)>150},headerDescription:function(){var t;return this.canDescriptionBeExpanded&&!this.descriptionExpanded?"".concat(null===(t=this.description)||void 0===t?void 0:t.slice(0,150),"..."):this.description}},methods:{navigateToChannelMembers:function(){!this.canViewMembers||this.membersCount<1||this.$emit("show-channel-members")},toggleDescriptionExpand:function(){this.descriptionExpanded=!this.descriptionExpanded}}};const D=(0,v.Z)(j,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"social-header-container flex a-i-b j-c-sb lw-body-bg"},[e("div",{staticClass:"flex a-i-b gap-4"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!!t.iconClass||t.iconName,expression:"!!iconClass || iconName"}],staticClass:"social-header-context-icon"},[t.iconName?e("span",{staticClass:"learnworlds-heading3 learnworlds-heading3-small"},[t._v(t._s(t.iconName))]):t._e(),t._v(" "),t.iconClass?e("span",{staticClass:"learnworlds-heading3 learnworlds-heading3-small learnworlds-icon fas",class:t.iconClass}):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.title||t.headerDescription,expression:"title || headerDescription"}],staticClass:"social-header-heading-container"},[t.title?e("h3",{staticClass:"learnworlds-heading3 learnworlds-heading3-small w-full weglot-exclude",attrs:{title:t.title},domProps:{innerHTML:t._s(t.title)}}):t._e(),t._v(" "),t.headerDescription?e("div",{staticClass:"learnworlds-main-text-small mt-5 w-full weglot-exclude"},[t._v("\n                "+t._s(t.headerDescription)+"\n                "),t.canDescriptionBeExpanded?e("button",{staticClass:"cursor-pointer learnworlds-main-text-small bold",on:{click:t.toggleDescriptionExpand}},[t._v("\n                    "+t._s(t.canDescriptionBeExpanded&&!t.descriptionExpanded?t.i18n.get("social.show_more"):t.i18n.get("social.show_less"))+"\n                ")]):t._e()]):t._e()])]),t._v(" "),t.canViewMembers?e("div",{staticClass:"learnworlds-heading3 learnworlds-heading3-small no-margin-top"},[e("button",{staticClass:"flex a-i-c p-0 cursor-pointer lw-body-bg gap-5",on:{click:t.navigateToChannelMembers}},[e("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M0 16C0 14.3834 0.642175 12.8331 1.78525 11.69C2.92833 10.5469 4.47868 9.90476 6.09524 9.90476C7.7118 9.90476 9.26214 10.5469 10.4052 11.69C11.5483 12.8331 12.1905 14.3834 12.1905 16H10.6667C10.6667 14.7876 10.185 13.6248 9.32773 12.7675C8.47042 11.9102 7.30766 11.4286 6.09524 11.4286C4.88282 11.4286 3.72006 11.9102 2.86275 12.7675C2.00544 13.6248 1.52381 14.7876 1.52381 16H0ZM6.09524 9.14286C3.56952 9.14286 1.52381 7.09714 1.52381 4.57143C1.52381 2.04571 3.56952 0 6.09524 0C8.62095 0 10.6667 2.04571 10.6667 4.57143C10.6667 7.09714 8.62095 9.14286 6.09524 9.14286ZM6.09524 7.61905C7.77905 7.61905 9.14286 6.25524 9.14286 4.57143C9.14286 2.88762 7.77905 1.52381 6.09524 1.52381C4.41143 1.52381 3.04762 2.88762 3.04762 4.57143C3.04762 6.25524 4.41143 7.61905 6.09524 7.61905ZM12.4069 10.4404C13.4776 10.9226 14.3863 11.7038 15.0237 12.6901C15.6611 13.6763 16.0001 14.8257 16 16H14.4762C14.4764 15.1192 14.2221 14.2571 13.7441 13.5174C13.266 12.7777 12.5844 12.1917 11.7813 11.8301L12.4069 10.4404ZM11.8827 1.83848C12.6503 2.15489 13.3066 2.69222 13.7684 3.38227C14.2301 4.07232 14.4765 4.88399 14.4762 5.71429C14.4765 6.75987 14.0859 7.76779 13.381 8.54006C12.6761 9.31232 11.7079 9.79312 10.6667 9.888V8.35429C11.2312 8.27343 11.7549 8.01373 12.161 7.6133C12.5671 7.21287 12.8341 6.69282 12.9228 6.12947C13.0115 5.56613 12.9173 4.98918 12.654 4.48332C12.3907 3.97746 11.9721 3.56933 11.4598 3.31886L11.8827 1.83848Z",fill:"currentColor"}})]),t._v(" "),e("span",{staticClass:"learnworlds-main-text-very-small weglot-exclude"},[t._v("\n                "+t._s(t.membersCount)+"\n            ")])])]):t._e()])}),[],!1,null,null,null).exports;var F=n(24591),B=n(56249);const $={name:"MembersLoader"};const R=(0,v.Z)($,(function(){this._self._c;return this._m(0)}),[function(){var t=this._self._c;return t("div",{staticClass:"mt-20"},[t("div",{staticClass:"shimmer-effect-social-container members-count-label"}),this._v(" "),t("div",{staticClass:"shimmer-effect-social-container members-container"})])}],!1,null,"156af40e",null).exports;const N={name:"NoChannelMembers"};const V=(0,v.Z)(N,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-d-col a-i-c mt-30 ta-center -social-empty"},[e("h3",{staticClass:"learnworlds-heading3 learnworlds-heading3-small mb-1rem"},[t._v(t._s(t.i18n.get("social.no_members_title")))]),t._v(" "),e("div",{staticClass:"learnworlds-main-text-normal"},[t._v(t._s(t.i18n.get("social.no_members_text")))])])}),[],!1,null,null,null).exports;const H={name:"ChannelMembersListItem",components:{SocialMemberAvatar:n(49899).Z},props:{member:{type:Object,required:!0}},computed:{memberAvatar:function(){return this.$lw.getAvatarLink(this.member.id)},showSendMessageButton:function(){return!window.isMobile("app")&&this.member.id!==window.me.id&&"disabled"!==window.SITE_DISABLE_INBOX&&(!window.SITE_DISABLE_INBOX||"disabled"===window.SITE_DISABLE_INBOX||!!this.member.isStaff)}},methods:{messageMember:function(){window.open("/inbox?userid=".concat(this.member.id,"&username=").concat(this.member.username),"_self")}}};const z={name:"ChannelMembersList",components:{ChannelMembersListItem:(0,v.Z)(H,(function(){var t,e,n=this,o=n._self._c;return o("div",{staticClass:"member-list-item flex a-i-c j-c-sb w-full pos-rel p-10-0 lw-bb-1px-fadeout80"},[o("div",{staticClass:"flex gap-4 a-i-c learnworlds-main-text-small"},[o("social-member-avatar",{attrs:{avatar:n.memberAvatar}}),n._v(" "),o("div",{staticClass:"social-member--name flex a-i-c gap-8 flex-wrap"},[o("span",{staticClass:"learnworlds-main-text-small mr-8"},[n._v(n._s(n.member.username))]),n._v(" "),"staff"===(null===(t=n.member)||void 0===t?void 0:t.isStaff)?o("span",{staticClass:"social-member--role"},[n._v(n._s(n.i18n.get("common.staff")))]):"instructor"===(null===(e=n.member)||void 0===e?void 0:e.isStaff)?o("span",{staticClass:"social-member--role"},[n._v(n._s(n.i18n.get("common.instructor")))]):n._e()])],1),n._v(" "),n.showSendMessageButton?o("div",{staticClass:"member-action-container flex a-i-c gap-4"},[o("button",{staticClass:"btn-icon-only flex a-i-c cursor-pointer",on:{click:n.messageMember}},[o("span",{staticClass:"fsh-0 learnworlds-main-text-small learnworlds-icon far fa-message"})])]):n._e()])}),[],!1,null,null,null).exports},props:{channelMembers:{type:Array,required:!0}}};const q=(0,v.Z)(z,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-full flex flex-d-col ov-hidden fsh-1"},[t._t("listLabel"),t._v(" "),e("div",{staticClass:"ov-auto h-full ov-x-hidden social-content-scroll"},[e("div",{staticClass:"p-5-15 lw-b-1px-fadeout80 lw-body-bg member-list-container"},t._l(t.channelMembers,(function(t){return e("channel-members-list-item",{key:t.id,attrs:{member:t}})})),1),t._v(" "),t._t("lazyLoad")],2)],2)}),[],!1,null,null,null).exports;var X=n(93949);const G={name:"ChannelMembersInfiniteScroll",data:function(){return{observer:null,observerRootMargin:50}},beforeDestroy:function(){this.disconnect()},mounted:function(){this.init()},methods:{getScrollWrapper:function(){var t=this.$el.closest(".social-app");return(0,b.HQ)(this.$el,t)},init:function(){if("IntersectionObserver"in window)if(this.scrollWrapperEl=this.getScrollWrapper(),this.scrollWrapperEl){var t={root:this.scrollWrapperEl,rootMargin:"".concat(this.observerRootMargin,"px 0px")};this.observer=new IntersectionObserver(this.handleIntersection,t),this.observer.observe(this.$el)}else this.emitAction();else this.emitAction()},disconnect:function(){this.observer&&this.observer.disconnect()},handleIntersection:function(t){var e=this;t.forEach((function(t){t.isIntersecting&&e.emitAction()}))},emitAction:function(){this.$emit("load-more")}}};const W=(0,v.Z)(G,(function(){return(0,this._self._c)("span")}),[],!1,null,null,null).exports;const K={name:"ChannelMembers",components:{PulseLoader:n(48728).Z,ChannelMembersInfiniteScroll:W,ChannelMembersList:q,NoChannelMembers:V,SocialBackButton:F.Z,MembersLoader:R},props:{channelId:{type:String,required:!0},totalMembersCount:{type:Number,default:0}},data:function(){return{channelMembers:[],isLoading:!1,isLazyLoading:!1,pagination:{page:0,itemsPerPage:50,hasMore:!1}}},computed:{hasChannelMembers:function(){return this.channelMembers.length>0},listLabelText:function(){var t,e,n=null!==(t=null===(e=this.channelMembers)||void 0===e?void 0:e.length)&&void 0!==t?t:0,o=1===this.totalMembersCount?this.i18n.get("social.member"):this.i18n.get("social.members");return n<this.totalMembersCount&&this.pagination.hasMore?"".concat(n," / ").concat(this.totalMembersCount," ").concat(o):"".concat(n," ").concat(o)}},mounted:function(){this.initialLoadChannelMembers()},methods:{closeMemberView:function(){this.$emit("close-members")},initialLoadChannelMembers:function(){var t=this;return(0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.fetchChannelMembers();case 3:t.isLoading=!1;case 4:case"end":return e.stop()}}),e)})))()},loadMoreChannelMembers:function(){var t=this;return(0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLazyLoading=!0,e.next=3,t.fetchChannelMembers();case 3:t.isLazyLoading=!1;case 4:case"end":return e.stop()}}),e)})))()},fetchChannelMembers:function(){var t=this;return(0,o.Z)(r().mark((function e(){var n,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={group_id:t.channelId,N:t.pagination.itemsPerPage,offset:t.pagination.page*t.pagination.itemsPerPage},e.prev=1,e.next=4,(0,X.Eh)(B.Z.getChannelMembers(n),!1);case 4:(o=e.sent).data.users?(t.pagination.hasMore=o.data.users.length===t.pagination.itemsPerPage,t.channelMembers=[].concat((0,h.Z)(t.channelMembers),(0,h.Z)(o.data.users)),t.pagination.page++):t.pagination.hasMore=!1,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error loading channel members"),t.pagination.hasMore=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()}}};function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const J={name:"SocialMainBase",components:{ChannelMembers:(0,v.Z)(K,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"social-members-container lw-light-bg flex flex-d-col h-full"},[e("social-back-button",{on:{click:t.closeMemberView}}),t._v(" "),t.isLoading?e("members-loader"):[t.hasChannelMembers?e("channel-members-list",{attrs:{"channel-members":t.channelMembers},scopedSlots:t._u([{key:"listLabel",fn:function(){return[e("div",{staticClass:"flex a-i-c j-c-sb mt-2rem mb-5"},[e("span",{staticClass:"learnworlds-main-text-very-small"},[t._v(t._s(t.listLabelText))])])]},proxy:!0},{key:"lazyLoad",fn:function(){return[t.pagination.hasMore&&!t.isLazyLoading?e("channel-members-infinite-scroll",{on:{"load-more":t.loadMoreChannelMembers}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLazyLoading,expression:"isLazyLoading"}],staticClass:"p-5 flex a-i-c j-c-c"},[e("pulse-loader"),t._v(" "),e("pulse-loader"),t._v(" "),e("pulse-loader")],1)]},proxy:!0}],null,!1,2764148657)}):e("no-channel-members")]],2)}),[],!1,null,null,null).exports,SocialHeader:D,SocialFeed:Z,SocialPostEditor:a.Z,SocialBackButton:F.Z},props:{headerIconClass:{type:String,default:""},headerIconName:{default:""},headerTitle:{type:String,default:""},headerDescription:{type:String,default:""},headerMembersCount:{type:Number,default:0},canViewMembers:{type:Boolean,default:!1},showEditor:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},showBackButton:{type:String},postPlaceholder:{type:String,default:""},postSubmitText:{type:String,default:""}},computed:Q(Q({},(0,u.rn)(d.$,["posts","postsSortBy","feedUserPermissions","selectedChannelType","selectedChannel","selectedChannelId","mainView","postsSaveContext","fetchPostsQuery"])),{},{isMembersView:function(){return this.mainView===m.aR.MEMBERS}}),methods:Q(Q({},(0,u.nv)(d.$,["setMainView","setSortingAndLoadPosts","fetchPosts","setSearchTerm"])),{},{showChannelMembers:function(){this.feedUserPermissions.canMemberViewMembers&&this.setMainView(m.aR.MEMBERS)},closeChannelMembers:function(){this.setMainView(m.aR.FEED)},backToFeedView:function(){var t=this;return(0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setSearchTerm(null),e.next=3,t.fetchPosts(t.fetchPostsQuery);case 3:return e.next=5,t.$router.replace({name:t.$route.name,params:t.$route.params});case 5:case"end":return e.stop()}}),e)})))()}})};const tt=(0,v.Z)(J,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"social-main-container h-full"},[t.isMembersView?e("channel-members",{attrs:{"channel-id":t.selectedChannelId,"total-members-count":t.headerMembersCount},on:{"close-members":t.closeChannelMembers}}):e("div",{staticClass:"ov-auto h-full ov-x-hidden social-content-scroll"},[t.showHeader?e("social-header",{attrs:{"icon-class":t.headerIconClass,"icon-name":t.headerIconName,title:t.headerTitle,description:t.headerDescription,"members-count":t.headerMembersCount,"can-view-members":t.canViewMembers},on:{"show-channel-members":t.showChannelMembers}}):t._e(),t._v(" "),t.showBackButton?e("social-back-button",{attrs:{"back-context":t.selectedChannelType},on:{click:t.backToFeedView}}):t._e(),t._v(" "),t.feedUserPermissions.canMemberPost&&t.showEditor?e("social-post-editor",{attrs:{"save-context":t.postsSaveContext,"post-placeholder":t.postPlaceholder,"post-submit-text":t.postSubmitText}}):t._e(),t._v(" "),e("social-feed",{attrs:{posts:t.posts,sorting:t.postsSortBy,"feed-user-permissions":t.feedUserPermissions},on:{"update-feed-sorting":t.setSortingAndLoadPosts}})],1)],1)}),[],!1,null,null,null).exports},90163:(t,e,n)=>{n.d(e,{Z:()=>M});n(47941),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070);var o=n(15861),i=n(93433),s=n(4942),r=n(64687),a=n.n(r),l=(n(73210),n(92222),n(57327),n(41539),n(57658),n(69826),n(21249),n(79753),n(66992),n(88674),n(78783),n(33948),n(82526),n(41817),n(34553),n(40561),n(91058),n(83710),n(5212),n(96647),n(39714),n(63420)),c=n(28575),u=n(56249),d=(n(32564),n(34630));const m={name:"SocialPollCreator",components:{ImageSvg:d.Z},props:{value:{type:Array,default:function(){return[]}},editMode:{type:Boolean,default:!1}},data:function(){return{showError:!1}},methods:{updateOption:function(t,e){var n=(0,i.Z)(this.value);n[t]=e,this.emitValue(n)},addOption:function(){this.emitValue(this.value.concat([""]))},removeOption:function(t){var e=this;if(2===this.value.length)return this.showError=!0,void setTimeout((function(){e.showError=!1}),2e3);this.emitValue(this.value.filter((function(e,n){return n!==t})))},removePoll:function(){this.emitValue(null)},emitValue:function(t){this.$emit("input",t)}}};var p=n(51900);const h=(0,p.Z)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"social-poll-creator"},[e("div",{staticClass:"social-poll-options"},t._l(t.value,(function(n,o){return e("div",{key:o,staticClass:"social-poll-option"},[e("input",{staticClass:"learnworlds-main-text-very-small fg-1 trans-bg",attrs:{type:"text",placeholder:"".concat(t.i18n.get("social.placeholder_poll_choice")," ").concat(o+1),disabled:t.editMode},domProps:{value:n},on:{input:function(e){return t.updateOption(o,e.target.value)}}}),t._v(" "),t.editMode?t._e():e("button",{staticClass:"btn-icon-only social-poll-option--remove",on:{click:function(e){return t.removeOption(o)}}},[e("image-svg",{staticClass:"w-10",attrs:{name:"CloseIcon"}})],1)])})),0),t._v(" "),t.showError?e("div",{staticClass:"social-poll--error"},[t._v("\n        "+t._s(t.i18n.get("social.poll_minimum_options"))+"\n    ")]):t._e(),t._v(" "),e("div",{staticClass:"social-poll-actions"},[t.editMode?t._e():e("button",{staticClass:"social-poll-btn bold cursor-pointer flex a-i-c gap-8 lw-body-bg",on:{click:t.addOption}},[e("span",{staticClass:"learnworlds-icon learnworlds-main-text-normal far fa-square-plus"}),t._v(" "),e("span",{staticClass:"learnworlds-main-text-very-small bold"},[t._v(t._s(t.i18n.get("social.add_poll_choice")))])]),t._v(" "),e("button",{staticClass:"social-poll-btn cursor-pointer learnworlds-main-text-very-small bold lw-body-bg",on:{click:t.removePoll}},[t._v(t._s(t.i18n.get("social.delete_poll")))])])])}),[],!1,null,null,null).exports;var f=n(2216),v=n(22570),g=n(45070),b=n(68304),_=n(4950),w=n(49899),y=n(48728),x=n(29225),C=n(15332),k=n(93949),P=n(57035),O=n(52832),S=n(68485);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const E={name:"SocialPostEditor",components:{PulseLoader:y.Z,MemberAvatar:w.Z,PostAttachmentsEditor:g.Z,SocialTextEditor:v.Z,SocialBasicEditorTools:f.Z,ImageSvg:d.Z,SocialPollCreator:h,SocialVideoEmbed:b.Z,SocialLinkEmbed:P.Z},props:{post:{type:Object,default:null},saveContext:{type:Array,default:function(){return[]}},postPlaceholder:{type:String,default:""},postSubmitText:{type:String,default:""}},data:function(){var t,e;return{postContent:"",pollContent:null,mediaFile:null,postMentions:[],isSubmitting:!1,videoLinks:[],regularLinks:[],attachments:[],editorAttachments:[],editorAttachmentsReadyToUpload:!0,author:null!==(t=null===(e=window)||void 0===e?void 0:e.me)&&void 0!==t?t:{},loading:!1,SOCIAL_EDITOR_CONTEXT_TYPE:_.AI,hasFormattingBar:!1,maxContentLength:_.a.POST}},computed:A(A({},(0,l.rn)(c.$,["selectedChannel","selectedChannelType","selectedChannelId","posts","feedUserPermissions","isStandaloneChannel","getStandaloneChannelContext"])),{},{isContentEmpty:function(){return""===(0,k.ju)(this.postContent.trim())},isPostButtonDisabled:function(){return!this.isValidPost()||this.isSubmitting||!this.editorAttachmentsReadyToUpload},authorAvatarImageSrc:function(){return this.$lw.getAvatarLink(this.author.id)},editMode:function(){return!!this.post},allAttachments:function(){return[].concat((0,i.Z)(this.attachments),(0,i.Z)(this.editorAttachments))},disableImageUploadButton:function(){return this.fileAttachments.length||this.imageAttachments.length>=_.ar},disableFileUploadButton:function(){return this.imageAttachments.length||this.fileAttachments.length>=_.fd},hasCreatePollButton:function(){return!!this.feedUserPermissions.canMemberPoll&&(!this.editMode||!this.pollContent&&this.editMode)},hasImageUploadButton:function(){return!!this.feedUserPermissions.canMemberUploadImages},hasMentionsButton:function(){return this.feedUserPermissions.canMemberMention},hasFileUploadButton:function(){return this.feedUserPermissions.canMemberUploadFiles||this.feedUserPermissions.canMemberUploadVideos},imageAttachments:function(){return this.allAttachments.filter((function(t){return t.type===_.UA.IMAGE}))},fileAttachments:function(){return this.allAttachments.filter((function(t){return t.type!==_.UA.IMAGE}))},hasPoll:function(){var t;return null===(t=this.pollContent)||void 0===t?void 0:t.length},defaultPostPlaceholder:function(){return this.hasPoll?this.i18n.get("social.placeholder_poll"):this.i18n.get("social.placeholder_share")},finalPlaceholder:function(){return this.postPlaceholder||this.defaultPostPlaceholder},finalPostSubmitText:function(){return this.postSubmitText||this.i18n.get("social.share")}}),mounted:function(){var t=this;return(0,o.Z)(a().mark((function e(){var n,o,i,s,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.post){e.next=11;break}return t.postContent=t.post.text,r=null!==(n=t.post.social_object)&&void 0!==n&&n.data?[t.post.social_object]:null!==(o=t.post.social_items)&&void 0!==o?o:[],t.pollContent=t.extractPollOptions(r),t.videoLinks=t.extractVideoLinks(r),t.regularLinks=t.extractRegularLinks(r),t.attachments=(0,k.ut)(null!==(i=t.post.attachments)&&void 0!==i?i:[]),(null===(s=t.post.social_object)||void 0===s?void 0:s.type)===_.d.IMAGE&&t.attachments.push((0,C._q)(t.post.social_object.data,_.UA.IMAGE,"",0)),e.next=10,t.$nextTick();case 10:t.$refs.editor.replaceMentionLinksWithNodes();case 11:case"end":return e.stop()}}),e)})))()},methods:A(A({},(0,l.nv)(c.$,["replacePost","prependPost"])),{},{extractPollData:function(t){var e;return null===(e=t.find((function(t){return t.type===_.d.POLL})))||void 0===e?void 0:e.data},extractPollOptions:function(t){var e=t.find((function(t){return t.type===_.d.POLL}));if(e)return e.data.options.map((function(t){return t.text}))},extractVideoLinks:function(t){return t.filter((function(t){return(t.type===_.d.LINK||"videoLink"===t.type)&&(0,C.a9)(t.data.url)}))},extractRegularLinks:function(t){return t.filter((function(t){return t.type===_.d.LINK&&!(0,C.a9)(t.data.url)}))},preparePayload:function(){var t=this;return(0,o.Z)(a().mark((function e(){var n,o,s,r,l,c,u,d,m,p,h,f,v,g,b,w;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=A(A({},_.jM),{},{text:t.postContent,text_mentions:t.postMentions,attachments:t.attachments,context:Array.isArray(t.saveContext)&&t.saveContext.length?t.saveContext:null,social_items:[]}),t.selectedChannelType===_.i_.USER_GROUP&&(r.group_id=t.selectedChannelId),!t.editMode&&t.isStandaloneChannel&&t.getStandaloneChannelContext&&(r.standalone_context=t.getStandaloneChannelContext),null!==(n=t.videoLinks)&&void 0!==n&&n.length&&(l=t.videoLinks.map((function(t){return A({type:"videoLink"},t)})),r.social_items=r.social_items.concat(l)),null!==(o=t.regularLinks)&&void 0!==o&&o.length&&(c=t.regularLinks.map((function(t){return A({type:"link"},t)})),r.social_items=r.social_items.concat(c)),e.next=7,t.$refs.attachmentsEditor.startFileUploading();case 7:return u=e.sent,(null==(d=u.files)?void 0:d.length)>0&&(r.attachments=[].concat((0,i.Z)(r.attachments),(0,i.Z)(d))),(null==(m=null===(s=t.pollContent)||void 0===s?void 0:s.filter((function(t){return t})))?void 0:m.length)>=2&&(b=null!==(p=t.post)&&void 0!==p&&null!==(h=p.social_object)&&void 0!==h&&h.data?[t.post.social_object]:null!==(f=null===(v=t.post)||void 0===v?void 0:v.social_items)&&void 0!==f?f:[],w=t.extractPollData(b),r.social_items.push({type:"poll",data:{text:null,type:"poll",totalVotes:null!==(g=null==w?void 0:w.totalVotes)&&void 0!==g?g:0,options:m.map((function(t,e){var n,o,i,s=null!==(n=null==w||null===(o=w.options)||void 0===o||null===(i=o.find((function(t){return t.id==="ch_".concat(e+1)})))||void 0===i?void 0:i.results)&&void 0!==n?n:{val:0,per:0};return{text:t,id:"ch_".concat(e+1),results:s}}))}})),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})))()},handlePostSubmission:function(){var t=this;return(0,o.Z)(a().mark((function e(){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isValidPost()){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.prev=3,e.next=6,t.preparePayload();case 6:if(n=e.sent,!t.editMode){e.next=12;break}return e.next=10,t.editPost(n);case 10:e.next=16;break;case 12:return e.next=14,t.createPost(n);case 14:o=e.sent,t.scrollToPost(null==o?void 0:o.id);case 16:t.handlePostResponse(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),t.loading=!1;case 22:return e.prev=22,t.loading=!1,t.exitEditMode(),e.finish(22);case 26:case"end":return e.stop()}}),e,null,[[3,19,22,26]])})))()},createPost:function(t){var e=this;return(0,o.Z)(a().mark((function n(){var o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.B)(u.Z.addPost(t));case 2:if(!(o=n.sent).isOK||!o.data.post){n.next=6;break}return e.prependPost(o.data.post),n.abrupt("return",o.data.post);case 6:console.error("Error creating post");case 7:case"end":return n.stop()}}),n)})))()},editPost:function(t){var e=this;return(0,o.Z)(a().mark((function n(){var o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.B)(u.Z.editPost(e.post.id,t));case 2:(o=n.sent).isOK&&o.data.post?e.replacePost(A(A({},o.data.post),{},{modified:e.post.modified,user_id:e.post.user_id})):console.error("Error editing post");case 4:case"end":return n.stop()}}),n)})))()},isValidPost:function(){var t,e;return this.postContent&&!this.pollContent||this.allAttachments.length||this.regularLinks.length||this.videoLinks.length||(null===(t=this.pollContent)||void 0===t||null===(e=t.filter((function(t){return t})))||void 0===e?void 0:e.length)>=2&&this.postContent},handlePostResponse:function(){this.postContentReset()},postContentReset:function(){this.postContent="",this.pollContent=null,this.videoLinks=[],this.regularLinks=[],this.postMentions=[],this.$refs.attachmentsEditor.clearAttachments()},addPoll:function(){var t,e;this.pollContent=["",""],null===(t=this.$refs.editor.editor)||void 0===t||null===(e=t.commands)||void 0===e||e.focus()},addEmoji:function(t){this.$refs.editor.insertText(t)},addMentionsToArray:function(t){this.postMentions=t.map((function(t){return{id:t.id,username:t.label}}))},addRegularLinks:function(t){var e=this;return(0,o.Z)(a().mark((function n(){var o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.length){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Promise.all(t.map((function(t){return u.Z.getLinkPreview(t)})));case 4:o=n.sent,e.regularLinks=o.map((function(t){var e;return{data:null===(e=t.data)||void 0===e?void 0:e.urlInfo}})).filter((function(t){var e=t.data;return!!e&&(e.description||e.image||e.title)}));case 6:case"end":return n.stop()}}),n)})))()},addVideoLinks:function(t){t.length&&(this.videoLinks=t.map((function(t){return{data:{url:t}}})))},triggerMentions:function(){this.$refs.editor.insertText("@")},handleFileUpload:function(t){this.$refs.attachmentsEditor.triggerFileInput(t)},removeAttachment:function(t){var e=this.attachments.findIndex((function(e){return e.location===t.location}));e<0?console.error("file to remove was not found"):this.attachments.splice(e,1)},updateEditorAttachments:function(t){this.editorAttachments=t},setEditorFilesReady:function(t){this.editorAttachmentsReadyToUpload=!t},removeVideoLink:function(t){this.videoLinks=this.videoLinks.filter((function(e){return e.data.url!==t}))},removeRegularLink:function(t){this.regularLinks=this.regularLinks.filter((function(e){return e.data.url!==t}))},exitEditMode:function(){this.$emit("exit-edit-mode")},scrollToPost:function(t){var e=this;return(0,o.Z)(a().mark((function n(){var o,i,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$nextTick();case 2:if(o=document.getElementById(t)){n.next=5;break}return n.abrupt("return");case 5:if(i=o.closest(".social-app"),s=(0,O.HQ)(o,i)){n.next=9;break}return n.abrupt("return");case 9:(0,O.d)(o,s);case 10:case"end":return n.stop()}}),n)})))()},handlePostModification:function(){var t,e,n=this,o="lwMentionAllConfirmationDismissed",i=parseInt(null!==(t=window.localStorage.getItem(o))&&void 0!==t?t:"0",10),s=(new Date).getTime();s-i>6048e5&&!this.editMode&&(null===(e=this.postMentions)||void 0===e?void 0:e.some((function(t){return t.id===_.Lf})))?this.$lw.showMessage(S.zG.ALERT,"Mention Everyone","Please note that using @all will trigger an inbox message to all members of this space. No email notification will be sent.",[{name:"OK",func:function(){n.handlePostSubmission(),window.localStorage.setItem(o,s.toString())}},{name:"Cancel"}]):this.handlePostSubmission()}})};const M=(0,p.Z)(E,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-editor-container lw-body-bg",class:{loading:t.loading}},[t.loading?e("pulse-loader",{staticClass:"loader"}):t._e(),t._v(" "),e("div",{staticClass:"flex a-i-fs gap-10 w-full"},[e("member-avatar",{attrs:{avatar:t.authorAvatarImageSrc,size:"normal","active-indicator":!1}}),t._v(" "),e("social-text-editor",{ref:"editor",attrs:{placeholder:t.finalPlaceholder,"with-formatting-bar":t.hasFormattingBar,"max-content-length":t.maxContentLength,post:t.post},on:{"update-mentions":t.addMentionsToArray,"update-video-links":t.addVideoLinks,"update-regular-links":t.addRegularLinks},model:{value:t.postContent,callback:function(e){t.postContent=e},expression:"postContent"}})],1),t._v(" "),e("post-attachments-editor",{ref:"attachmentsEditor",attrs:{"post-attachments":t.attachments,"can-upload-images":t.feedUserPermissions.canMemberUploadImages,"can-upload-videos":t.feedUserPermissions.canMemberUploadVideos,"can-upload-files":t.feedUserPermissions.canMemberUploadFiles},on:{"remove-attachment":t.removeAttachment,"editor-attachments-updated":t.updateEditorAttachments,"editor-files-preparing":t.setEditorFilesReady}}),t._v(" "),t._l(t.videoLinks,(function(n,o){return e("social-video-embed",{key:o,attrs:{data:n.data,editing:!0},on:{"remove-video":function(e){return t.removeVideoLink(n.data.url)}}})})),t._v(" "),t._l(t.regularLinks,(function(n,o){return e("social-link-embed",{key:o,attrs:{data:n.data,editing:!0},on:{"remove-link":function(e){return t.removeRegularLink(n.data.url)}}})})),t._v(" "),t.pollContent?e("social-poll-creator",{attrs:{"edit-mode":t.editMode},model:{value:t.pollContent,callback:function(e){t.pollContent=e},expression:"pollContent"}}):t._e(),t._v(" "),e("div",{staticClass:"post-actions-container"},[e("social-basic-editor-tools",{attrs:{"context-type":t.SOCIAL_EDITOR_CONTEXT_TYPE.POST,"is-formatting-toggled":t.hasFormattingBar,"file-upload-disabled":t.disableFileUploadButton,"image-upload-disabled":t.disableImageUploadButton,"has-file-upload-button":t.hasFileUploadButton,"has-image-upload-button":t.hasImageUploadButton,"has-mentions-button":t.hasMentionsButton},on:{"emoji-selected":t.addEmoji,"add-mention":t.triggerMentions,"upload-file":t.handleFileUpload,"toggle-formatting-bar":function(e){t.hasFormattingBar=!t.hasFormattingBar}},scopedSlots:t._u([t.hasCreatePollButton?{key:"context-actions",fn:function(){return[e("div",{staticClass:"post-tools-divider"}),t._v(" "),e("div",{staticClass:"post-editor-create-poll post-editor-tools-icon-container",class:{disabled:t.pollContent},on:{click:t.addPoll}},[e("div",{staticClass:"post-editor-file-upload-icon post-editor-tools-icon"},[e("ImageSvg",{class:{"tool-active":t.pollContent},attrs:{name:"PollIcon"}}),t._v(" "),e("span",{staticClass:"post-editor-icon-tooltip learnworlds-main-text-very-small"},[t._v(t._s(t.i18n.get("social.start_poll")))])],1)])]},proxy:!0}:null],null,!0)}),t._v(" "),e("div",{staticClass:"flex a-i-c j-c-sb"},[t.editMode?e("button",{staticClass:"post-editor-cancel-button learnworlds-button learnworlds-button-small learnworlds-button-outline",on:{click:t.exitEditMode}},[t._v("\n                "+t._s(t.i18n.get("common.cancel"))+"\n            ")]):t._e(),t._v(" "),e("button",{staticClass:"post-editor-submit-button learnworlds-button learnworlds-button-solid-brand learnworlds-button-small",class:{disabled:t.isPostButtonDisabled},on:{click:t.handlePostModification}},[t._v("\n                "+t._s(t.finalPostSubmitText)+"\n            ")])])],1)],2)}),[],!1,null,null,null).exports},59667:(t,e,n)=>{n.d(e,{Z:()=>_t});n(68309),n(82526),n(38880),n(49337),n(33321),n(69070);var o=n(15861),i=n(4942),s=n(64687),r=n.n(s),a=(n(34553),n(57327),n(41539),n(86535),n(99244),n(79753),n(21249),n(89554),n(54747),n(47941),n(74916),n(15306),n(82772),n(92222),n(57658),n(93433)),l=(n(73210),n(66992),n(88674),n(78783),n(33948),n(41817),n(40561),n(2216)),c=n(56249),u=n(63420),d=n(28575),m=n(22570),p=n(49899),h=n(45070),f=n(68304),v=n(29225),g=n(48728),b=n(4950),_=n(93949),w=n(57035),y=n(15332),x=n(52832);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const P={name:"SocialPostCommentEditor",components:{SocialLinkEmbed:w.Z,PostAttachmentsEditor:h.Z,PulseLoader:g.Z,SocialVideoEmbed:f.Z,MemberAvatar:p.Z,SocialTextEditor:m.Z,SocialBasicEditorTools:l.Z},props:{post:{required:!0},comment:{type:Object,default:null},forceFocus:{type:Boolean,default:!1},forceNavigateToPost:{type:Boolean,default:!1}},data:function(){return{commentContent:"",isSubmitting:!1,isEditorEmpty:!1,hasFocus:!1,videoLinks:[],regularLinks:[],postMentions:[],attachments:[],editorAttachments:[],editorAttachmentsReadyToUpload:!0,loading:!1,SOCIAL_EDITOR_CONTEXT_TYPE:b.AI,hasFormattingBar:!1,maxContentLength:b.a.COMMENT,editorInitialHeight:0}},computed:k(k({},(0,u.rn)(d.$,["feedUserPermissions","isStandaloneChannel"])),{},{member:function(){return window.me},memberAvatarImageSrc:function(){return this.$lw.getAvatarLink(this.member.id)},isPostButtonDisabled:function(){return!this.isValidComment()||this.isSubmitting||!this.editorAttachmentsReadyToUpload},editMode:function(){return!!this.comment},allAttachments:function(){return[].concat((0,a.Z)(this.attachments),(0,a.Z)(this.editorAttachments))},disableImageUploadButton:function(){return this.fileAttachments.length||this.imageAttachments.length>=b.ar},disableFileUploadButton:function(){return this.imageAttachments.length||this.fileAttachments.length>=b.fd},hasImageUploadButton:function(){return!!this.feedUserPermissions.canMemberUploadImages},hasMentionsButton:function(){return this.feedUserPermissions.canMemberMention},hasFileUploadButton:function(){return this.feedUserPermissions.canMemberUploadFiles||this.feedUserPermissions.canMemberUploadVideos},imageAttachments:function(){return this.allAttachments.filter((function(t){return t.type===b.UA.IMAGE}))},fileAttachments:function(){return this.allAttachments.filter((function(t){return t.type!==b.UA.IMAGE}))},isContentEmpty:function(){return 0===this.allAttachments.length&&this.isEditorEmpty},hasFullWidthEditor:function(){var t,e;return this.editorInitialHeight&&this.hasFocus&&!this.isContentEmpty&&this.commentContent&&this.editorInitialHeight<(null!==(t=null===(e=this.$refs.editor)||void 0===e?void 0:e.$el.clientHeight)&&void 0!==t?t:0)}}),mounted:function(){var t=this;return(0,o.Z)(r().mark((function e(){var n,o,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.comment){e.next=9;break}return t.commentContent=t.comment.text,i=null!==(n=t.comment.social_items)&&void 0!==n?n:[],t.videoLinks=t.extractVideoLinks(i),t.regularLinks=t.extractRegularLinks(i),t.attachments=(0,_.ut)(null!==(o=t.comment.attachments)&&void 0!==o?o:[]),e.next=8,t.$nextTick();case 8:t.$refs.editor.replaceMentionLinksWithNodes();case 9:return e.next=11,t.$nextTick();case 11:t.forceFocus&&t.$refs.editor&&t.setFocus(null,!0);case 12:case"end":return e.stop()}}),e)})))()},methods:k(k({},(0,u.nv)(d.$,["replacePost","updateComment"])),{},{extractVideoLinks:function(t){return t.filter((function(t){return(t.type===b.d.LINK||"videoLink"===t.type)&&(0,y.a9)(t.data.url)}))},extractRegularLinks:function(t){return t.filter((function(t){return t.type===b.d.LINK&&!(0,y.a9)(t.data.url)}))},handleCommentSubmission:function(){var t=this;return(0,o.Z)(r().mark((function e(){var n,o,i,s,l,c,u,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isValidComment()){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,i=k(k({},b.p7),{},{text:t.commentContent,text_mentions:t.postMentions,attachments:t.attachments}),e.next=6,t.$refs.attachmentsEditor.startFileUploading();case 6:if(s=e.sent,(null==(l=s.files)?void 0:l.length)>0&&(i.attachments=[].concat((0,a.Z)(i.attachments),(0,a.Z)(l))),null!==(n=t.videoLinks)&&void 0!==n&&n.length&&(c=t.videoLinks.map((function(t){return k({type:"videoLink"},t)})),i.social_items=i.social_items.concat(c)),null!==(o=t.regularLinks)&&void 0!==o&&o.length&&(u=t.regularLinks.map((function(t){return k({type:"link"},t)})),i.social_items=i.social_items.concat(u)),e.prev=11,!t.editMode){e.next=17;break}return e.next=15,t.editComment(i);case 15:e.next=21;break;case 17:return e.next=19,t.createComment(i);case 19:d=e.sent,t.scrollToComment(d.comment_id);case 21:t.hasFormattingBar=!1,t.handleResponse(),e.next=28;break;case 25:return e.prev=25,e.t0=e.catch(11),e.abrupt("return",null);case 28:return e.prev=28,t.loading=!1,t.exitEditMode(),t.removeFocus(),e.finish(28);case 33:case"end":return e.stop()}}),e,null,[[11,25,28,33]])})))()},createComment:function(t){var e=this;return(0,o.Z)(r().mark((function n(){var o,i,s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,v.B)(c.Z.addComment(e.post.id,t));case 2:if(!(o=n.sent).isOK||!o.data.comment){n.next=7;break}return s=k(k({},o.data.comment),{},{user_id:k(k({},o.data.comment.user_id),{},{isStaff:null!==(i=window.me.isStaff)&&void 0!==i&&i}),counters:{best_of:0,likes:0}}),e.replacePost(k(k({},e.post),{},{comments:[].concat((0,a.Z)(e.post.comments),[s])})),n.abrupt("return",o.data.comment);case 7:console.error("Error creating comment");case 8:case"end":return n.stop()}}),n)})))()},editComment:function(t){var e=this;return(0,o.Z)(r().mark((function n(){var o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,v.B)(c.Z.editComment(e.post.id,e.comment.comment_id,t));case 2:(o=n.sent).isOK&&o.data.comment?e.updateComment(e.post.id,k(k({},o.data.comment),{},{user_id:e.comment.user_id})):console.error("Error editing comment");case 4:case"end":return n.stop()}}),n)})))()},isValidComment:function(){return(0,_.ju)(this.commentContent.trim())||this.allAttachments.length||this.regularLinks.length||this.videoLinks.length},handleResponse:function(){this.commentContentReset()},commentContentReset:function(){this.commentContent="",this.regularLinks=[],this.videoLinks=[],this.postMentions=[],this.$refs.attachmentsEditor.clearAttachments()},addEmoji:function(t){this.$refs.editor.insertText(t)},addMentionsToArray:function(t){this.postMentions=t.map((function(t){return{id:t.id,username:t.label}}))},triggerMentions:function(){this.$refs.editor.insertText("@")},addRegularLinks:function(t){var e=this;return(0,o.Z)(r().mark((function n(){var o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.length){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Promise.all(t.map((function(t){return c.Z.getLinkPreview(t)})));case 4:o=n.sent,e.regularLinks=o.map((function(t){var e;return{data:null===(e=t.data)||void 0===e?void 0:e.urlInfo}})).filter((function(t){var e=t.data;return!!e&&(e.description||e.image||e.title)}));case 6:case"end":return n.stop()}}),n)})))()},addVideoLinks:function(t){t.length&&(this.videoLinks=t.map((function(t){return{data:{url:t}}})))},removeVideoLink:function(t){this.videoLinks=this.videoLinks.filter((function(e){return e.data.url!==t}))},removeRegularLink:function(t){this.regularLinks=this.regularLinks.filter((function(e){return e.data.url!==t}))},handleFileUpload:function(t){this.$refs.attachmentsEditor.triggerFileInput(t)},removeAttachment:function(t){var e=this.attachments.findIndex((function(e){return e.location===t.location}));e<0?console.error("file to remove was not found"):this.attachments.splice(e,1)},updateEditorAttachments:function(t){this.editorAttachments=t},setEditorFilesReady:function(t){this.editorAttachmentsReadyToUpload=!t},exitEditMode:function(){this.$emit("exit-edit-mode")},setFocus:function(t,e){if(t&&this.forceNavigateToPost)return t.preventDefault(),void this.$emit("go-to-post");this.hasFocus=e,e?(this.setInitialEditorHeight(),this.$refs.editor.editor.chain().focus().run()):this.$refs.editor.editor.chain().blur().run()},removeFocus:function(){this.editMode||(this.hasFocus=!1)},setInitialEditorHeight:function(){var t=this;return(0,o.Z)(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.editorInitialHeight){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$nextTick();case 4:t.editorInitialHeight=null===(n=t.$refs.editor)||void 0===n?void 0:n.$el.clientHeight;case 5:case"end":return e.stop()}}),e)})))()},scrollToComment:function(t){var e=this;return(0,o.Z)(r().mark((function n(){var o,i,s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$nextTick();case 2:if(o=document.getElementById(t)){n.next=5;break}return n.abrupt("return");case 5:if(i=o.closest(".social-app"),s=(0,x.HQ)(o,i)){n.next=9;break}return n.abrupt("return");case 9:(0,x.d)(o,s);case 10:case"end":return n.stop()}}),n)})))()}})};var O=n(51900);const S=(0,O.Z)(P,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.removeFocus,expression:"removeFocus"}],staticClass:"social-comment-editor-container flex a-i-fs gap-10",class:{"in-focus":!t.isContentEmpty||t.hasFocus,loading:t.loading}},[e("member-avatar",{attrs:{avatar:t.memberAvatarImageSrc,size:"small","active-indicator":!1}}),t._v(" "),e("div",{staticClass:"social-comment-editor relative"},[e("social-text-editor",{ref:"editor",style:{flexBasis:t.hasFullWidthEditor?"100%":"content"},attrs:{placeholder:t.i18n.get("social.placeholder_comment"),"with-formatting-bar":t.hasFormattingBar&&(!t.isEditorEmpty||t.hasFocus),"max-content-length":t.maxContentLength,post:t.post},on:{"update-mentions":t.addMentionsToArray,"update-video-links":t.addVideoLinks,"update-regular-links":t.addRegularLinks,"check-empty":function(e){t.isEditorEmpty=e}},nativeOn:{mousedown:function(e){return e.stopPropagation(),t.setFocus(e,!0)}},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}}),t._v(" "),e("post-attachments-editor",{ref:"attachmentsEditor",attrs:{"post-attachments":t.attachments,"can-upload-images":t.feedUserPermissions.canMemberUploadImages,"can-upload-videos":t.feedUserPermissions.canMemberUploadVideos,"can-upload-files":t.feedUserPermissions.canMemberUploadFiles},on:{"remove-attachment":t.removeAttachment,"editor-attachments-updated":t.updateEditorAttachments,"editor-files-preparing":t.setEditorFilesReady}}),t._v(" "),t._l(t.videoLinks,(function(n,o){return e("social-video-embed",{key:o,attrs:{data:n.data,editing:!0},on:{"remove-video":function(e){return t.removeVideoLink(n.data.url)}}})})),t._v(" "),t._l(t.regularLinks,(function(n,o){return e("social-link-embed",{key:o,attrs:{data:n.data,editing:!0},on:{"remove-link":function(e){return t.removeRegularLink(n.data.url)}}})})),t._v(" "),e("social-basic-editor-tools",{staticClass:"inline-editor-tools flex j-c-fe pb-8 pr-8",attrs:{"context-type":t.SOCIAL_EDITOR_CONTEXT_TYPE.COMMENT,"is-formatting-toggled":t.hasFormattingBar,"file-upload-disabled":t.disableFileUploadButton,"image-upload-disabled":t.disableImageUploadButton,"has-file-upload-button":t.hasFileUploadButton,"has-image-upload-button":t.hasImageUploadButton,"has-mentions-button":t.hasMentionsButton},on:{"upload-file":t.handleFileUpload,"add-mention":t.triggerMentions,"emoji-selected":t.addEmoji,"toggle-formatting-bar":function(e){t.hasFormattingBar=!t.hasFormattingBar}},scopedSlots:t._u([{key:"context-actions",fn:function(){return[e("div",{staticClass:"flex a-i-c j-c-fe gap-4 post-editor-send"},[e("div",{staticClass:"comment-tools-divider"}),t._v(" "),e("div",{staticClass:"post-editor-tools-icon-container ml-10",class:{disabled:t.isPostButtonDisabled},on:{click:t.handleCommentSubmission}},[e("div",{staticClass:"post-editor-tools-icon--send learnworlds-button learnworlds-button-solid-brand"},[t.loading?e("pulse-loader",{staticClass:"loader"}):e("span",{staticClass:"learnworlds-main-text-very-small learnworlds-icon far fa-paper-plane"})],1)])])]},proxy:!0}])}),t._v(" "),t.editMode?e("div",{staticClass:"flex w-full j-c-fe p-8"},[t.editMode?e("button",{staticClass:"learnworlds-button mr-0 ml-5 p-0 learnworlds-button-small text-only lw-link-text",on:{click:t.exitEditMode}},[t._v("\n                "+t._s(t.i18n.get("common.cancel"))+"\n            ")]):t._e()]):t._e()],2)],1)}),[],!1,null,null,null).exports;var I=n(68485);n(9653),n(2707),n(47042),n(56977);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var M=(0,u.Q_)("userInteractions",(function(){var t=(0,d.$)();function e(){return(e=(0,o.Z)(r().mark((function e(n,o){var i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.updatePostProperties(n,{likes:[].concat((0,a.Z)(t.posts[n].likes),[{id:o.id,username:o.username}]),"counters.likes":t.posts[n].counters.likes+1}),e.next=4,(0,_.Eh)(c.Z.addPostLike(n),!1);case 4:i=e.sent,s=i.data.likes,t.updatePostProperties(n,{likes:s,"counters.likes":s.length}),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(0),Array.isArray(e.t0)){e.next=14;break}return console.error(e.t0),e.abrupt("return");case 14:e.t0.forEach((function(t){"User has already liked this post"!==t.message&&console.error(t)}));case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function n(){return(n=(0,o.Z)(r().mark((function e(n,o){var i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.updatePostProperties(n,{likes:t.posts[n].likes.filter((function(t){return t.id!==o.id})),"counters.likes":t.posts[n].counters.likes-1}),e.next=4,(0,_.Eh)(c.Z.removePostLike(n),!1);case 4:i=e.sent,s=i.data.likes,t.updatePostProperties(n,{likes:s,"counters.likes":s.length}),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(0),Array.isArray(e.t0)){e.next=14;break}return console.error(e.t0),e.abrupt("return");case 14:e.t0.forEach((function(t){"User has not liked this post"!==t.message&&console.error(t)}));case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function s(){return(s=(0,o.Z)(r().mark((function e(n,o){var i,s,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.updatePostProperties(n,{best_of:[].concat((0,a.Z)(t.posts[n].best_of),[{id:o.id,username:o.username}]),"counters.best_of":t.posts[n].best_of.length}),e.next=4,(0,_.Eh)(c.Z.addPostUpvote(n),!1);case 4:i=e.sent,s=i.data,l=s.best_of,s.modified,t.updatePostProperties(n,{best_of:l,"counters.best_of":l.length}),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(0),Array.isArray(e.t0)){e.next=14;break}return console.error(e.t0),e.abrupt("return");case 14:e.t0.forEach((function(t){"You already have this post in your best-of list"!==t.message&&console.error(t)}));case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function l(){return(l=(0,o.Z)(r().mark((function e(n,o){var i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.updatePostProperties(n,{best_of:t.posts[n].best_of.filter((function(t){return t.id!==o.id})),"counters.best_of":t.posts[n].best_of.length}),e.next=4,(0,_.Eh)(c.Z.removePostUpvote(n),!1);case 4:i=e.sent,s=i.data.best_of,t.updatePostProperties(n,{best_of:s,"counters.best_of":s.length}),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(0),Array.isArray(e.t0)){e.next=14;break}return console.error(e.t0),e.abrupt("return");case 14:e.t0.forEach((function(t){"User does not have this post in their best-of list"!==t.message&&console.error(t)}));case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function u(){return(u=(0,o.Z)(r().mark((function e(n,o){var s,a,l,u,d,m,p,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l=function(){var e,o;if((null===(e=t.posts[n].social_object)||void 0===e?void 0:e.type)===b.d.POLL)return"social_object.data";var i=null===(o=t.posts[n].social_items)||void 0===o?void 0:o.findIndex((function(t){return"poll"===t.type}));return i>=0?"social_items.".concat(i,".data"):""}()){e.next=6;break}return console.log("Poll not found"),e.abrupt("return");case 6:return u=(0,_._M)(t.posts[n],l),d=u.totalVotes+1,m=u.options.map((function(t){var e=t.id===o?t.results.val+1:t.results.val;return E(E({},t),{},{results:{val:e,per:(e/d*100).toFixed(2)}})})),t.updatePostProperties(n,(s={},(0,i.Z)(s,"".concat(l,".me"),!0),(0,i.Z)(s,"".concat(l,".totalVotes"),d),(0,i.Z)(s,"".concat(l,".options"),m),s)),e.next=12,(0,_.Eh)(c.Z.pollVote(n,o));case 12:p=e.sent,h=p.data.poll.data,t.updatePostProperties(n,(a={},(0,i.Z)(a,"".concat(l,".me"),!0),(0,i.Z)(a,"".concat(l,".totalVotes"),h.totalVotes),(0,i.Z)(a,"".concat(l,".options"),h.options),a)),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function m(){return(m=(0,o.Z)(r().mark((function e(n,o){var s,l,u,d,m,p,h,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.postId,l=n.commentId,e.prev=1,!((m=t.posts[s].comments.findIndex((function(t){return l===t.comment_id})))<0)){e.next=6;break}return console.error("comment not found"),e.abrupt("return");case 6:return p=t.posts[s].comments[m],h="comments.".concat(m),t.updatePostProperties(s,(u={},(0,i.Z)(u,"".concat(h,".likes"),[].concat((0,a.Z)(p.likes),[{id:o.id,username:o.username}])),(0,i.Z)(u,"".concat(h,".counters.likes"),p.counters.likes+1),u)),e.next=11,(0,_.Eh)(c.Z.addCommentLike(s,l),!1);case 11:f=e.sent,t.updatePostProperties(s,(d={},(0,i.Z)(d,"".concat(h,".likes"),f.data.comment.likes),(0,i.Z)(d,"".concat(h,".counters.likes"),f.data.comment.likes.length),d)),e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(1),Array.isArray(e.t0)){e.next=20;break}return console.error(e.t0),e.abrupt("return");case 20:e.t0.forEach((function(t){"User has already liked this comment"!==t.message&&console.error(t)}));case 21:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function p(){return(p=(0,o.Z)(r().mark((function e(n,o){var s,a,l,u,d,m,p,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.postId,a=n.commentId,e.prev=1,!((d=t.posts[s].comments.findIndex((function(t){return a===t.comment_id})))<0)){e.next=6;break}return console.error("comment not found"),e.abrupt("return");case 6:return m=t.posts[s].comments[d],p="comments.".concat(d),t.updatePostProperties(s,(l={},(0,i.Z)(l,"".concat(p,".likes"),m.likes.filter((function(t){return t.id!==o.id}))),(0,i.Z)(l,"".concat(p,".counters.likes"),m.counters.likes-1),l)),e.next=11,(0,_.Eh)(c.Z.removeCommentLike(s,a),!1);case 11:h=e.sent,t.updatePostProperties(s,(u={},(0,i.Z)(u,"".concat(p,".likes"),h.data.comment.likes),(0,i.Z)(u,"".concat(p,".counters.likes"),h.data.comment.likes.length),u)),e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(1),Array.isArray(e.t0)){e.next=20;break}return console.error(e.t0),e.abrupt("return");case 20:e.t0.forEach((function(t){"User has not liked this comment"!==t.message&&console.error(t)}));case 21:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function h(){return(h=(0,o.Z)(r().mark((function e(n,o){var s,l,u,d,m,p,h,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.postId,l=n.commentId,e.prev=1,!((m=t.posts[s].comments.findIndex((function(t){return l===t.comment_id})))<0)){e.next=6;break}return console.error("comment not found"),e.abrupt("return");case 6:return p=t.posts[s].comments[m],h="comments.".concat(m),t.updatePostProperties(s,(u={},(0,i.Z)(u,"".concat(h,".best_of"),[].concat((0,a.Z)(p.best_of),[{id:o.id,username:o.username}])),(0,i.Z)(u,"".concat(h,".counters.best_of"),p.counters.best_of+1),u)),e.next=11,(0,_.Eh)(c.Z.addCommentUpvote(s,l),!1);case 11:f=e.sent,t.updatePostProperties(s,(d={},(0,i.Z)(d,"".concat(h,".best_of"),f.data.comment.best_of),(0,i.Z)(d,"".concat(h,".counters.best_of"),f.data.comment.best_of.length),d)),e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(1),Array.isArray(e.t0)){e.next=20;break}return console.error(e.t0),e.abrupt("return");case 20:e.t0.forEach((function(t){"User has this comment in their best-of list already"!==t.message&&console.error(t)}));case 21:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function f(){return(f=(0,o.Z)(r().mark((function e(n,o){var s,l,u,d,m,p,h,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.postId,l=n.commentId,e.prev=1,!((m=t.posts[s].comments.findIndex((function(t){return l===t.comment_id})))<0)){e.next=6;break}return console.error("comment not found"),e.abrupt("return");case 6:return p=t.posts[s].comments[m],h="comments.".concat(m),t.updatePostProperties(s,(u={},(0,i.Z)(u,"".concat(h,".best_of"),[].concat((0,a.Z)(p.best_of),[{id:o.id,username:o.username}])),(0,i.Z)(u,"".concat(h,".counters.best_of"),p.counters.best_of-1),u)),e.next=11,(0,_.Eh)(c.Z.removeCommentUpvote(s,l),!1);case 11:f=e.sent,t.updatePostProperties(s,(d={},(0,i.Z)(d,"".concat(h,".best_of"),f.data.comment.best_of),(0,i.Z)(d,"".concat(h,".counters.best_of"),f.data.comment.best_of.length),d)),e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(1),Array.isArray(e.t0)){e.next=20;break}return console.error(e.t0),e.abrupt("return");case 20:e.t0.forEach((function(t){"User does not have this comment in their best-of list"!==t.message&&console.error(t)}));case 21:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}return{addCommentLike:function(t,e){return m.apply(this,arguments)},addCommentUpvote:function(t,e){return h.apply(this,arguments)},addPostLike:function(t,n){return e.apply(this,arguments)},addPostUpvote:function(t,e){return s.apply(this,arguments)},postPollVote:function(t,e){return u.apply(this,arguments)},removeCommentLike:function(t,e){return p.apply(this,arguments)},removeCommentUpvote:function(t,e){return f.apply(this,arguments)},removePostLike:function(t,e){return n.apply(this,arguments)},removePostUpvote:function(t,e){return l.apply(this,arguments)}}})),L=n(70538),T=n(61473),U=n(91882),Z=n(81635);const j={name:"PostAttachmentsPreview",components:{AudioAttachment:n(8350).Z,VideoAttachment:Z.Z,FileAttachment:T.Z,ImageGallery:U.Z},props:{postAttachments:{type:Array,default:function(){return[]}}},computed:{hasAttachments:function(){return this.postAttachments.length>0},imageAttachments:function(){return this.postAttachments.filter((function(t){return t.type===b.UA.IMAGE}))},fileAttachments:function(){return this.postAttachments.filter((function(t){return t.type===b.UA.FILE}))},videoAttachments:function(){return this.postAttachments.filter((function(t){return t.type===b.UA.VIDEO}))},audioAttachments:function(){return this.postAttachments.filter((function(t){return t.type===b.UA.AUDIO}))}}};const D=(0,O.Z)(j,(function(){var t=this,e=t._self._c;return t.hasAttachments?e("div",[t.imageAttachments.length>0?e("image-gallery",{staticClass:"mt-10 mb-10",attrs:{"lightbox-enabled":!0,"downloading-allowed":!0,images:t.imageAttachments}}):t._e(),t._v(" "),t.fileAttachments.length>0?e("div",{staticClass:"flex flex-wrap gap-10 mt-10 mb-10"},t._l(t.fileAttachments,(function(t){return e("file-attachment",{key:t.location,attrs:{file:t,"has-actions":!0}})})),1):t._e(),t._v(" "),t.videoAttachments.length>0?e("div",{staticClass:"flex flex-wrap gap-10 mt-10 mb-10"},t._l(t.videoAttachments,(function(t){return e("video-attachment",{key:t.location,attrs:{file:t}})})),1):t._e(),t._v(" "),t.audioAttachments.length>0?e("div",{staticClass:"flex flex-wrap gap-10 mt-10 mb-10"},t._l(t.audioAttachments,(function(t){return e("audio-attachment",{key:t.location,attrs:{file:t}})})),1):t._e()],1):t._e()}),[],!1,null,null,null).exports;const F={name:"SocialPoll",props:{data:{type:Object,required:!0}},computed:{showResults:function(){return this.data.me}},methods:{voteOption:function(t){this.$emit("vote",t)},getPercent:function(t){return Math.round(t)}}};const B=(0,O.Z)(F,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"poll mt-10 mb-10"},[t.showResults?t._l(t.data.options,(function(n){return e("div",{key:n.id,staticClass:"poll-item-result lw-b-1px-fadeout80 flex j-c-sb a-i-c"},[e("div",{staticClass:"poll-item--percent",style:{width:"".concat(t.getPercent(n.results.per),"%")}}),t._v(" "),e("span",{staticClass:"learnworlds-main-text-very-small"},[t._v(t._s(n.text))]),t._v(" "),e("span",{staticClass:"learnworlds-main-text-small bold fsh-0"},[t._v(t._s(t.getPercent(n.results.per))+" %")])])})):t._l(t.data.options,(function(n){return e("button",{key:n.id,staticClass:"poll-item lw-b-1px-fadeout80",on:{click:function(e){return t.voteOption(n.id)}}},[e("span",{staticClass:"learnworlds-main-text-very-small"},[t._v(t._s(n.text))])])}))],2)}),[],!1,null,"57de4a95",null).exports;function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const N=(0,L.defineComponent)({name:"SocialContentItem",components:{SocialLinkEmbed:w.Z,PostAttachmentsPreview:D,SocialPoll:B,SocialVideoEmbed:f.Z},props:{post:{type:Object,required:!0}},data:function(){return{componentMap:{poll:"SocialPoll",videoLink:"SocialVideoEmbed",link:"SocialLinkEmbed",pollResults:"SocialPollResults"}}},computed:{legacyAdaptedItems:function(){var t,e;return this.post.social_object&&this.post.social_object.data?[R(R({},this.post.social_object),{},{isLegacy:!0})]:null!==(t=null===(e=this.post)||void 0===e?void 0:e.social_items)&&void 0!==t?t:[]},postItems:function(){var t=this;return this.legacyAdaptedItems.map((function(e){var n;return{type:t.getComponentType(e),data:R(R({},e.data),{},{isLegacy:null!==(n=e.isLegacy)&&void 0!==n&&n}),handlers:t.getItemHandlers(e)}}))},postAttachments:function(){var t,e=null!==(t=this.post.attachments)&&void 0!==t?t:[];if(this.post.social_object&&this.post.social_object.type===b.d.IMAGE)try{e.push((0,y._q)(this.post.social_object.data,b.UA.IMAGE,"",0))}catch(t){console.log("Failed to display legacy post image")}return e}},methods:R(R({},(0,u.nv)(M,["postPollVote"])),{},{getComponentType:function(t){var e="";switch(t.type){case"link":e=(0,y.a9)(t.data.url)?"videoLink":"link";break;case"videoLink":e="videoLink";break;case"poll":e="poll"}return e},getItemHandlers:function(t){var e=this;return"poll"!==t.type?{}:{vote:function(t){return e.pollVote(t)}}},pollVote:function(t){var e=this;return(0,o.Z)(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.postPollVote(e.post.id,t);case 2:case"end":return n.stop()}}),n)})))()}})});const V=(0,O.Z)(N,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"item-content w-full"},[t._l(t.postItems,(function(n,o){return e(t.componentMap[n.type],t._g({key:o,tag:"component",staticClass:"weglot-exclude",attrs:{data:n.data}},n.handlers))})),t._v(" "),e("post-attachments-preview",{attrs:{"post-attachments":t.postAttachments}})],2)}),[],!1,null,null,null).exports;var H=n(34630),z=n(70951);const q=(0,L.defineComponent)({name:"SocialPostInteractions",components:{UserNoTranslate:z.Z,ImageSvg:H.Z},props:{interactions:{type:Array,required:!0}},data:function(){return{isUsingRtl:(0,_.Pz)()}},computed:{filteredInteractions:function(){return this.interactions.filter((function(t){return!t.hidden}))}}});const X=(0,O.Z)(q,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"post-item-content-meta-container"},t._l(t.filteredInteractions,(function(n){var o;return e("div",{key:n.id,staticClass:"post-item-content-meta-item-outer-container"},[e("button",{staticClass:"post-item-content-meta-item-container p-0",class:n.additionalClass,attrs:{disabled:n.disabled},on:{click:n.handler}},[n.icon?e("div",{staticClass:"post-item-content-meta-icon"},[e("image-svg",{attrs:{name:n.icon}})],1):t._e(),t._v(" "),e("div",{staticClass:"post-item-content-meta-count weglot-exclude"},[t._v("\n                "+t._s(n.text)+"\n            ")])]),t._v(" "),null!=n&&null!==(o=n.userList)&&void 0!==o&&o.length?e("div",{staticClass:"post-interaction-user-list-wrapper",class:{rtl:t.isUsingRtl}},[e("ul",{staticClass:"post-interaction-user-list weglot-exclude"},t._l(n.userList,(function(n){return e("li",{key:n.id},[e("UserNoTranslate",[t._v(t._s(n.username))])],1)})),0)]):t._e()])})),0)}),[],!1,null,null,null).exports;var G=n(64929),W=(n(77601),n(15104));const K={name:"SocialMention",components:{UserNoTranslate:z.Z,UserCardOnHover:G.Z},props:{id:{type:String,required:!0},href:{type:String,required:!0},text:{type:String,required:!0}},computed:{isMentionAll:function(){return this.id===b.Lf},anchorLink:function(){return"v3"===window.getMobileClientVersion()?"javascript:void(0)":this.href}}};const Y=(0,O.Z)(K,(function(){var t=this,e=t._self._c;return t.isMentionAll?e("span",{staticClass:"social-mention lw-link-text"},[t._v(t._s(t.text))]):e("user-card-on-hover",{attrs:{"user-id":t.id,"element-tag":"span"}},[e("UserNoTranslate",[e("a",{staticClass:"social-mention",attrs:{href:t.anchorLink}},[t._v(t._s(t.text))])])],1)}),[],!1,null,null,null).exports;const Q=(0,L.defineComponent)({name:"SocialPostTextContent",props:{post:{type:Object,required:!0},collapsible:{type:Boolean,default:!0},threshold:{type:Number,default:250}},data:function(){return{textContentExpanded:!1}},computed:{postContent:function(){var t=this.post.text;return this.textContentExpanded||!this.collapsible?t:(0,W.Z)(t,this.threshold,{html:!0})},isContentTruncated:function(){return this.collapsible&&this.post.text.length!==this.postContent.length},readMoreLabel:function(){return this.i18n.get("social.read_more")}},mounted:function(){var t=this.$el.querySelectorAll(".social-mention"),e=L.default.extend(Y);t.forEach((function(t){var n=t.textContent,o=t.href,i=(0,_.DP)(o).id;new e({propsData:{href:o,id:i,text:n}}).$mount(t)})),this.setDirection()},methods:{expandPostItem:function(){this.textContentExpanded=!0},setDirection:function(){var t=this.isFirstCharRtl(this.post.text)?"rtl":"ltr";this.$refs.postContent.setAttribute("dir",t)},isFirstCharRtl:function(t){var e=t.replace(/<[^>]*>/g,"").trim();if(!e)return!1;return/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF]/.test(e[0])}}});const J=(0,O.Z)(Q,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"post-item-content"},[e("span",{ref:"postContent",staticClass:"learnworlds-main-text-small weglot-exclude",domProps:{innerHTML:t._s(t.postContent)}}),t._v(" "),t.isContentTruncated&&!t.textContentExpanded?e("button",{staticClass:"text-only cursor-pointer post-item-content-read-more learnworlds-main-text-small",on:{click:t.expandPostItem}},[t._v("\n        "+t._s(t.readMoreLabel)+"\n    ")]):t._e()])}),[],!1,null,"d65cdb7c",null).exports;var tt=n(91296),et=n.n(tt),nt=n(68153),ot=n(60369);function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rt="post-item-content-meta-item--active";const at={name:"SocialPostCommentItem",components:{UserNoTranslate:z.Z,SocialMoreButton:ot.Z,SocialContextMenu:nt.Z,SocialPostTextContent:J,UserCardOnHover:G.Z,MemberAvatar:p.Z,SocialContentItem:V,SocialPostInteractions:X,SocialPostCommentEditor:S},provide:function(){return{providedAuthorId:this.comment.user_id.id}},props:{post:{required:!0},comment:{required:!0},canMemberLike:{type:Boolean,default:!0},canMemberUpvote:{type:Boolean,default:!0},canMemberShare:{type:Boolean,default:!0}},data:function(){return{editMode:!1,currentUser:window.me}},computed:st(st({},(0,u.rn)(d.$,["selectedChannel"])),{},{commentAuthor:function(){return{id:this.comment.user_id.id,name:this.comment.user_id.username,role:this.comment.user_id.isStaff,avatar:this.$lw.getAvatarLink(this.comment.user_id.id)}},createdDateTime:function(){return window.moment.unix(this.comment.created).startOf("minute").fromNow()},likesCount:function(){var t,e;return null!==(t=null===(e=this.comment.counters)||void 0===e?void 0:e.likes)&&void 0!==t?t:this.comment.likes.length},isLiked:function(){var t=this;return this.comment.likes.findIndex((function(e){return e.id===t.currentUser.id}))>=0},upvotesCount:function(){var t,e;return null!==(t=null===(e=this.comment.counters)||void 0===e?void 0:e.best_of)&&void 0!==t?t:this.comment.best_of.length},isUpvoted:function(){var t=this;return this.comment.best_of.findIndex((function(e){return e.id===t.currentUser.id}))>=0},userLikes:function(){var t;return null!==(t=this.comment.likes)&&void 0!==t?t:[]},userUpvotes:function(){var t;return null!==(t=this.comment.best_of)&&void 0!==t?t:[]},hasPostsManagePermissions:function(){var t;return this.$lwGates.canUserManagePostsInChannel(st(st({},this.selectedChannel),{},{context:null===(t=this.post.context)||void 0===t?void 0:t[1],group_id:this.post.group_id}))},isMyComment:function(){var t;return null===(t=this.comment.me)||void 0===t?void 0:t.mine},commentActions:function(){var t=this;return[[{icon:"EditIcon",title:this.i18n.get("social.edit"),classModifier:"",isDisabled:function(){return!1},isHidden:function(){return!t.hasPostsManagePermissions&&!t.isMyComment},callback:function(){t.editMode=!0}},{icon:"DeleteIcon",title:this.i18n.get("social.delete"),classModifier:"lw-author-context-menu-list-item--red",isHidden:function(){return!t.hasPostsManagePermissions&&!t.isMyComment},isDisabled:function(){return!1},callback:this.removeCommentAfterConfirmation}]]},commentInteractions:function(){return[{icon:"LikesIcon",additionalClass:this.isLiked?[rt,"like-icon"]:"like-icon",text:this.likesCount,hidden:!this.canMemberLike,userList:(0,y.cc)(this.userLikes),handler:et()(this.handleCommentLike,250)},{icon:"UpvotesIcon",additionalClass:this.isUpvoted?[rt,"upvote-icon"]:"upvote-icon",text:this.upvotesCount,hidden:!this.canMemberUpvote,userList:(0,y.cc)(this.userUpvotes),handler:et()(this.handleCommentUpvote,250)}]},edited:function(){var t;return null===(t=this.comment)||void 0===t?void 0:t.edited}}),methods:st(st(st({},(0,u.nv)(d.$,["deleteComment"])),(0,u.nv)(M,["addCommentLike","removeCommentLike","addCommentUpvote","removeCommentUpvote"])),{},{handleCommentLike:function(){return this.isLiked?this.removeCommentLike({postId:this.post.id,commentId:this.comment.comment_id},this.currentUser):this.addCommentLike({postId:this.post.id,commentId:this.comment.comment_id},this.currentUser)},removeCommentAfterConfirmation:function(){var t=this;this.$lw.showMessage(I.zG.ALERT,this.i18n.get("social.comment_delete"),this.i18n.get("social.comment_delete_confirm"),[{name:this.i18n.get("social.delete"),func:function(){return t.deleteComment(t.post.id,t.comment.comment_id)},args:[],class:"solid"},{name:this.i18n.get("common.cancel")}])},handleCommentUpvote:function(){return this.isUpvoted?this.removeCommentUpvote({postId:this.post.id,commentId:this.comment.comment_id},this.currentUser):this.addCommentUpvote({postId:this.post.id,commentId:this.comment.comment_id},this.currentUser)}})};const lt=(0,O.Z)(at,(function(){var t=this,e=t._self._c;return t.editMode?e("social-post-comment-editor",{staticClass:"mb-10",attrs:{post:t.post,comment:t.comment},on:{"exit-edit-mode":function(e){t.editMode=!1}}}):e("div",{staticClass:"social-comment-wrapper flex a-i-fs gap-10 hover-trigger",attrs:{id:t.comment.comment_id}},[e("user-card-on-hover",{staticClass:"member-card-container pt-10",attrs:{"user-id":t.commentAuthor.id}},[e("member-avatar",{attrs:{avatar:t.commentAuthor.avatar,size:"small","active-indicator":!1}})],1),t._v(" "),e("div",{staticClass:"social-comment-inner-wrapper"},[e("div",{staticClass:"flex"},[e("div",{staticClass:"social-comment"},[e("div",{staticClass:"social-comment-text-content"},[e("div",{staticClass:"flex flex-wrap a-i-c gap-8 mb-5 post-name-tags"},[e("div",{staticClass:"learnworlds-main-text-very-small bold",staticStyle:{"word-break":"break-all"}},[e("UserNoTranslate",[t._v(t._s(t.commentAuthor.name))])],1),t._v(" "),"staff"===t.commentAuthor.role?e("span",{staticClass:"social-member--role"},[t._v(t._s(t.i18n.get("common.staff")))]):"instructor"===t.commentAuthor.role?e("span",{staticClass:"social-member--role"},[t._v(t._s(t.i18n.get("common.instructor")))]):t._e(),t._v(" "),e("div",{staticClass:"learnworlds-main-text-tiny fsh-0 lw-text-color-fadeout30"},[t._v("\n                            "+t._s(t.createdDateTime)+"\n                        ")]),t._v(" "),t.edited?e("div",{staticClass:"learnworlds-main-text-tiny fsh-0 lw-text-color-fadeout30"},[t._v("\n                            "+t._s(t.i18n.get("social.edited"))+"\n                        ")]):t._e()]),t._v(" "),e("social-post-text-content",{attrs:{post:t.comment,threshold:300}})],1),t._v(" "),e("social-content-item",{attrs:{post:t.comment}})],1),t._v(" "),t.hasPostsManagePermissions||t.isMyComment?e("social-more-button",[e("social-context-menu",{attrs:{context:{},"menu-items":t.commentActions}})],1):t._e()],1),t._v(" "),e("social-post-interactions",{staticClass:"comment-interactions-container",attrs:{interactions:t.commentInteractions}})],1)],1)}),[],!1,null,null,null).exports;var ct=n(96486);function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const mt={name:"SocialPostCommentFeed",components:{SocialPostCommentItem:lt,SocialPostSort:n(78427).Z,ImageSvg:H.Z},props:{post:{required:!0},limit:{type:Number,default:2},forceShowAll:{type:Boolean,default:!1}},data:function(){return{showAll:!1,sort:b.Xb.CREATED_DESC}},computed:dt(dt({},(0,u.rn)(d.$,["feedUserPermissions"])),{},{comments:function(){var t,e=(t={},(0,i.Z)(t,b.Xb.CREATED_DESC,[["created"],["desc"]]),(0,i.Z)(t,b.Xb.CREATED_ASC,[["created"],["asc"]]),(0,i.Z)(t,b.Xb.MODIFIED_DESC,[["modified"],["desc"]]),t),n=ct.orderBy.apply(void 0,[this.post.comments].concat((0,a.Z)(e[this.sort])));return this.showAll||this.forceShowAll?n:n.slice(0,this.limit)},commentCount:function(){var t,e;return null!==(t=null===(e=this.post.comments)||void 0===e?void 0:e.length)&&void 0!==t?t:0}})};const pt=(0,O.Z)(mt,(function(){var t=this,e=t._self._c;return 0!==t.comments.length?e("div",[t._l(t.comments,(function(n){return e("div",{key:n.comment_id,staticClass:"mt-10"},[e("SocialPostCommentItem",{attrs:{comment:n,post:t.post,"can-member-like":t.feedUserPermissions.canMemberLike,"can-member-upvote":t.feedUserPermissions.canMemberUpvote,"can-member-share":t.feedUserPermissions.canMemberShare}})],1)})),t._v(" "),!t.forceShowAll&&!t.showAll&&t.commentCount>t.limit?e("button",{staticClass:"learnworlds-button-small show-all-btn flex a-i-c j-c-c cursor-pointer gap-4",on:{click:function(e){t.showAll=!0}}},[e("span",[t._v(t._s(t.i18n.get("social.view_all"))+" ("+t._s(t.commentCount)+")")]),t._v(" "),e("ImageSvg",{staticClass:"social-caret--expand",attrs:{name:"CaretDown"}})],1):t._e(),t._v(" "),!t.forceShowAll&&t.showAll&&t.commentCount>t.limit?e("button",{staticClass:"learnworlds-button-small show-all-btn flex a-i-c j-c-c cursor-pointer gap-4",on:{click:function(e){t.showAll=!1}}},[e("span",[t._v(t._s(t.i18n.get("social.view_less")))]),t._v(" "),e("ImageSvg",{staticClass:"social-caret--shrink",attrs:{name:"CaretDown"}})],1):t._e()],2):t._e()}),[],!1,null,"5f2edd3e",null).exports;var ht=n(90163);function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gt="post-item-content-meta-item--active";const bt={name:"SocialPostItem",components:{UserNoTranslate:z.Z,SocialMoreButton:ot.Z,SocialContextMenu:nt.Z,SocialPostTextContent:J,SocialContentItem:V,UserCardOnHover:G.Z,MemberAvatar:p.Z,SocialPostCommentFeed:pt,SocialPostCommentEditor:S,SocialPostInteractions:X,SocialPostEditor:ht.Z},provide:function(){return{providedAuthorId:this.post.user_id.id}},inject:{expandedComments:{default:!1}},props:{post:{type:Object,required:!0},canMemberLike:{type:Boolean,default:!0},canMemberUpvote:{type:Boolean,default:!0},canMemberShare:{type:Boolean,default:!0},canMemberComment:{type:Boolean,default:!0},editMode:{type:Boolean,default:!1},hasBottomCommentEditor:{type:Boolean,default:!1}},data:function(){return{postCopy:null,currentUser:window.me,isMobile:"v3"===window.getMobileClientVersion()||window.isMobile()}},computed:vt(vt({},(0,u.rn)(d.$,["selectedChannel","selectedChannelId","courses","isStandaloneRenderer"])),{},{postAuthor:function(){return{id:this.post.user_id.id,name:this.post.user_id.username,role:this.post.user_id.isStaff,avatar:this.$lw.getAvatarLink(this.post.user_id.id)}},createdDateTime:function(){return window.moment.unix(this.post.created).startOf("minute").fromNow()},commentsCount:function(){var t,e,n,o;return null!==(t=null!==(e=null===(n=this.post.counters)||void 0===n?void 0:n.comments)&&void 0!==e?e:null===(o=this.post.comments)||void 0===o?void 0:o.length)&&void 0!==t?t:0},isCommented:function(){var t,e=this;return(null===(t=this.post.comments)||void 0===t?void 0:t.findIndex((function(t){return t.id===e.currentUser.id})))>=0},upvotesCount:function(){var t,e,n,o;return null!==(t=null!==(e=null===(n=this.post.counters)||void 0===n?void 0:n.best_of)&&void 0!==e?e:null===(o=this.post.best_of)||void 0===o?void 0:o.length)&&void 0!==t?t:0},isUpvoted:function(){var t,e=this;return(null===(t=this.post.best_of)||void 0===t?void 0:t.findIndex((function(t){return t.id===e.currentUser.id})))>=0},likesCount:function(){var t,e,n,o;return null!==(t=null!==(e=null===(n=this.post.counters)||void 0===n?void 0:n.likes)&&void 0!==e?e:null===(o=this.post.likes)||void 0===o?void 0:o.length)&&void 0!==t?t:0},isLiked:function(){var t,e=this;return(null===(t=this.post.likes)||void 0===t?void 0:t.findIndex((function(t){return t.id===e.currentUser.id})))>=0},userLikes:function(){var t;return null!==(t=this.post.likes)&&void 0!==t?t:[]},userUpvotes:function(){var t;return null!==(t=this.post.best_of)&&void 0!==t?t:[]},hasPostsManagePermissions:function(){var t;return this.$lwGates.canUserManagePostsInChannel(vt(vt({},this.selectedChannel),{},{context:null===(t=this.post.context)||void 0===t?void 0:t[1],group_id:this.post.group_id}))},isMyPost:function(){var t;return null===(t=this.post.me)||void 0===t?void 0:t.mine},postActions:function(){var t=this;return[[{icon:"EditIcon",title:this.i18n.get("social.edit"),classModifier:"",isDisabled:function(){return!1},isHidden:function(){return!t.hasPostsManagePermissions&&!t.isMyPost},callback:function(){t.$emit("edit-post-clicked")}},{icon:this.post.is_pinned?"UnpinIcon":"PinIcon",title:this.post.is_pinned?"Unpin from top":"Pin to top",classModifier:"",isHidden:function(){return!t.hasPostsManagePermissions},isDisabled:function(){return!1},callback:function(){return t.togglePinPost(t.post.id)}},{icon:"CopyIcon",title:this.i18n.get("social.copy_link"),isHidden:function(){return!t.canMemberShare},isDisabled:function(){return!1},callback:et()(this.copyPostLinkToClipboard,250)},{icon:"DeleteIcon",title:this.i18n.get("social.delete"),classModifier:"lw-author-context-menu-list-item--red",isHidden:function(){return!t.hasPostsManagePermissions&&!t.isMyPost},isDisabled:function(){return!1},callback:this.removePostAfterConfirmation}]]},hasPostActions:function(){return this.postActions.flatMap((function(t){return t})).filter((function(t){return!t.isHidden()}))},postInteractions:function(){var t=this;return[{icon:"LikesIcon",additionalClass:this.isLiked?[gt,"like-icon"]:"like-icon",text:this.likesCount,hidden:!this.canMemberLike,userList:(0,y.cc)(this.userLikes),handler:et()(this.handlePostLike,250)},{icon:"UpvotesIcon",additionalClass:this.isUpvoted?[gt,"upvote-icon"]:"upvote-icon",text:this.upvotesCount,hidden:!this.canMemberUpvote,userList:(0,y.cc)(this.userUpvotes),handler:et()(this.handlePostUpvote,250)},{icon:"CommentsIcon",additionalClass:this.isCommented?[gt,"comment-icon"]:"comment-icon",text:this.commentsCount,hidden:!this.canMemberComment,handler:function(e){e.stopPropagation(),!t.isMobile||t.isStandaloneRenderer?(t.$refs.commentEditor.setFocus(!0),t.scrollToCommentEditor()):t.goToPost()}}]},edited:function(){return this.post.edited},postContextLink:function(){var t,e,n,o,i,s=null!==(t=this.post.context)&&void 0!==t?t:[];if(Array.isArray(s)&&0!==s.length){var r,a,l=(null===(e=this.courses)||void 0===e?void 0:e.length)>0?this.courses:null===(n=window.me)||void 0===n?void 0:n.courses,c=null!==(o=null==l?void 0:l.map((function(t){return t.titleId})))&&void 0!==o?o:[],u=null!==(i=null==l?void 0:l.filter((function(t){return"paid"===t.status&&!t.me.premium})).map((function(t){return t.title.id})))&&void 0!==i?i:[],d={"{ivideo}":"{".concat(this.i18n.get("course.video"),"}"),"{ebook}":"{".concat(this.i18n.get("course.ebook"),"}"),"{pbEbook}":"{".concat(this.i18n.get("course.ebook"),"}"),"{pdf}":"{".concat(this.i18n.get("course.pdf"),"}"),"{livecode}":"{".concat(this.i18n.get("course.livecode"),"}"),"{assessment}":"{".concat(this.i18n.get("course.assessment"),"}"),"{newSurvey}":"{".concat(this.i18n.get("course.form"),"}"),"{assessmentV2}":"{".concat(this.i18n.get("course.assessment"),"}"),"{certificate}":"{".concat(this.i18n.get("course.certificate"),"}"),"{certificateCompletion}":"{".concat(this.i18n.get("course.certificateCompletion"),"}"),"{certificate_v2}":"{".concat(this.i18n.get("course.certificate"),"}"),"{certificateCompletion_v2}":"{".concat(this.i18n.get("course.certificateCompletion"),"}"),"{snippet}":"{".concat(this.i18n.get("course.snippet"),"}"),"{tip}":"{".concat(this.i18n.get("course.tip"),"}"),"{html}":"{".concat(this.i18n.get("course.html"),"}"),"{url}":"{".concat(this.i18n.get("course.url"),"}"),"{youtube}":"{".concat(this.i18n.get("course.youtube"),"}"),"{slideshare}":"{".concat(this.i18n.get("course.slideshare"),"}"),"{soundcloud}":"{".concat(this.i18n.get("course.soundcloud"),"}"),"{audio}":"{".concat(this.i18n.get("course.audio"),"}"),"{embed}":"{".concat(this.i18n.get("course.embed"),"}"),"{badge}":"{".concat(this.i18n.get("course.badge"),"}"),"{quizBank}":"{".concat(this.i18n.get("course.quizBank"),"}"),"{quizWritten}":"{".concat(this.i18n.get("course.quizWritten"),"}"),"{quizFiles}":"{".concat(this.i18n.get("course.quizFiles"),"}"),"{quizFormal}":"{".concat(this.i18n.get("course.quizFormal"),"}"),"{quizInformal}":"{".concat(this.i18n.get("course.quizInformal"),"}"),"{survey}":"{".concat(this.i18n.get("course.survey"),"}"),"{scorm}":"{".concat(this.i18n.get("course.scorm"),"}"),"{scormGraded}":"{".concat(this.i18n.get("course.scormGraded"),"}"),"{colMooc}":"{".concat(this.i18n.get("course.colMooc"),"}"),"{zoomMeeting}":"{".concat(this.i18n.get("course.zoomMeeting"),"}"),"{zoomWebinar}":"{".concat(this.i18n.get("course.zoomWebinar"),"}"),"{webexMeeting}":"{".concat(this.i18n.get("course.webexMeeting"),"}"),"{goToWebinar}":"{".concat(this.i18n.get("course.goToWebinar"),"}")},m=s[0];switch(Object.keys(d).forEach((function(t){m=m.replace(t,d[t])})),s.length){case 2:"dailyNews"===s[1]?(r="dialynews",a=null):"workpad"===s[1]?(r="workpad",a=null):(r="course",a={coursetitleid:s[1]});break;case 8:if(c&&-1===c.indexOf(s[1])){if(r="start",!window.me.isStaff)return;break}r="pathPlayer";var p=s[7];a={coursetitleid:s[1],unit:s[3],time:p},m="".concat(m,", at ").concat(window.secondsTohhmmss(Math.floor(p)));break;case 5:if(c&&-1===c.indexOf(s[1])){if(r="start",!window.me.isStaff)return;break}if(u&&u.indexOf(s[1])>-1){r="course",a={coursetitleid:s[1]};break}"path"===s[4]?(r="pathPlayer",a={coursetitleid:s[1],unit:s[3]}):(r="ebook",a={coursetitleid:s[1],chapter:s[2],page:s[3],el:s[4]});break;case 4:if(c&&-1===c.indexOf(s[1])){r="start";break}if(u&&u.indexOf(s[1])>-1){r="course",a={coursetitleid:s[1]};break}r="ivideo",a={coursetitleid:s[1],videoid:s[3]}}var h="v3"===window.getMobileClientVersion()?"javascript:void(0)":window.wwwelopersUrl(r,a),f=this.$lw.isInAuthoringEnvironment?"_blank":"";return'<a href="'.concat(h,'" class="social-incontext" target="').concat(f,'">@').concat(m,"</a>")}},editedLabel:function(){return this.post.edited.userId&&this.post.user_id.id!==this.post.edited.userId?this.i18n.get("social.edited_by_admin"):this.i18n.get("social.edited")}}),watch:{editMode:function(t,e){t!==e&&(this.postCopy=t?(0,ct.cloneDeep)(this.post):null)}},methods:vt(vt(vt({},(0,u.nv)(d.$,["deletePostById","togglePinPost"])),(0,u.nv)(M,["addPostLike","removePostLike","addPostUpvote","removePostUpvote"])),{},{removePost:function(){var t=this;return(0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deletePostById(t.post.id);case 2:e.sent.hasErrors&&t.$lw.showMessage(I.zG.WARNING,"","Post can be deleted only by author or admin",[{name:t.i18n.get("common.ok")}]);case 4:case"end":return e.stop()}}),e)})))()},removePostAfterConfirmation:function(){var t=this;this.$lw.showMessage(I.zG.ALERT,this.i18n.get("social.post_delete"),this.i18n.get("social.post_delete_confirm"),[{name:this.i18n.get("social.delete"),func:function(){return t.removePost()},args:[],class:"solid"},{name:this.i18n.get("common.cancel")}])},handlePostLike:function(){var t=this;return(0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.isLiked?t.removePostLike(t.post.id,t.currentUser):t.addPostLike(t.post.id,t.currentUser));case 1:case"end":return e.stop()}}),e)})))()},handlePostUpvote:function(){return this.isUpvoted?this.removePostUpvote(this.post.id,this.currentUser):this.addPostUpvote(this.post.id,this.currentUser)},expandPostItem:function(){this.textContentExpanded=!0},copyPostLinkToClipboard:function(){var t=this;return(0,o.Z)(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,y.uR)(t.post),e.next=4,navigator.clipboard.writeText(n);case 4:t.$lw.showMessage(I.zG.INFORM,"",t.i18n.get("social.link_copied_to_clipboard"),[]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Failed to copy text: ",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},scrollToCommentEditor:function(){var t=this;return(0,o.Z)(r().mark((function e(){var n,o,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.$refs.commentEditor.$el,i=document.body,o&&i){e.next=4;break}return e.abrupt("return");case 4:if(!((null===(n=o.getBoundingClientRect())||void 0===n?void 0:n.top)<i.clientHeight/2)){e.next=7;break}return e.abrupt("return");case 7:o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});case 8:case"end":return e.stop()}}),e)})))()},goToPost:function(){this.$router.push("/social/post/".concat(this.post.id))}})};const _t=(0,O.Z)(bt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-item-container",attrs:{id:t.post.id}},[e("div",{staticClass:"post-item lw-body-bg"},[t.editMode?e("social-post-editor",{attrs:{post:t.postCopy,"save-context":t.post.context},on:{"exit-edit-mode":function(e){return t.$emit("exit-edit-mode-clicked")}}}):e("div",{staticClass:"post-item-content"},[e("div",{staticClass:"post-item-header-container"},[e("div",{staticClass:"flex a-i-c gap-8"},[e("user-card-on-hover",{staticClass:"member-card-container weglot-exclude",attrs:{"user-id":t.postAuthor.id}},[e("member-avatar",{attrs:{avatar:t.postAuthor.avatar,size:"normal","active-indicator":!1}})],1),t._v(" "),e("div",{staticClass:"flex flex-d-col gap-4"},[e("div",{staticClass:"flex flex-wrap post-name-tags a-i-c gap-8"},[e("div",{staticClass:"learnworlds-main-text-small bold weglot-exclude",staticStyle:{"word-break":"break-all"}},[e("UserNoTranslate",[t._v(t._s(t.postAuthor.name))])],1),t._v(" "),"staff"===t.postAuthor.role?e("span",{staticClass:"social-member--role"},[t._v(t._s(t.i18n.get("common.staff")))]):"instructor"===t.postAuthor.role?e("span",{staticClass:"social-member--role"},[t._v(t._s(t.i18n.get("common.instructor")))]):t._e(),t._v(" "),t.edited?e("div",{staticClass:"learnworlds-main-text-tiny fsh-0 lw-text-color-fadeout30"},[t._v("\n                                "+t._s(t.editedLabel)+"\n                            ")]):t._e()]),t._v(" "),e("div",{},[e("div",{staticClass:"learnworlds-main-text-tiny lw-text-color-fadeout30"},[t._v("\n                                "+t._s(t.createdDateTime)+"\n                            ")]),t._v(" "),t.postContextLink?e("div",{staticClass:"context learnworlds-main-text-tiny weglot-exclude",domProps:{innerHTML:t._s(t.postContextLink)}}):t._e()])])],1),t._v(" "),e("div",{staticClass:"flex",staticStyle:{"align-self":"stretch"}},[t.hasPostActions?e("social-more-button",[e("social-context-menu",{attrs:{context:{},"menu-items":t.postActions}})],1):t._e()],1),t._v(" "),t.post.is_pinned?e("span",{staticClass:"social-post--pin-indicator"},[e("span",{staticClass:"fas fa-thumbtack"})]):t._e()]),t._v(" "),e("social-post-text-content",{attrs:{post:t.post,threshold:600}}),t._v(" "),e("social-content-item",{attrs:{post:t.post}}),t._v(" "),e("social-post-interactions",{attrs:{interactions:t.postInteractions}})],1),t._v(" "),t.canMemberComment?e("social-post-comment-feed",{attrs:{post:t.post,"force-show-all":t.expandedComments&&t.hasPostsManagePermissions}}):t._e(),t._v(" "),t.canMemberComment?e("social-post-comment-editor",{ref:"commentEditor",class:{"pos-fixed w-full lw-body-bg p-5-10 social-bottom-comment-editor":t.hasBottomCommentEditor},attrs:{post:t.post,"force-navigate-to-post":!t.hasBottomCommentEditor&&t.isMobile&&!t.isStandaloneRenderer,"force-focus":t.hasBottomCommentEditor},on:{"go-to-post":t.goToPost}}):t._e()],1)])}),[],!1,null,"d9298f9e",null).exports},78427:(t,e,n)=>{n.d(e,{Z:()=>s});var o=n(4950);const i={name:"SocialPostSort",props:{value:{type:String,default:o.Xb.MODIFIED_DESC}},computed:{sortOptions:function(){return[{id:o.Xb.MODIFIED_DESC,value:o.Xb.MODIFIED_DESC,label:this.i18n.get("social.feed_sort_newest_activity_first")},{id:o.Xb.CREATED_DESC,value:o.Xb.CREATED_DESC,label:this.i18n.get("social.feed_sort_newest_first")},{id:o.Xb.CREATED_ASC,value:o.Xb.CREATED_ASC,label:this.i18n.get("social.feed_sort_oldest_first")}]}},methods:{updateSort:function(t){this.$emit("input",t.target.value)}}};const s=(0,n(51900).Z)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"social-post-sort flex a-i-c j-c-fe gap-8"},[e("span",{staticClass:"learnworlds-main-text-small"},[t._v(t._s(t.i18n.get("social.feed_sort_by")))]),t._v(" "),e("div",{staticClass:"social-select-wrapper lw-body-bg lw-b-1px-fadeout80"},[e("select",{staticClass:"social-select cursor-pointer learnworlds-main-text-very-small",domProps:{value:t.value},on:{change:t.updateSort}},t._l(t.sortOptions,(function(n){return e("option",{key:n.id,domProps:{value:n.value}},[t._v("\n                "+t._s(n.label)+"\n            ")])})),0),t._v(" "),e("span",{staticClass:"social-select-chevron learnworlds-main-text-very-small learnworlds-icon fas fa-angle-down"})])])}),[],!1,null,null,null).exports},68304:(t,e,n)=>{n.d(e,{Z:()=>r});var o=n(34630),i=n(15332);const s={name:"SocialVideoEmbed",components:{ImageSvg:o.Z},props:{data:{type:Object,required:!0},editing:{type:Boolean,default:!1}},computed:{hasVideoId:function(){return(0,i.a9)(this.data.url)},url:function(){var t=(0,i.a9)(this.data.url);return"https://youtube.com/embed/".concat(t)}}};const r=(0,n(51900).Z)(s,(function(){var t=this,e=t._self._c;return t.hasVideoId?e("div",{staticClass:"social-video-embed"},[e("iframe",{attrs:{id:"youtube-embed",type:"text/html",width:"100%",height:"240",src:t.url}}),t._v(" "),t.editing?e("div",{staticClass:"embed-remove"},[e("button",{staticClass:"btn-icon-only",on:{click:function(e){return t.$emit("remove-video")}}},[e("image-svg",{attrs:{name:"CloseIcon",title:"Remove"}})],1)]):t._e()]):t._e()}),[],!1,null,"2b59d47c",null).exports},60369:(t,e,n)=>{n.d(e,{Z:()=>i});const o={name:"SocialMoreButton",data:function(){return{moreButtonsHovered:!1,menuHeight:200}},computed:{moreButtonsStyle:function(){var t,e,n,o;if(!this.moreButtonsHovered)return{};var i={right:"-5px",top:"18px"},s=null===(t=this.$el)||void 0===t?void 0:t.closest(".lw-author-list-view__main"),r=null===(e=this.$el)||void 0===e?void 0:e.closest(".js-list-item"),a=null==r||null===(n=r.parentElement)||void 0===n?void 0:n.closest(".lw-accordion"),l=null==a||null===(o=a.parentElement)||void 0===o?void 0:o.closest(".lw-accordion");if(!r)return i;if(!s)return r.offsetTop>this.menuHeight+100&&(i.top="-".concat(this.menuHeight,"px")),i;var c=(l?Math.abs(l.offsetTop)+Math.abs(a.offsetTop)+Math.abs(r.offsetTop):a?Math.abs(a.offsetTop)+Math.abs(r.offsetTop):Math.abs(r.offsetTop))-s.scrollTop;return s.clientHeight-c<this.menuHeight+25&&(i.top="-".concat(this.menuHeight,"px")),i}},methods:{setMoreButtonsHovered:function(t){var e=this;this.moreButtonsHovered=t,t&&this.$nextTick((function(){e.$refs.contextMenu.offsetHeight>0&&(e.menuHeight=e.$refs.contextMenu.offsetHeight)}))}}};const i=(0,n(51900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"context-menu-action cursor-pointer",on:{mouseover:function(e){return t.setMoreButtonsHovered(!0)},mouseout:function(e){return t.setMoreButtonsHovered(!1)}}},[e("span",{staticClass:"learnworlds-icon fas fa-ellipsis-vertical au-icon",staticStyle:{"font-size":"15px"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.moreButtonsHovered,expression:"moreButtonsHovered"}],ref:"contextMenu",staticClass:"context-menu-container lw-b-1px-fadeout80 lw-body-bg",style:t.moreButtonsStyle},[t._t("default")],2)])}),[],!1,null,null,null).exports},49899:(t,e,n)=>{n.d(e,{Z:()=>i});const o={name:"MemberAvatar",props:{avatar:{type:String,default:""},size:{type:String,default:"normal"},activeIndicator:{type:Boolean,default:!1},extraClasses:{type:String,default:""}}};const i=(0,n(51900).Z)(o,(function(){var t=this,e=t._self._c;return t.avatar?e("div",{staticClass:"member-icon pos-rel",class:t.size},[e("img",{staticClass:"social-member-avatar",class:t.extraClasses,attrs:{src:t.avatar,alt:"avatar"}}),t._v(" "),t.activeIndicator?e("svg",{staticClass:"member-active",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",fill:"none"}},[e("circle",{attrs:{cx:"9",cy:"9",r:"8",fill:"#1DBA6E",stroke:"transparent","stroke-width":"2"}})]):t._e()]):t._e()}),[],!1,null,null,null).exports},64929:(t,e,n)=>{n.d(e,{Z:()=>_});var o=n(15861),i=(n(5212),n(41539),n(64687)),s=n.n(i),r=(n(82526),n(57327),n(38880),n(57658),n(89554),n(54747),n(49337),n(33321),n(69070),n(4942)),a=(n(47941),n(26699),n(92222),n(49899)),l=n(63420),c=n(56249),u=n(28575),d=n(68485);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const h={name:"UserCard",components:{UserNoTranslate:n(70951).Z,SocialMemberAvatar:a.Z},props:{userId:{type:String,required:!0}},data:function(){return{loading:!1,member:null}},computed:p(p({},(0,l.rn)(u.$,["cachedUserData"])),{},{hasSocialAccounts:function(){var t=this,e=["fb","twitter","instagram"];return this.member&&Object.keys(this.member).some((function(n){return e.includes(n)&&!!t.member[n]}))},userAvatar:function(){return this.$lw.getAvatarLink(this.userId)},isUserOnline:function(){return!1},showUserActions:function(){return this.userId!==window.me.id},showUserCard:function(){return!this.loading&&this.member},showSendMessageButton:function(){return"v3"!==window.getMobileClientVersion()&&(!window.SITE_DISABLE_INBOX||!("disabled"===window.SITE_DISABLE_INBOX)&&!!this.member.isStaff)}}),mounted:function(){var t=this;return(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.getUserData(t.userId);case 3:t.member=e.sent,t.member||console.error("Member data error: ",t.member),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},methods:p(p({},(0,l.nv)(u.$,["getUserData"])),{},{redirectToPrivateMessage:function(){window.open("/inbox?userid=".concat(this.userId,"&username=").concat(this.member.username),"_self")},reportMember:function(){var t=this;this.$lw.showMessage(d.zG.ALERT,this.i18n.get("social.spammy_alert_title"),this.i18n.get("social.spammy_alert_content"),[{name:this.i18n.get("common.ok"),func:function(){return c.Z.reportMember(t.userId)}},{name:this.i18n.get("common.cancel")}])}})};var f=n(51900);const v=(0,f.Z)(h,(function(){var t,e,n=this,o=n._self._c;return n.showUserCard?o("div",{staticClass:"social-user-card lw-b-1px-fadeout80 lw-body-bg"},[o("div",{staticClass:"flex a-i-c gap-10"},[o("social-member-avatar",{attrs:{avatar:n.userAvatar,"active-indicator":n.isUserOnline,size:"normal"}}),n._v(" "),o("div",{staticClass:"social-member--info"},[o("div",{staticClass:"social-member--name flex a-i-c gap-8 flex-wrap"},[o("UserNoTranslate",{staticClass:"learnworlds-main-text-small mr-8"},[n._v(n._s(n.member.username))]),n._v(" "),"staff"===(null===(t=n.member)||void 0===t?void 0:t.isStaff)?o("span",{staticClass:"social-member--role"},[n._v(n._s(n.i18n.get("common.staff")))]):"instructor"===(null===(e=n.member)||void 0===e?void 0:e.isStaff)?o("span",{staticClass:"social-member--role"},[n._v(n._s(n.i18n.get("common.instructor")))]):n._e()],1),n._v(" "),n.hasSocialAccounts?o("div",{staticClass:"social-member--links flex a-i-c gap-8 mt-10"},[n.member.fb?o("a",{staticClass:"member-social-link",attrs:{href:n.member.fb,target:"_blank"}},[o("span",{staticClass:"learnworlds-main-text learnworlds-main-text-very-small learnworlds-icon fab fa-facebook-f"})]):n._e(),n._v(" "),n.member.instagram?o("a",{staticClass:"member-social-link",attrs:{href:n.member.instagram,target:"_blank"}},[o("span",{staticClass:"learnworlds-main-text learnworlds-main-text-very-small learnworlds-icon fab fa-instagram"})]):n._e(),n._v(" "),n.member.twitter?o("a",{staticClass:"member-social-link",attrs:{href:n.member.twitter,target:"=_blank"}},[o("span",{staticClass:"learnworlds-main-text learnworlds-main-text-very-small learnworlds-icon fab fa-twitter"})]):n._e()]):n._e()])],1),n._v(" "),n.showUserActions?o("div",{staticClass:"social-member--actions mt-10 flex j-c-sb a-i-c"},[n.showSendMessageButton?o("button",{staticClass:"flex a-i-c p-0 cursor-pointer learnworlds-main-text-very-small",on:{click:n.redirectToPrivateMessage}},[o("span",{staticClass:"learnworlds-icon far fa-envelope mr-5"}),n._v(" "),o("span",{},[n._v(n._s(n.i18n.get("social.message_user")))])]):n._e(),n._v(" "),o("button",{staticClass:"flex a-i-c p-0 cursor-pointer learnworlds-main-text-very-small",on:{click:n.reportMember}},[o("span",{staticClass:"learnworlds-icon far fa-flag mr-5"}),n._v(" "),o("span",{},[n._v(n._s(n.i18n.get("social.spammy_user")))])])]):n._e()]):n._e()}),[],!1,null,null,null).exports;var g=n(47737);const b={name:"UserCardOnHover",components:{UserCard:v},props:{userId:{type:String,required:!0},elementTag:{type:String,default:"div"}},setup:function(){return{elementPosition:(0,g.Z)()}},data:function(){return{showUserCard:!1}},computed:{trackerElementStyle:function(){var t=this.elementPosition.rect,e={top:"".concat(t.value.top,"px"),left:"".concat(t.value.left,"px")};return{position:"fixed",zIndex:"1000",top:e.top,left:e.left,transform:"translate3d(-50px, -100%, 0)"}}},mounted:function(){var t=this;return(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:t.elementPosition.setElement(t.$el);case 3:case"end":return e.stop()}}),e)})))()},methods:{handleMouseEnter:function(t){var e=[this.$refs["user-card-wrapper"],this.$refs["social-user-card--tracker"]];this.showUserCard=e.some((function(e){var n;return null==e||null===(n=e.contains)||void 0===n?void 0:n.call(e,t.target)}))},handleMouseLeave:function(t){var e=[this.$refs["user-card-wrapper"],this.$refs["social-user-card--tracker"]];this.showUserCard=e.some((function(e){var n;return null==e||null===(n=e.contains)||void 0===n?void 0:n.call(e,t.relatedTarget)}))}}};const _=(0,f.Z)(b,(function(){var t=this,e=t._self._c;return e(t.elementTag,{ref:"user-card-wrapper",tag:"component",staticClass:"user-card-hover-wrapper cursor-pointer",on:{mouseenter:t.handleMouseEnter,mouseleave:t.handleMouseLeave}},[t._t("default"),t._v(" "),e("portal",{attrs:{to:"user-card-portal"}},[t.showUserCard?e("div",{ref:"social-user-card--tracker",style:t.trackerElementStyle,on:{mouseenter:t.handleMouseEnter,mouseleave:t.handleMouseLeave}},[e("keep-alive",[e("user-card",{staticClass:"social-user-card-hover",attrs:{"user-id":t.userId}})],1)],1):t._e()])],2)}),[],!1,null,null,null).exports}}]);